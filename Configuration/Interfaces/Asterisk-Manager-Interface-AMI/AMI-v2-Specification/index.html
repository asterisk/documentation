<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://docs.asterisk.org/Configuration/Interfaces/Asterisk-Manager-Interface-AMI/AMI-v2-Specification/ rel=canonical><link href=../The-Asterisk-Manager-TCP-IP-API/ rel=prev><link href=../Asynchronous-Javascript-Asterisk-Manager-AJAM/ rel=next><link rel=icon href=../../../../favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.19"><title>AMI v2 Specification - Asterisk Documentation</title><link rel=stylesheet href=../../../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../material-override.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2ZKMCW9DZ9"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2ZKMCW9DZ9",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2ZKMCW9DZ9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#ami-v2-specification class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title="Asterisk Documentation" class="md-header__button md-logo" aria-label="Asterisk Documentation" data-md-component=logo> <img src=../../../../favicon.ico alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Asterisk Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> AMI v2 Specification </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <table border=0 style="width: max-content;padding:0px;margin:0px"><tr><td> <a href=https://github.com/asterisk/asterisk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Asterisk </div> </a> </td> <td style=font-size:.65rem;line-height:1.2;vertical-align:middle;> <a href=/About-the-Project/Asterisk-Versions>Asterisk Versions</a><br> <a target=_blank href=https://github.com/asterisk/documentation/issues>Report Documentation Issues</a><br> <a target=_blank href=https://github.com/asterisk/documentation>Contribute to the Documentation</a> </td></tr> </table> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Asterisk Documentation" class="md-nav__button md-logo" aria-label="Asterisk Documentation" data-md-component=logo> <img src=../../../../favicon.ico alt=logo> </a> Asterisk Documentation </label> <div class=md-nav__source> <table border=0 style="width: max-content;padding:0px;margin:0px"><tr><td> <a href=https://github.com/asterisk/asterisk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Asterisk </div> </a> </td> <td style=font-size:.65rem;line-height:1.2;vertical-align:middle;> <a href=/About-the-Project/Asterisk-Versions>Asterisk Versions</a><br> <a target=_blank href=https://github.com/asterisk/documentation/issues>Report Documentation Issues</a><br> <a target=_blank href=https://github.com/asterisk/documentation>Contribute to the Documentation</a> </td></tr> </table> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../About-the-Project/ class=md-nav__link> <span class=md-ellipsis> About the Project </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk-Community/ class=md-nav__link> <span class=md-ellipsis> Asterisk Community </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Fundamentals/ class=md-nav__link> <span class=md-ellipsis> Fundamentals </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Getting-Started/Beginning-Asterisk/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Core-Configuration/ class=md-nav__link> <span class=md-ellipsis> Core Configuration </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Channel-Drivers/SIP/ class=md-nav__link> <span class=md-ellipsis> Channel Drivers </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Dialplan/ class=md-nav__link> <span class=md-ellipsis> Dialplan </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Applications/ class=md-nav__link> <span class=md-ellipsis> Applications </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Functions/ class=md-nav__link> <span class=md-ellipsis> Functions </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Features/ class=md-nav__link> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7 checked> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex=0> <span class=md-ellipsis> Interfaces </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=true> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> Interfaces </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7_1 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Asterisk Manager Interface AMI </span> </a> <label class="md-nav__link " for=__nav_5_7_1 id=__nav_5_7_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_7_1_label aria-expanded=true> <label class=md-nav__title for=__nav_5_7_1> <span class="md-nav__icon md-icon"></span> Asterisk Manager Interface AMI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../AMI-Command-Syntax/ class=md-nav__link> <span class=md-ellipsis> AMI Command Syntax </span> </a> </li> <li class=md-nav__item> <a href=../AMI-Libraries-and-Frameworks/ class=md-nav__link> <span class=md-ellipsis> AMI Libraries and Frameworks </span> </a> </li> <li class=md-nav__item> <a href=../AMI-Manager-Commands/ class=md-nav__link> <span class=md-ellipsis> AMI Manager Commands </span> </a> </li> <li class=md-nav__item> <a href=../Asterisk-Manager-Interface-AMI-Changes/ class=md-nav__link> <span class=md-ellipsis> Asterisk Manager Interface (AMI) Changes </span> </a> </li> <li class=md-nav__item> <a href=../The-Asterisk-Manager-TCP-IP-API/ class=md-nav__link> <span class=md-ellipsis> The Asterisk Manager TCP IP API </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7_1_7 checked> <div class="md-nav__link md-nav__container"> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> AMI v2 Specification </span> </a> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_5_7_1_7_label aria-expanded=true> <label class=md-nav__title for=__nav_5_7_1_7> <span class="md-nav__icon md-icon"></span> AMI v2 Specification </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../Asynchronous-Javascript-Asterisk-Manager-AJAM/ class=md-nav__link> <span class=md-ellipsis> Asynchronous Javascript Asterisk Manager AJAM </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-REST-Interface-ARI/ class=md-nav__link> <span class=md-ellipsis> Asterisk REST Interface ARI </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../Asterisk-Gateway-Interface-AGI/ class=md-nav__link> <span class=md-ellipsis> Asterisk Gateway Interface (AGI) </span> </a> </li> <li class=md-nav__item> <a href=../../Asterisk-External-Application-Protocol-AEAP/ class=md-nav__link> <span class=md-ellipsis> Asterisk External Application Protocol (AEAP) </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Back-end-Database-and-Realtime-Connectivity/ class=md-nav__link> <span class=md-ellipsis> Back end Database and Realtime Connectivity </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Distributed-Device-State/ class=md-nav__link> <span class=md-ellipsis> Distributed Device State </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../Asterisk-Call-Files/ class=md-nav__link> <span class=md-ellipsis> Asterisk Call Files </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-Calendaring/ class=md-nav__link> <span class=md-ellipsis> Asterisk Calendaring </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../Utilizing-the-StatsD-Dialplan-Application/ class=md-nav__link> <span class=md-ellipsis> Utilizing the StatsD Dialplan Application </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Reporting/ class=md-nav__link> <span class=md-ellipsis> Reporting </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Miscellaneous/ class=md-nav__link> <span class=md-ellipsis> Miscellaneous </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../WebRTC/ class=md-nav__link> <span class=md-ellipsis> WebRTC </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../Codec-Opus/ class=md-nav__link> <span class=md-ellipsis> Codec Opus </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Deployment/ class=md-nav__link> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Operation/ class=md-nav__link> <span class=md-ellipsis> Operation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Development/ class=md-nav__link> <span class=md-ellipsis> Development </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Latest_API/ class=md-nav__link> <span class=md-ellipsis> Latest API </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_16_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 16 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_18_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 18 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_19_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 19 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_20_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 20 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_21_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 21 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_22_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 22 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_23_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 23 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Certified-Asterisk_18.9_Documentation/ class=md-nav__link> <span class=md-ellipsis> Certified Asterisk 18.9 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Certified-Asterisk_20.7_Documentation/ class=md-nav__link> <span class=md-ellipsis> Certified Asterisk 20.7 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Test-Suite-Documentation/ class=md-nav__link> <span class=md-ellipsis> Test Suite Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Historical-Documentation/ class=md-nav__link> <span class=md-ellipsis> Historical Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../../Contributing-to-the-Documentation/ class=md-nav__link> <span class=md-ellipsis> Contributing to the Documentation </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> <nav class=md-nav aria-label=Introduction> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scope class=md-nav__link> <span class=md-ellipsis> Scope </span> </a> </li> <li class=md-nav__item> <a href=#versioning class=md-nav__link> <span class=md-ellipsis> Versioning </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#terminology class=md-nav__link> <span class=md-ellipsis> Terminology </span> </a> </li> <li class=md-nav__item> <a href=#protocol-overview class=md-nav__link> <span class=md-ellipsis> Protocol Overview </span> </a> </li> <li class=md-nav__item> <a href=#semantics-and-syntax class=md-nav__link> <span class=md-ellipsis> Semantics and Syntax </span> </a> <nav class=md-nav aria-label="Semantics and Syntax"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#message-sending-and-receiving class=md-nav__link> <span class=md-ellipsis> Message Sending and Receiving </span> </a> </li> <li class=md-nav__item> <a href=#message-layout class=md-nav__link> <span class=md-ellipsis> Message Layout </span> </a> <nav class=md-nav aria-label="Message Layout"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#common-fields class=md-nav__link> <span class=md-ellipsis> Common Fields </span> </a> <nav class=md-nav aria-label="Common Fields"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#actions class=md-nav__link> <span class=md-ellipsis> Actions </span> </a> <nav class=md-nav aria-label=Actions> <ul class=md-nav__list> <li class=md-nav__item> <a href=#general-fields class=md-nav__link> <span class=md-ellipsis> General Fields </span> </a> </li> <li class=md-nav__item> <a href=#channels class=md-nav__link> <span class=md-ellipsis> Channels </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#events class=md-nav__link> <span class=md-ellipsis> Events </span> </a> <nav class=md-nav aria-label=Events> <ul class=md-nav__list> <li class=md-nav__item> <a href=#general-fields_1 class=md-nav__link> <span class=md-ellipsis> General Fields </span> </a> </li> <li class=md-nav__item> <a href=#channels_1 class=md-nav__link> <span class=md-ellipsis> Channels </span> </a> </li> <li class=md-nav__item> <a href=#bridges class=md-nav__link> <span class=md-ellipsis> Bridges </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#eventlist class=md-nav__link> <span class=md-ellipsis> EventList </span> </a> </li> <li class=md-nav__item> <a href=#message class=md-nav__link> <span class=md-ellipsis> Message </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#actions_1 class=md-nav__link> <span class=md-ellipsis> Actions </span> </a> </li> <li class=md-nav__item> <a href=#events_1 class=md-nav__link> <span class=md-ellipsis> Events </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#channel-interactionlifetime class=md-nav__link> <span class=md-ellipsis> Channel Interaction/Lifetime </span> </a> <nav class=md-nav aria-label="Channel Interaction/Lifetime"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-channel-lifetime class=md-nav__link> <span class=md-ellipsis> Basic Channel Lifetime </span> </a> </li> <li class=md-nav__item> <a href=#channel-variables class=md-nav__link> <span class=md-ellipsis> Channel Variables </span> </a> </li> <li class=md-nav__item> <a href=#dtmf class=md-nav__link> <span class=md-ellipsis> DTMF </span> </a> </li> <li class=md-nav__item> <a href=#dialplan-execution class=md-nav__link> <span class=md-ellipsis> Dialplan Execution </span> </a> </li> <li class=md-nav__item> <a href=#dialing-and-origination class=md-nav__link> <span class=md-ellipsis> Dialing and Origination </span> </a> </li> <li class=md-nav__item> <a href=#bridging class=md-nav__link> <span class=md-ellipsis> Bridging </span> </a> <nav class=md-nav aria-label=Bridging> <ul class=md-nav__list> <li class=md-nav__item> <a href=#two-party-bridging class=md-nav__link> <span class=md-ellipsis> Two Party Bridging </span> </a> </li> <li class=md-nav__item> <a href=#transfers class=md-nav__link> <span class=md-ellipsis> Transfers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#local-channel-optimization class=md-nav__link> <span class=md-ellipsis> Local Channel Optimization </span> </a> </li> <li class=md-nav__item> <a href=#masquerades class=md-nav__link> <span class=md-ellipsis> Masquerades </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transports class=md-nav__link> <span class=md-ellipsis> Transports </span> </a> </li> <li class=md-nav__item> <a href=#security-considerations class=md-nav__link> <span class=md-ellipsis> Security Considerations </span> </a> <nav class=md-nav aria-label="Security Considerations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#class-authorizations class=md-nav__link> <span class=md-ellipsis> Class Authorizations </span> </a> </li> <li class=md-nav__item> <a href=#access-control-lists class=md-nav__link> <span class=md-ellipsis> Access Control Lists </span> </a> </li> <li class=md-nav__item> <a href=#authorization class=md-nav__link> <span class=md-ellipsis> Authorization </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ami-configuration class=md-nav__link> <span class=md-ellipsis> AMI Configuration </span> </a> <nav class=md-nav aria-label="AMI Configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#general-settings class=md-nav__link> <span class=md-ellipsis> General Settings </span> </a> </li> <li class=md-nav__item> <a href=#client-settings class=md-nav__link> <span class=md-ellipsis> Client Settings </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=ami-v2-specification>AMI v2 Specification<a class=headerlink href=#ami-v2-specification title="Permanent link">&para;</a></h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>This Asterisk Manager Interface (AMI) specification describes the relationship between Asterisk and an external entity wishing to communicate with Asterisk over the AMI protocol. It describes:</p> <ul> <li>An overview of the AMI protocol</li> <li>The operations AMI provides external entities wishing to control Asterisk</li> <li>Basic formatting of AMI message structures</li> <li>Guaranteed operations, configuration control, and other information provided by Asterisk in AMI v2.x and greater.</li> </ul> <h3 id=scope>Scope<a class=headerlink href=#scope title="Permanent link">&para;</a></h3> <p>This specification describes AMI versions starting at 2.0.0 which was implemented by Asterisk 12. This specification provides details on the functional, operational and design requirements for AMI. Note that this does not include a comprehensive listing of the AMI configuration file parameters or messages that a system interfacing over AMI will send/receive. Those are documented in the <a href=/Latest_API/API_Documentation/AMI_Actions/ >AMI Actions</a> and <a href=/Latest_API/API_Documentation/AMI_Events/ >AMI Events</a> sections of the <a href=/Latest_API/API_Documentation/ >API Documentation</a> for the latest Asterisk release.</p> <p>In addition, this specification provides interface requirements levied on AMI by Stasis, a message bus internal to Asterisk. It conveys sufficient detail to understand how AMI attaches to the Stasis message bus and interacts with other entities on Stasis.</p> <p>This specification is intended for all parties requiring such information, including software developers, system designers and testers responsible for implementing the interface.</p> <h3 id=versioning>Versioning<a class=headerlink href=#versioning title="Permanent link">&para;</a></h3> <p>Starting in Asterisk 12, AMI now follows semantic versioning. The initial release of Asterisk 12 had an AMI version of 2.0.0.</p> <p>A full description of semantic versionining can be found at <a href=http://semver.org/ >http://semver.org/</a>.</p> <h2 id=terminology>Terminology<a class=headerlink href=#terminology title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Term</th> <th>Definition</th> </tr> </thead> <tbody> <tr> <td>Action</td> <td>A command issued to Asterisk from an external entity via AMI</td> </tr> <tr> <td>Client</td> <td>An external entity communicating with Asterisk via AMI over some transport mechanism</td> </tr> <tr> <td>Event</td> <td>A message sent from Asterisk to an external entity via AMI</td> </tr> <tr> <td>Field</td> <td>A key/value pair that exists in either an action or event</td> </tr> <tr> <td>Stasis</td> <td>The internal framework that AMI is built on top of</td> </tr> </tbody> </table> <h2 id=protocol-overview>Protocol Overview<a class=headerlink href=#protocol-overview title="Permanent link">&para;</a></h2> <p>Asterisk provides a number of interfaces that serve different purposes. Say, for example, we wanted to manipulate a call between Alice and Bob via some external mechanism. Depending on what we wanted to do with the call, we may use one or more interfaces to manipulate the channels that make up the call between Alice and Bob.</p> <table> <thead> <tr> <th>Alice calls Bob and...</th> <th>Interface</th> </tr> </thead> <tbody> <tr> <td>... we want to use a local script to execute some logic on Alice's channel</td> <td>AGI</td> </tr> <tr> <td>... we want to execute a script on a remote machine on Bob's channel</td> <td>FastAGI</td> </tr> <tr> <td>... we want to put Alice into an IVR with fine grained media control, where the IVR is written outside of <code>extensions.conf</code></td> <td>ExternalIVR</td> </tr> <tr> <td>... we want to control Alice and Bob's underlying channel objects at some asynchronous time</td> <td>AMI (possibly with AsyncAGI)</td> </tr> <tr> <td>... we want to write our own Dialling application to control both Alice and Bob</td> <td>ARI</td> </tr> </tbody> </table> <p>In general, AMI is used to manage Asterisk and its channels. It does not determine what actions are executed on a particular channel - the dialplan and/or an AGI interface does that - but it does allow a client to control call generation, aspects of call flow, and other internals of Asterisk.</p> <p>At its heart, AMI is an asynchronous message bus: it spills <strong>events</strong> that contain information about the Asterisk system over some transport. In response, clients may request that Asterisk takes some <strong>action</strong>. These two concepts - actions and events - make up the core of what is AMI. As AMI is asynchronous, as events occur in Asterisk they are immediately sent to the clients. This means that actions issued by entities happen without any synchronization with the events being received, even if those events occur in response to an action. It is the responsibility of entities to associate event responses back to actions.</p> <p>Clients wishing to use AMI act as clients and connect to Asterisk's AMI server over a supported transport mechanism. Authentication may or may not be enabled, depending on the configuration. Once connected, events can be automatically spilled to the connected clients, or limited in a variety of fashions. A connected client can send an action to the AMI server at any time. Depending on the allowed authorizations, the action may be allowed or disallowed.</p> <p>More information on the various ways a client can be configured can be seen in AMI Configuration.</p> <div class="admonition note"> <p class=admonition-title>Nomenclature</p> <p>Sometimes, the term <strong>command</strong> may be used instead of the term <strong>action</strong>. With respect to AMI actions, command is synonymous with action, and the two can be treated the same. For the sake of consistency, we've attempted to use the term <strong>action</strong> where possible.</p> </div> <p>Historically, AMI has existed in Asterisk as its own core component <code>manager</code>. AMI events were raised throughout Asterisk encoded in an AMI specific format, and AMI actions were processed and passed to the functions that implemented the logic. In Asterisk 12, AMI has been refactored to sit on top of Stasis, a generic, protocol independent message bus internal to Asterisk. From the perspective of clients wishing to communicate with Asterisk over AMI very little has changed; internally, the Stasis representation affords a much higher degree of flexibility with how messages move through Asterisk. It also provides a degree of uniformity for information that is propagated to interested parties.</p> <p>AMI High Level Diagram:</p> <p><img alt="AMI High Level Diagram" src=AMI-High-Level-Diagram.png></p> <p>Stasis acts as a generic publish/subscribe message bus inside of Asterisk. While AMI often directly interacts with constructs in Asterisk through actions, it receives its events through messages published over Stasis-Core. It translates the generic Stasis messages into an AMI event, and sends those to the appropriate AMI clients.</p> <h2 id=semantics-and-syntax>Semantics and Syntax<a class=headerlink href=#semantics-and-syntax title="Permanent link">&para;</a></h2> <h3 id=message-sending-and-receiving>Message Sending and Receiving<a class=headerlink href=#message-sending-and-receiving title="Permanent link">&para;</a></h3> <p>By default, AMI is an asynchronous protocol that sends events immediately to clients when those events are available. Likewise, clients are free to send actions to AMI at any time, which may or may not trigger additional events. The exception to this is when the connection is over HTTP; in that scenario, events are only transmitted as part of the response to an HTTP POST.</p> <p>Various options for configuration of clients can control which events are sent to a client. Events can be whitelisted/blacklisted explicitly via event filters, or implicitly by class authorizations.</p> <h3 id=message-layout>Message Layout<a class=headerlink href=#message-layout title="Permanent link">&para;</a></h3> <p>AMI is an ASCII protocol that provides bidirectional communication with clients. An AMI message – action or event – is composed of fields delineated by the '\r\n' characters. Within a message, each field is a key value pair delineated by a ':'. A single space MUST follow the ':' and precede the value. Fields with the same key may be repeated within an AMI message. An action or event is terminated by an additional '\r\n' character.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>Event: Newchannel
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>Privilege: call,all
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>Channel: PJSIP/misspiggy-00000001
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>Uniqueid: 1368479157.3
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>ChannelState: 3
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>ChannelStateDesc: Up
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>CallerIDNum: 657-5309
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>CallerIDName: Miss Piggy
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>ConnectedLineName:
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>ConnectedLineNum:
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>AccountCode: Pork
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>Priority: 1
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>Exten: 31337
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>Context: inbound
</span></code></pre></div> <p>This is syntantically equivalent to the following ASCII string:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>Event: Newchannel\r\nPrivilege: call,all\r\nChannel: PJSIP/misspiggy-00000001\r\nUniqueid: 1368479157.3\r\nChannelState: 3\r\nChannelStateDesc: Up\r\nCallerIDNum: 657-5309\r\nCallerIDName: Miss Piggy\r\nConnectedLineName:\r\nConnectedLineNum:\r\nAccountCode: Pork\r\nPriority:\r\nExten: 31337\r\nContext: inbound\r\n\r\n
</span></code></pre></div> <p>Actions are specified in a similar manner. Note that depending on the message, some keys can be repeated.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>Action: Originate
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>ActionId: SDY4-12837-123878782
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>Channel: PJSIP/kermit-00000002
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>Context: outbound
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>Exten: s
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>Priority: 1
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>CallerID: &quot;Kermit the Frog&quot; &lt;123-4567&gt;
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>Account: FrogLegs
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>Variable: MY_VAR=frogs
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>Variable: HIDE_FROM_CHEF=true
</span></code></pre></div> <p>In addition, no ordering is implied on message specific keys. Hence, the following two messages are semantically the same.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>Action: Originate
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>ActionId: SDY4-12837-123878782
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>Channel: PJSIP/kermit-00000002
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>Context: outbound
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>Exten: s
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>Priority: 1
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>CallerID: &quot;Kermit the Frog&quot; &lt;123-4567&gt;
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>Account: FrogLegs
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>Variable: MY_VAR=frogs
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>Variable: HIDE_FROM_CHEF=true50%ActionId: SDY4-12837-123878782
</span></code></pre></div> <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>Action: Originate
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>ActionId: SDY4-12837-123878782
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>Variable: HIDE_FROM_CHEF=true
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>Variable: MY_VAR=frogs
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>Channel: PJSIP/kermit-00000002
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>Account: FrogLegs
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>Context: outbound
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>Exten: s
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>CallerID: &quot;Kermit the Frog&quot; &lt;123-4567&gt;
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>Priority: 1
</span></code></pre></div> <p>This is also true for events, although by convention, the <code>Event</code> key is the first key in the event. If an action or event contains duplicate keys, such as <code>Variable</code>, the order in which Asterisk processes said keys is the order in which they occur within the action or event.</p> <p>Keys are case insensitive. Hence, the following keys are equivalent:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>Action: Originate
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>ACTION: Originate
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>action: Originate
</span></code></pre></div> <p>The case sensitivity for values is left up to the context in which they are interpreted.</p> <h4 id=common-fields>Common Fields<a class=headerlink href=#common-fields title="Permanent link">&para;</a></h4> <h5 id=actions>Actions<a class=headerlink href=#actions title="Permanent link">&para;</a></h5> <h6 id=general-fields>General Fields<a class=headerlink href=#general-fields title="Permanent link">&para;</a></h6> <p>This section lists fields that apply generally to all actions.</p> <dl> <dt>Action</dt> <dd>Specifies the action to execute within Asterisk. Each value corresponds to a unique action to execute within Asterisk. The value of the <strong>Action</strong> field determines the allowed fields within the rest of the message. By convention, the first field in any action is the <strong>Action</strong> field.</dd> <dt>ActionId</dt> <dd>Is a universal unique identifier that can optionally be provided with an action. If provided in an action, events that are related to that action will contain the same <strong>ActionId</strong> value, allowing a client to associate actions with events that were caused by that action. It is recommended that clients always provide an <strong>ActionId</strong> for each action they submit.</dd> </dl> <p>It is up to the client to ensure that the <strong>ActionId</strong> provided with an <strong>Action</strong> is unique.</p> <h6 id=channels>Channels<a class=headerlink href=#channels title="Permanent link">&para;</a></h6> <p>This section lists fields that apply generally to all actions that interact upon an Asterisk channel. Note that an Action that interacts with a channel *must* supply the *Channel* field.</p> <p>Upgrading In the past, AMI clients would have to contend with channel rename events. As Asterisk will now no longer change the name of a channel during its lifetime, this is no longer necessary.</p> <dl> <dt>Channel</dt> <dd>The Asterisk channel name. A channel name is provided by AMI to clients during a <strong>Newchannel</strong> event. A channel name can be viewed as the handle to a channel.</dd> <dt>Uniqueid</dt> <dd>A universal unique identifier for the channel. In systems with multiple Asterisk instances, this field can be used to construct a globally unique identifier for a channel, as a channel name may occur multiple times across Asterisk instances.</dd> </dl> <h5 id=events>Events<a class=headerlink href=#events title="Permanent link">&para;</a></h5> <h6 id=general-fields_1>General Fields<a class=headerlink href=#general-fields_1 title="Permanent link">&para;</a></h6> <p>This section lists fields that apply generally to all events.</p> <dl> <dt>Event</dt> <dd>The unique name of the event being raised. The value of the <strong>Event</strong> field determines the rest of the contents of the message. By convention, the <strong>Event</strong> field is the first field in an AMI message.</dd> <dt>ActionId</dt> <dd>If present, the Action's corresponding ActionId that caused this event to be created. If an Action contained an <strong>ActionId</strong>, any event relating the success or failure of that action MUST contain an <strong>ActionId</strong> field with the same value.</dd> <dt>Privilege</dt> <dd>The class authorizations associated with this particular event. The class authorizations for a particular event are in a comma-delineated list. For more information, see class authorizations.</dd> </dl> <p>Event responses to an Action only occur if the Action was executed, which means the user had the appropriate class authorization. Therefore they will not have a Privilege field.</p> <h6 id=channels_1>Channels<a class=headerlink href=#channels_1 title="Permanent link">&para;</a></h6> <p>This section lists fields that apply generally to all events that occur due to interactions upon an Asterisk channel.</p> <p>Events that relate multiple channels will prefix these fields with an event specific role specifier. For example, a <strong>DialBegin</strong> or a <strong>DialEnd</strong> event will prefix the outbound channel's fields with <strong>Dest</strong>. So, the <strong>Channel</strong> field is the <strong>DestChannel</strong> field; the <strong>Uniqueid</strong> field is the <strong>DestUniqueid</strong> field, etc.</p> <dl> <dt>Channel</dt> <dd>The current Asterisk channel name. This corresponds to the Channel field in actions.</dd> <dt>Uniqueid</dt> <dd>A universal unique identifier for the channel. This corresponds to the Uniqueid field in actions.</dd> <dt>ChannelState</dt> <dd>The current state of the channel, represented as an integer value. The valid values are: | Value | State | Description | | --- | --- | --- | | 0 | Down | Channel is down and available. | | 1 | Rsrvd | Channel is down, but reserved. | | 2 | OffHook | Channel is off hook. | | 3 | Dialing | The channel is in the midst of a dialing operation. | | 4 | Ring | The channel is ringing. | | 5 | Ringing | The remote endpoint is ringing. Note that for many channel technologies, this is the same as Ring. | | 6 | Up | A communication path is established between the endpoint and Asterisk. | | 7 | Busy | A busy indication has occurred on the channel. | | 8 | Dialing Offhook | Digits (or equivalent) have been dialed while offhook. | | 9 | Pre-ring | The channel technology has detected an incoming call and is waiting for a ringing indication. | | 10 | Unknown | The channel is an unknown state. |</dd> <dt>Depending on the underlying channel technology, not all states will be used. Channels typically begin in either the Down or Up states.</dt> <dt>ChannelStateDesc</dt> <dd>The text description of the channel state. This will be one of the State descriptions in the table in ChannelState.</dd> <dt>CallerIDNum</dt> <dd>The current caller ID number. If the caller ID number is not known, the string "<unknown>" is returned instead.</dd> <dt>CallerIDName</dt> <dd>The current caller ID name. If the caller ID name is not known, the string "<unknown>" is returned instead.</dd> <dt>ConnectedLineNum</dt> <dd>The current connected line number. If the connected line number is not known, the string "<unknown>" is returned instead.</dd> <dt>ConnectedLineName</dt> <dd>The current connected line name. If the connected line name is not known, the string "<unknown>" is returned instead.</dd> <dt>AccountCode</dt> <dd>The channel's accountcode.</dd> <dt>Context</dt> <dd>The current context in the dialplan that the channel is executing in.</dd> <dt>Exten</dt> <dd>The current extension in the dialplan that the channel is executing in.</dd> <dt>Priority</dt> <dd>The current priority of the current context, extension in the dialplan that the channel is executing in.</dd> <dt>ChanVariable</dt> <dd>Channel variables specific to a channel can be conveyed in each AMI event related to that channel. When this occurs, each variable is referenced in a <strong>ChanVariable</strong> field. The value of a <strong>ChanVariable</strong> field will always be of the form <code>key=value</code>, where <code>key</code> is the name of the channel variable and <code>value</code> is its value.</dd> </dl> <h6 id=bridges>Bridges<a class=headerlink href=#bridges title="Permanent link">&para;</a></h6> <dl> <dt>BridgeUniqueid</dt> <dd>A unique identifier for the bridge, which provides a handle to actions that manipulate bridges.</dd> <dt>BridgeType</dt> <dd> <p>The type of the bridge. Bridge types determine how a participant in a bridge can behave. For example, a 'base' bridge is a bridge that has few inherent properties or features associated with it, while a 'parking' bridge is one used for a parking application. Specific modules within Asterisk will determine the type of bridge that is created.</p> </dd> <dd> <p>Note that this is not the same as how media within a bridge is mixed. How media is mixed between participants in a bridge is determined by the <strong>BridgeTechnology</strong>.</p> </dd> <dt>BridgeTechnology</dt> <dd>How the media can be mixed within a bridge. Specific modules in Asterisk provide different bridge technologies that can be used by Asterisk to alter how media passes between the participants. For a given bridge, the <strong>BridgeTechnology</strong>* can also change as the number and type of participants change. The most common bridge technologies are:</dd> <dd><code>holding_bridge</code> – normal participants joining the bridge may receive audio, but audio sent from a normal participant is dropped. Special participants, known as announcers, may broadcast their audio to all normal participants.</dd> <dd><code>native_dahdi</code> – a native bridge between DAHDI channels. Media is passed directly between all participants.</dd> <dd><code>native_rtp</code> – a native bridge between channels that use RTP for media. Media is passed directly between all participants.</dd> <dd><code>simple_bridge</code> – a two-party bridge between any two channels. Media is passed through the Asterisk core between the two participants.</dd> <dd><code>softmix</code> – a multi-party bridge between one or more participants. All media from all participants is mixed together and sent to all participants.</dd> <dt>BridgeCreator</dt> <dd>Some bridges are created as the result of a particular application or action. If so, the bridge will specify who created it. If the bridge was not created as a result of any particular application or action, the field will have the value <code>&lt;unknown&gt;</code>.</dd> <dt>BridgeName</dt> <dd>Some bridges are created with a names as a result of their application. If so, the bridge will specify the name given to it. If the bridge was created without a name, the field will have the value <code>&lt;unknown&gt;</code>.</dd> <dt>BridgeNumChannels</dt> <dd>The number of channels currently in the bridge.</dd> <dt>Action Responses</dt> <dd>When an Action is submitted to AMI, the success or failure of the action is communicated in subsequent events.</dd> <dt>Response</dt> <dd>Contains whether or not the action succeeded or failed. Valid values are "Success" or "Error". Events that are in response to an action MUST include this field.</dd> </dl> <h5 id=eventlist>EventList<a class=headerlink href=#eventlist title="Permanent link">&para;</a></h5> <p>Some actions will cause a chain of events to be created. Events that are a response to an action that causes such a sequence will contain the EventList field with a value of "start". When all generated events have been sent, a final event will be sent containing the EventList field with the value "complete".</p> <p>If, for some reason, an error occurs and the events cannot be sent, an event will be sent with an EventList field that contains the value "cancelled".</p> <p>Note that the events that mark the completion or cancellation of an event list are not technically action responses, and have their own specific event types.</p> <h5 id=message>Message<a class=headerlink href=#message title="Permanent link">&para;</a></h5> <p>An optional text message that provides additional contextual information regarding the success or failure of the action.</p> <h3 id=actions_1>Actions<a class=headerlink href=#actions_1 title="Permanent link">&para;</a></h3> <p>The supported actions for the latest version of Asterisk are listed here: <a href=/Latest_API/API_Documentation/AMI_Actions/ >AMI Actions</a></p> <p>While new AMI Actions may be added over the lifetime of an Asterisk major version, existing AMI Actions may only be deprecated and removed in later Asterisk major versions.</p> <p>Optional fields may be added to an existing AMI action with altering the AMI version number, but required fields will <strong>not</strong> be added or removed.</p> <h3 id=events_1>Events<a class=headerlink href=#events_1 title="Permanent link">&para;</a></h3> <p>The supported events for Asterisk 12 are listed here: <a href=/Latest_API/API_Documentation/AMI_Events/ >AMI Events</a></p> <p>While new AMI Events may be added over the lifetime of an Asterisk major version, existing AMI Events may only be deprecated or removed in later Asterisk major versions.</p> <p>Fields may be added to an existing AMI event without altering the AMI version number, but existing fields will <strong>not</strong> be removed.</p> <h2 id=channel-interactionlifetime>Channel Interaction/Lifetime<a class=headerlink href=#channel-interactionlifetime title="Permanent link">&para;</a></h2> <p>While channels are independent of AMI, they have a large implication on the events sent out over AMI. Many of the events in AMI correspond to changes in channel state. While AMI is an asynchronous protocol, there is some ordering with respect to the events that are relayed for a particular channel. This section provides the basic event relationships that are guaranteed through AMI.</p> <h4 id=basic-channel-lifetime>Basic Channel Lifetime<a class=headerlink href=#basic-channel-lifetime title="Permanent link">&para;</a></h4> <p>All channels begin with a <strong>Newchannel</strong> event. A <strong>Newchannel</strong> will always contain the following fields:</p> <ul> <li>The current Channel name that acts as a handle to the channel for that channel's lifetime for a single Asterisk system.</li> <li>The Uniqueid for the channel, that allows systems to have a globally unique identifier for the channel.</li> </ul> <p>Changes in the state of the channel, i.e., the ChannelState field, are conveyed via <strong>Newstate</strong> events.</p> <p>Notification of a Channel being disposed of occurs via a <strong>Hangup</strong> event. A <strong>Hangup</strong> signals the termination of the channel associated with the Uniqueid. After the <strong>Hangup</strong> event, no further events will be raised in relation to the channel with that Uniqueid, and the communication between the endpoint and Asterisk via that channel is terminated.</p> <p>The examples in this specification do not show all of the fields in every event. For a full listing of all of the fields, see the documentation for the specific event in <a href=/Latest_API/API_Documentation/AMI_Events/ >AMI Events</a>.</p> <p>Example:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>Event: Newchannel
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>Privilege: dialplan,all
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>Uniqueid: asterisk-1368479157.1
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>ChannelState: 0
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>ChannelStateDesc: Down
</span></code></pre></div> <ul> <li>Kermit the Frog's SIP channel is created. The is the first event for <code>PJSIP/kermit-00000001</code> and indicates a path of communication being opened up between Asterisk and Kermit's SIP device.</li> </ul> <div class="language-text highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>Event: Newstate
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>Privilege: dialplan,all
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>Uniqueid: asterisk-1368479157.1
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>ChannelState: 6
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>ChannelStateDesc: Up
</span></code></pre></div> <ul> <li>Kermit the Frog's PJSIP channel's state changes from Down to Up</li> </ul> <div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>Event: Hangup
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>Privilege: dialplan,all
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>Uniqueid: asterisk-1368479157.1
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>ChannelState: 6
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>ChannelStateDesc: Up
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>Cause: 16
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>Cause-txt: Normal Clearing
</span></code></pre></div> <ul> <li>Kermit the Frog's PJSIP channel is hung up. At this point, no further events for <code>PJSIP/kermit-00000001</code> will be sent.</li> </ul> <h4 id=channel-variables>Channel Variables<a class=headerlink href=#channel-variables title="Permanent link">&para;</a></h4> <p>For each channel variable that is changed, a <strong>VarSet</strong> event is sent to the client. The <strong>VarSet</strong> event contains the new value of the appropriate channel variable. Note that channel variables can also be conveyed in ChanVariable fields.</p> <h4 id=dtmf>DTMF<a class=headerlink href=#dtmf title="Permanent link">&para;</a></h4> <p>DTMF is indicated via a <strong>DTMFBegin</strong>/<strong>DTMFEnd</strong> events. A <strong>DTMFEnd</strong> event MUST convey the duration of the DTMF tone in milliseconds.</p> <div class="admonition warning"> <p class=admonition-title>Behavior Change</p> <p>The combination of <strong>DTMFBegin</strong>/<strong>DTMFEnd</strong> events replaces the removed <strong>DTMF</strong> event.</p> </div> <h4 id=dialplan-execution>Dialplan Execution<a class=headerlink href=#dialplan-execution title="Permanent link">&para;</a></h4> <p>As a channel executes operations in the dialplan, those operations are conveyed via a <strong>NewExten</strong> event. Each transition to a new combination of context, extension, and priority will trigger a <strong>NewExten</strong> event.</p> <p>Example:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>Event: Newexten
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>Privilege: dialplan,all
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>Uniqueid: asterisk-1368479157.1
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>Context: default
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>Extension: h
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>Priority: 1
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>Application: NoOp
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>AppData: Ah Snap
</span></code></pre></div> <ul> <li>Kermit the Frog's PJSIP channel has been hung up, and he's been tossed rudely into the <em>h</em> extension. This event informs the clients that Kermit's channel is in context <em>default</em>, extension <em>h</em>, priority <em>1</em>, and is about to execute the <em>NoOp</em> application with application data <em>"Ah Snap"</em>.</li> </ul> <p>Note that even though Kermit has been hungup, we will not receive the <strong>Hangup</strong> event until Kermit's PJSIP channel is done executing dialplan.</p> <h4 id=dialing-and-origination>Dialing and Origination<a class=headerlink href=#dialing-and-origination title="Permanent link">&para;</a></h4> <p>Dial operations always result in two events: a <strong>DialBegin</strong> event that signals the beginning of the dial to a particular destination, and a <strong>DialEnd</strong> event that signals the end of the dialing. In parallel dialing situations, <strong>DialBegin</strong>/<strong>DialEnd</strong> events MUST be sent for each channel dialed. For each <strong>DialBegin</strong> event sent, there MUST be a corresponding <strong>DialEnd</strong> event.</p> <p>In dialing situations with a caller and a called party, the <strong>DialBegin</strong> and <strong>DialEnd</strong> events convey information about both channels. The calling channel uses the standard channel field names, while the called party's field names are prefixed with "Dest". In dialing situations where there is no caller, such as when Asterisk originates an outbound call via a call file, only the called channel is represented in the events. The channel field names are still prefixed with "Dest" in this case; the standard channel field names are <strong>not</strong> present in the event in this case.</p> <p>A <strong>DialEnd</strong> occurs whenever Asterisk knows the final state of the channel that it was attempting to establish. The status is communicated in the DialStatus field.</p> <p>Behavior Change The <strong>DialBegin</strong>/<strong>DialEnd</strong> events replace the <strong>Dial</strong> event. Note that the <strong>Dial</strong> event signaling the end of dialing would not normally be sent until after bridging was complete; this operation will now occur when the dial operation has determined the status of a particular called channel.</p> <p>Simple Successful Dial:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>Event: Newchannel
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>Channel: PJSIP/animal-00000002
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>Uniqueid: asterisk-1368479160.5
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>...
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>Event: DialBegin
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>Uniqueid: asterisk-1368479155.1
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>DestChannel: PJSIP/animal-00000002
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>DestUniqueid: asterisk-1368479160.5
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>...
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>Event: DialEnd
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a>Uniqueid: asterisk-1368479155.1
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a>DestChannel: PJSIP/animal-00000002
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a>DestUniqueid: asterisk-1368479160.5
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a>DialStatus: ANSWER
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a>... 
</span></code></pre></div> <p>In this example, Kermit decides to dial Animal. A new channel between Asterisk and Animal's SIP device is created and conveyed via a <strong>Newchannel</strong> event, and then a dial operation is begun. Note that in the <strong>DialBegin</strong> event, Kermit's SIP device is the caller as he initiated the dial operation, while Animal's SIP device is the destination. As such, the fields referring to Animal's PJSIP channel are prefixed with "Dest".</p> <p>When Animal eats his handset (causing the device to think he merely took it off the hook), the SIP device answers and the dial operation completes. This indicated by a <strong>DialEnd</strong> event. At this point, the channel is ready for something - it can execute in the dialplan, or be immediately bridged with the calling channel.</p> <p>Simple Failed Dial:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>Event: Newchannel
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>Channel: PJSIP/animal-00000003
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>Uniqueid: asterisk-1368479199.1
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>...
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>Event: DialBegin
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>Uniqueid: asterisk-1368479150.1
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>DestChannel: PJSIP/animal-00000003
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>DestUniqueid: asterisk-1368479199.1
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a>...
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a>Event: DialEnd
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a>Uniqueid: asterisk-1368479150.1
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a>DestChannel: PJSIP/animal-00000003
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a>DestUniqueid: asterisk-1368479199.1
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a>DialStatus: TIMEDOUT
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a>...
</span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18 href=#__codelineno-11-18></a>Event: Hangup
</span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19 href=#__codelineno-11-19></a>Channel: PJSIP/animal-00000003
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20 href=#__codelineno-11-20></a>Uniqueid: asterisk-1368479199.1
</span></code></pre></div> <p>In this example, Kermit decides to dial Animal again. Unfortunately, Animal ate his handset, so Asterisk's attempts to reach him inevitably time out. When it does, a <strong>DialEnd</strong> event indicates the failure condition in the DialStatus field.</p> <p>Parallel Dial:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>Event: Newchannel
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>Channel: PJSIP/animal-00000003
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>Uniqueid: asterisk-1368479150.3
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>...
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>Event: Newchannel
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>Channel: PJSIP/drteeth-00000004
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>Uniqueid: asterisk-1368479150.4
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>...
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>Event: DialBegin
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>DestChannel: PJSIP/animal-00000003
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>DestUniqueid: asterisk-1368479150.3
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>...
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a>Event: DialBegin
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a>DestChannel: PJSIP/drteeth-00000004
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a>DestUniqueid: asterisk-1368479150.4
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a>...
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a>Event: DialEnd
</span><span id=__span-12-22><a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-12-23><a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-12-24><a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a>DestChannel: PJSIP/drteeth-00000004
</span><span id=__span-12-25><a id=__codelineno-12-25 name=__codelineno-12-25 href=#__codelineno-12-25></a>DestUniqueid: asterisk-1368479150.4
</span><span id=__span-12-26><a id=__codelineno-12-26 name=__codelineno-12-26 href=#__codelineno-12-26></a>DialStatus: ANSWER
</span><span id=__span-12-27><a id=__codelineno-12-27 name=__codelineno-12-27 href=#__codelineno-12-27></a>...
</span><span id=__span-12-28><a id=__codelineno-12-28 name=__codelineno-12-28 href=#__codelineno-12-28></a>Event: DialEnd
</span><span id=__span-12-29><a id=__codelineno-12-29 name=__codelineno-12-29 href=#__codelineno-12-29></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-12-30><a id=__codelineno-12-30 name=__codelineno-12-30 href=#__codelineno-12-30></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-12-31><a id=__codelineno-12-31 name=__codelineno-12-31 href=#__codelineno-12-31></a>DestChannel: PJSIP/animal-00000003
</span><span id=__span-12-32><a id=__codelineno-12-32 name=__codelineno-12-32 href=#__codelineno-12-32></a>DestUniqueid: asterisk-1368479150.3
</span><span id=__span-12-33><a id=__codelineno-12-33 name=__codelineno-12-33 href=#__codelineno-12-33></a>DialStatus: CANCEL
</span><span id=__span-12-34><a id=__codelineno-12-34 name=__codelineno-12-34 href=#__codelineno-12-34></a>…
</span><span id=__span-12-35><a id=__codelineno-12-35 name=__codelineno-12-35 href=#__codelineno-12-35></a>Event: Hangup
</span><span id=__span-12-36><a id=__codelineno-12-36 name=__codelineno-12-36 href=#__codelineno-12-36></a>Channel: PJSIP/animal-00000003
</span><span id=__span-12-37><a id=__codelineno-12-37 name=__codelineno-12-37 href=#__codelineno-12-37></a>Uniqueid: asterisk-1368479150.3
</span></code></pre></div> <p>In this example, Kermit decides to dial Animal and Dr. Teeth. Dr. Teeth immediately answers, and so Asterisk cancels the dial to Animal. Asterisk can now do something with Dr. Teeth's channel (such as bridge him with his dentist) - however, Animal's channel is destroyed, as his device never answered.</p> <h3 id=bridging>Bridging<a class=headerlink href=#bridging title="Permanent link">&para;</a></h3> <p>A bridge contains 0 or more channels. When a channel is in a bridge, it has the potential to communicate with other channels within the bridge. Before channels enter a bridge, a <strong>BridgeCreate</strong> event is sent, indicating that a bridge has been created. When a bridge is destroyed, a <strong>BridgeDestroy</strong> event is sent. All channels within a bridge MUST leave a bridge prior to the <strong>BridgeDestroy</strong> event being sent.</p> <p>When a channel enters a bridge, a <strong>BridgeEnter</strong> event is raised. When a channel is put into a bridge, it is implied that the channel can pass media between other channels in the bridge. This is not guaranteed, as other properties on the channel or bridge may restrict media flow. For example, bridges with a BridgeTechnology type of <em>holding**_bridge</em> implicitly restrict the media flow between channels. Likewise, media may be restricted in multi-party conference bridges based on user role permissions, such as when a conference leader mutes all participants in a conference. The <strong>BridgeEnter</strong> event does indicate, however, that a potential relationship between channels in a bridge exists.</p> <p>When a channel leaves a bridge, a corresponding <strong>BridgeLeave</strong> event is raised. A <strong>BridgeLeave</strong> event MUST mean that the channel that left the bridge can no longer pass media to other channels still in the bridge. This does not necessarily mean that the channel is being hung up; rather, that it is no longer in a communication path with some other set of channels.</p> <p>In all cases, if a channel has a <strong>BridgeEnter</strong> event, it MUST have a corresponding <strong>BridgeLeave</strong> event. If a channel is hung up and it is in a bridge, a <strong>BridgeLeave</strong> event MUST precede the <strong>Hangup</strong> event.</p> <p>If a transfer operation is performed, a transfer event of some type MUST be raised for the channels involved in the transfer when the success or failure of the transfer is determined. Similarly, if a channel enters a parking lot, a <strong>ParkedCall</strong> event MUST be raised for the channel prior to it entering the bridge that represents the parking lot.</p> <p>If a property of a bridge is changed, such as the BridgeTechnology changing from a simple two-party bridge to a multi-party bridge, then the <strong>BridgeUpdate</strong> event is sent with the updated parameters.</p> <h4 id=two-party-bridging>Two Party Bridging<a class=headerlink href=#two-party-bridging title="Permanent link">&para;</a></h4> <p>Parties are bridged by virtue of them entering a bridge, as indicated by a <strong>BridgeEnter</strong>. When parties are no longer talking, a <strong>BridgeLeave</strong> event is sent for each channel that leaves the bridge.</p> <p>Example - Two Party Bridge:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>Event: BridgeCreate
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>BridgeType: basic
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>BridgeTechnology: simple_bridge
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>BridgeUniqueid: 1234
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>BridgeNumChannels: 0
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>...
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>Event: BridgeEnter
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>BridgeType: basic
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>BridgeTechnology: simple_bridge
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>BridgeUniqueid: 1234
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>BridgeNumChannels: 1
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>Uniqueid: asterisk-1368479150.0
</span></code></pre></div> <p>Kermit the Frog's PJSIP channel enters into Bridge 1234. As a result, the bridge is first created (denoted by the <strong>BridgeCreate</strong> event), and then Kermit's channel enters the bridge (the <strong>BridgeEnter</strong> event)</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>Event: BridgeEnter
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>BridgeType: basic
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>BridgeTechnology: simple_bridge
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>BridgeUniqueid: 1234
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>BridgeNumChannels: 2
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>Channel: PJSIP/gonzo-00000002
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>Uniqueid: asterisk-1368479150.1
</span></code></pre></div> <p>Gonzo the Great enters the bridge and talks with Kermit. Note that the bridge Gonzo entered is Bridge 1234; by virtue of this being the same bridge Kermit entered, we know that the two can talk.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>Event: BridgeLeave
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>BridgeType: basic
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>BridgeTechnology: simple_bridge
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>BridgeUniqueid: 1234
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>BridgeNumChannels: 1
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>...
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>Event: Hangup
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>Uniqueid: asterisk-1368479150.0
</span></code></pre></div> <p>Kermit realizes that he has to leave to avoid Miss Piggy, so he hangs up on Gonzo. We are first alerted that Kermit has left the bridge; quickly thereafter, we receive the <strong>Hangup</strong> event indicating that Kermit's channel is dead.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>Event: BridgeLeave
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>BridgeType: basic
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>BridgeTechnology: simple_bridge
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>BridgeUniqueid: 1234
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>BridgeNumChannels: 0
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>Channel: PJSIP/gonzo-00000002
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>Uniqueid: asterisk-1368479150.1
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>...
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>Event: Hangup
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>Channel: PJSIP/gonzo-00000002
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a>Uniqueid: asterisk-1368479150.1
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>...
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>Event: BridgeDestroy
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a>BridgeType: basic
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a>BridgeTechnology: simple_bridge
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a>BridgeUniqueid: 1234
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a>BridgeNumChannels: 0
</span></code></pre></div> <p>Asterisk is configured to not let Gonzo continue on in the dialplan once his bridge is broken. As such, Gonzo is forcibly ejected from the bridge, and is hung up on after. Because no channels are left in the bridge, the bridge is destroyed.</p> <p>In this scenario, it was perfectly acceptable for either Kermit or Gonzo's channels to continue after the bridge was broken. Since this represents the most basic two-party call scenario, once one party decided to hang up, the other party was also hung up on.</p> <h4 id=transfers>Transfers<a class=headerlink href=#transfers title="Permanent link">&para;</a></h4> <p>Transfer information is conveyed with either a <strong>BlindTransfer</strong> or <strong>AttendedTransfer</strong> event, which indicates information about the transfer that took place. <strong>BridgeLeave</strong>/<strong>BridgeEnter</strong> events are used to indicate which channels are talking in which bridges at different stages during the transfer.</p> <p>Transfers do a LotDepending on the type of transfer and the actions taken, channels will move in and out of a lot of bridges. The purpose of the two transfer events is to convey to the AMI client the overall completed status of the transfer after the users have completed their actions. With Blind Transfers, this typically happens very quickly: Asterisk simply has to determine that the destination of the transfer is a valid extension in the dialplan.</p> <p>Attended transfers, on the other hand, can involve a lot more steps. Parties can consult, toggle back and forth between consultations, and merge bridges together. Channels can be transferred to a dialplan application directly, and not to another party! As such, Asterisk will send the <strong>AttendedTransfer</strong> event when it knows whether or not the Attended Transfer has completed successfully, and will attempt to convey as much information as possible about the final status of the transfer.</p> <p>For more information on these events, see BlindTransfer and AttendedTransfer.</p> <p>Example - Blind Transfer</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>Event: BridgeCreate
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>BridgeType: basic
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>BridgeTechnology: simple_bridge
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>BridgeUniqueid: 1234
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>...
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>Event: BridgeEnter
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>BridgeType: basic
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>BridgeTechnology: simple_bridge
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>BridgeUniqueid: 1234
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>Uniqueid: asterisk-1368479150.0
</span></code></pre></div> <p>Kermit the Frog's PJSIP channel enters into Bridge 1234</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>Event: BridgeEnter
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>BridgeType: basic
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>BridgeTechnology: simple_bridge
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>BridgeUniqueid: 1234
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>Channel: PJSIP/fozzie-00000002
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>Uniqueid: asterisk-1368479150.2
</span></code></pre></div> <p>Fozzie Bear's PJSIP channel enters into Bridge 1234. At this point, Fozzie and Kermit can talk to each other.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>Event: DTMFBegin
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>Channel: PJSIP/fozzie-00000002
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>Digit: #
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>Direction: Received
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>...
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>Event: DTMFEnd
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>Channel: PJSIP/fozzie-00000002
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>Digit: #
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a>DurationMS: 150
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a>Direction: Received
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a>...
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a>Event: DTMFBegin
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a>Channel: PJSIP/fozzie-00000002
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a>Digit: 1
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a>Direction: Received
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a>...
</span><span id=__span-19-20><a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a>Event: DTMFEnd
</span><span id=__span-19-21><a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a>Channel: PJSIP/fozzie-00000002
</span><span id=__span-19-22><a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-19-23><a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a>Digit: 1
</span><span id=__span-19-24><a id=__codelineno-19-24 name=__codelineno-19-24 href=#__codelineno-19-24></a>DurationMS: 150
</span><span id=__span-19-25><a id=__codelineno-19-25 name=__codelineno-19-25 href=#__codelineno-19-25></a>Direction: Received
</span><span id=__span-19-26><a id=__codelineno-19-26 name=__codelineno-19-26 href=#__codelineno-19-26></a>...
</span><span id=__span-19-27><a id=__codelineno-19-27 name=__codelineno-19-27 href=#__codelineno-19-27></a>Event: Hold
</span><span id=__span-19-28><a id=__codelineno-19-28 name=__codelineno-19-28 href=#__codelineno-19-28></a>Channel: PJSIP/fozzie-00000002
</span><span id=__span-19-29><a id=__codelineno-19-29 name=__codelineno-19-29 href=#__codelineno-19-29></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-19-30><a id=__codelineno-19-30 name=__codelineno-19-30 href=#__codelineno-19-30></a>...
</span><span id=__span-19-31><a id=__codelineno-19-31 name=__codelineno-19-31 href=#__codelineno-19-31></a>Event: MusicOnHoldStart
</span><span id=__span-19-32><a id=__codelineno-19-32 name=__codelineno-19-32 href=#__codelineno-19-32></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-19-33><a id=__codelineno-19-33 name=__codelineno-19-33 href=#__codelineno-19-33></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-19-34><a id=__codelineno-19-34 name=__codelineno-19-34 href=#__codelineno-19-34></a>...
</span><span id=__span-19-35><a id=__codelineno-19-35 name=__codelineno-19-35 href=#__codelineno-19-35></a>Event: Unhold
</span><span id=__span-19-36><a id=__codelineno-19-36 name=__codelineno-19-36 href=#__codelineno-19-36></a>Channel: PJSIP/fozzie-00000002
</span><span id=__span-19-37><a id=__codelineno-19-37 name=__codelineno-19-37 href=#__codelineno-19-37></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-19-38><a id=__codelineno-19-38 name=__codelineno-19-38 href=#__codelineno-19-38></a>...
</span><span id=__span-19-39><a id=__codelineno-19-39 name=__codelineno-19-39 href=#__codelineno-19-39></a>Event: BlindTransfer
</span><span id=__span-19-40><a id=__codelineno-19-40 name=__codelineno-19-40 href=#__codelineno-19-40></a>Result: Success
</span><span id=__span-19-41><a id=__codelineno-19-41 name=__codelineno-19-41 href=#__codelineno-19-41></a>TransfererChannel: PJSIP/fozzie-00000002
</span><span id=__span-19-42><a id=__codelineno-19-42 name=__codelineno-19-42 href=#__codelineno-19-42></a>TransfererUniqueid: asterisk-1368479150.2
</span><span id=__span-19-43><a id=__codelineno-19-43 name=__codelineno-19-43 href=#__codelineno-19-43></a>BridgeUniqueid: 1234
</span><span id=__span-19-44><a id=__codelineno-19-44 name=__codelineno-19-44 href=#__codelineno-19-44></a>BridgeType: basic
</span><span id=__span-19-45><a id=__codelineno-19-45 name=__codelineno-19-45 href=#__codelineno-19-45></a>BridgeTechnology: simple_bridge
</span><span id=__span-19-46><a id=__codelineno-19-46 name=__codelineno-19-46 href=#__codelineno-19-46></a>Context: default
</span><span id=__span-19-47><a id=__codelineno-19-47 name=__codelineno-19-47 href=#__codelineno-19-47></a>Extension: 2000
</span></code></pre></div> <p>Fozzie decides he's tired of telling Kermit jokes and blind transfers him off to Miss Piggy via the dialplan extension <code>2000</code>. The following actions take place:</p> <ul> <li>Fozzie hits #1 on his phone to initiate a blind transfer (shown by the two pairs of <strong>DTMFBegin</strong>/<strong>DTMFEnd</strong> events).</li> <li>A <strong>Hold</strong> event is processed for Fozzie, indicating that he's attempting to put the participants of the bridge he is in with on hold.</li> <li>A <strong>StartMusicOnHold</strong> event occurs for Kermit, as he is now entertained with music while Fozzie dials Miss Piggy's extension.</li> <li>Fozzie would then dial Miss Piggy's extension. Note that we didn't bother showing the DTMF events for this.<br> When Asterisk determines that 2000 is a valid extension, a <strong>BlindTransfer</strong> event is raised indicating that a successful transfer is occurring.</li> </ul> <p>When a transfer occurs, we often think of a transferrer channel transferring some target channel. This is actually not the case: a transferrer transfers the bridge they are currently in to some other location. This is why the <strong>BlindTransfer</strong> (and <strong>AttendedTransfer</strong>) events show the bridge that is being transferred, and not a destination channel. It is possible to transfer multi-party bridges to new extensions in this manner.</p> <p>At this point, the order of the events that affect Fozzie versus Kermit are not defined. Fozzie and Kermit are about to be no longer bridged together, and their respective events may arrive in any order.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>Event: MusicOnHoldStart
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>...
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>Event: BridgeLeave
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>BridgeUniqueid: 1234
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>BridgeType: basic
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>BridgeTechnology: simple_bridge
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>Uniqueid: asterisk-1368479150.0
</span></code></pre></div> <p>Kermit leaves the bridge with Fozzie. Asterisk politely turns off the hold music to him before it ejects him from the bridge.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>Event: BridgeLeave
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>BridgeUniqueid: 1234
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>BridgeType: basic
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>BridgeTechnology: simple_bridge
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>Channel: PJSIP/fozzie-00000002
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>...
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>Event: BridgeDestroy
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>BridgeUniqueid: 1234
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a>BridgeType: basic
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>BridgeTechnology: simple_bridge
</span></code></pre></div> <p>Because Fozzie isn't talking to anyone anymore, he leaves the bridge as well. At this point Asterisk could hang up Fozzie's channel, or, if configured, he could continue on in the dialplan (say, perhaps, to talk to his rubber chicken).</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>Event: NewExten
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>Channel: PJSIP/kermit-00000001
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>Context: default
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>Exten: 2000
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>Priority: 1
</span></code></pre></div> <p>Kermit enters into dialplan extension 2000. Presumably, he'll begin calling Miss Piggy, although given her violent temperament, he'd probably be better off hanging up immediately.</p> <h3 id=local-channel-optimization>Local Channel Optimization<a class=headerlink href=#local-channel-optimization title="Permanent link">&para;</a></h3> <p>Local channels have an option wherein they can be optimized away if both halves of a Local channel are in a bridge. This option is set on Local channel creation, and is communicated back to the AMI clients in the <strong>LocalBridge</strong> event in the LocalOptimization field. When a Local channel optimization occurs, a <strong>LocalOptimization</strong><strong>Begin</strong> event is sent that indicates the channels involved in the optimization. When the optimization has completed and the parties can now converse without the Local channel, a <strong>LocalOptimziationEnd</strong> event is sent.</p> <p>Two actions can take place when a Local channel optimizes between two bridges.</p> <ol type=1> <li>If, after the Local channel optimization, either bridge contains only a single channel, then a single channel in one of the bridges is moved to the bridge that has the other channel. This is conveyed by a sequence of <strong>BridgeLeave</strong>/<strong>BridgeEnter</strong> events.</li> <li>If, after the Local channel optimization, the bridges contain multiple parties, the bridges will be merged together. A <strong>BridgeMerge</strong> event is sent when this occurs. Channels will then be merged from one bridge to the other, denoted by a sequence of <strong>BridgeLeave</strong>/<strong>BridgeEnter</strong> events.</li> </ol> <p>It is not defined which channel is moved first or which bridge wins during a bridge merge. That is an implementation detail left up to Asterisk. Suffice to say, if a Local channel is optimized away, Asterisk attempts to rebridge the channels left over as fast as possible to prevent any loss in audio.</p> <p>Example - Optimizing Local Channel between two PJSIP Channels</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>Event: Newchannel
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>Channel: PJSIP/gonzo-00000001
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>Uniqueid: asterisk-1368479150.0
</span></code></pre></div> <p>Gonzo decides to call Kermit the Frog, and a channel is created between Asterisk and Gonzo's SIP device.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>Event: Newchannel
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>Channel: Local/kermit@default-00000001;1
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>Uniqueid: asterisk-1368479150.1
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>...
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>Event: Newchannel
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>Channel: Local/kermit@default-00000001;2
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>...
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a>Event: DialBegin
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a>Channel: PJSIP/gonzo-00000001
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a>DestChannel: Local/kermit@default-00000001;1
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a>DestUniqueid: asterisk-1368479150.1
</span></code></pre></div> <p>Instead of dialing Kermit directly, Gonzo instead dials a Local channel. Both halves of the Local channel are created, and Gonzo Dials the first half of the Local channel.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>Event: DialEnd
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>Channel: PJSIP/gonzo-00000001
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>DestChannel: Local/kermit@default-00000001;1
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>DestUniqueid: asterisk-1368479150.1
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>DialStatus: ANSWER
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a>...
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a>Event: BridgeCreate
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a>BridgeUniqueid: 1234
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a>BridgeType: basic
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a>BridgeTechnology: simple_bridge
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a>BridgeNumChannels: 0
</span><span id=__span-25-13><a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a>...
</span><span id=__span-25-14><a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a>Event: BridgeEnter
</span><span id=__span-25-15><a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a>BridgeUniqueid: 1234
</span><span id=__span-25-16><a id=__codelineno-25-16 name=__codelineno-25-16 href=#__codelineno-25-16></a>BridgeType: basic
</span><span id=__span-25-17><a id=__codelineno-25-17 name=__codelineno-25-17 href=#__codelineno-25-17></a>BridgeTechnology: simple_bridge
</span><span id=__span-25-18><a id=__codelineno-25-18 name=__codelineno-25-18 href=#__codelineno-25-18></a>BridgeNumChannels: 1
</span><span id=__span-25-19><a id=__codelineno-25-19 name=__codelineno-25-19 href=#__codelineno-25-19></a>Channel: PJSIP/gonzo-00000001
</span><span id=__span-25-20><a id=__codelineno-25-20 name=__codelineno-25-20 href=#__codelineno-25-20></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-25-21><a id=__codelineno-25-21 name=__codelineno-25-21 href=#__codelineno-25-21></a>...
</span><span id=__span-25-22><a id=__codelineno-25-22 name=__codelineno-25-22 href=#__codelineno-25-22></a>Event: BridgeEnter
</span><span id=__span-25-23><a id=__codelineno-25-23 name=__codelineno-25-23 href=#__codelineno-25-23></a>BridgeUniqueid: 1234
</span><span id=__span-25-24><a id=__codelineno-25-24 name=__codelineno-25-24 href=#__codelineno-25-24></a>BridgeType: basic
</span><span id=__span-25-25><a id=__codelineno-25-25 name=__codelineno-25-25 href=#__codelineno-25-25></a>BridgeTechnology: simple_bridge
</span><span id=__span-25-26><a id=__codelineno-25-26 name=__codelineno-25-26 href=#__codelineno-25-26></a>BridgeNumChannels: 2
</span><span id=__span-25-27><a id=__codelineno-25-27 name=__codelineno-25-27 href=#__codelineno-25-27></a>Channel: Local/kermit@default-00000001;1
</span><span id=__span-25-28><a id=__codelineno-25-28 name=__codelineno-25-28 href=#__codelineno-25-28></a>Uniqueid: asterisk-1368479150.1
</span><span id=__span-25-29><a id=__codelineno-25-29 name=__codelineno-25-29 href=#__codelineno-25-29></a>...
</span><span id=__span-25-30><a id=__codelineno-25-30 name=__codelineno-25-30 href=#__codelineno-25-30></a>Event: LocalBridge
</span><span id=__span-25-31><a id=__codelineno-25-31 name=__codelineno-25-31 href=#__codelineno-25-31></a>LocalOneChannel: Local/kermit@default-00000001;2
</span><span id=__span-25-32><a id=__codelineno-25-32 name=__codelineno-25-32 href=#__codelineno-25-32></a>LocalOneUniqueid: asterisk-1368479150.1
</span><span id=__span-25-33><a id=__codelineno-25-33 name=__codelineno-25-33 href=#__codelineno-25-33></a>LocalTwoChannel: Local/kermit@default-00000001;2
</span><span id=__span-25-34><a id=__codelineno-25-34 name=__codelineno-25-34 href=#__codelineno-25-34></a>LocalTwoUniqueid: asterisk-1368479150.2
</span><span id=__span-25-35><a id=__codelineno-25-35 name=__codelineno-25-35 href=#__codelineno-25-35></a>LocalOptimization: Yes
</span></code></pre></div> <p>The dial operation succeeds and Gonzo is bridged with one half of the Local channel that will eventually connect him (it?) to Kermit. The Local channel itself has also decided to go ahead and bridge the two local halves together, since we have one half of the full chain of channels established.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>Event: DialBegin
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>Channel: Local/kermit@default-00000001;2
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>DestChannel: PJSIP/kermit-00000002
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>DestUniqueid: asterisk-1368479150.3
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>...
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>Event: DialEnd
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>Channel: Local/kermit@default-00000001;2
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a>DestChannel: PJSIP/kermit-00000002
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>DestUniqueid: asterisk-1368479150.3
</span><span id=__span-26-12><a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a>DialStatus: ANSWER
</span><span id=__span-26-13><a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a>...
</span><span id=__span-26-14><a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a>Event: BridgeCreate
</span><span id=__span-26-15><a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a>BridgeUniqueid: 5678
</span><span id=__span-26-16><a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a>BridgeType: basic
</span><span id=__span-26-17><a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a>BridgeTechnology: simple_bridge
</span><span id=__span-26-18><a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a>BridgeNumChannels: 0
</span><span id=__span-26-19><a id=__codelineno-26-19 name=__codelineno-26-19 href=#__codelineno-26-19></a>...
</span><span id=__span-26-20><a id=__codelineno-26-20 name=__codelineno-26-20 href=#__codelineno-26-20></a>Event: BridgeEnter
</span><span id=__span-26-21><a id=__codelineno-26-21 name=__codelineno-26-21 href=#__codelineno-26-21></a>BridgeUniqueid: 5678
</span><span id=__span-26-22><a id=__codelineno-26-22 name=__codelineno-26-22 href=#__codelineno-26-22></a>BridgeType: basic
</span><span id=__span-26-23><a id=__codelineno-26-23 name=__codelineno-26-23 href=#__codelineno-26-23></a>BridgeTechnology: simple_bridge
</span><span id=__span-26-24><a id=__codelineno-26-24 name=__codelineno-26-24 href=#__codelineno-26-24></a>BridgeNumChannels: 1
</span><span id=__span-26-25><a id=__codelineno-26-25 name=__codelineno-26-25 href=#__codelineno-26-25></a>Channel: Local/kermit@default-00000001;2
</span><span id=__span-26-26><a id=__codelineno-26-26 name=__codelineno-26-26 href=#__codelineno-26-26></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-26-27><a id=__codelineno-26-27 name=__codelineno-26-27 href=#__codelineno-26-27></a>...
</span><span id=__span-26-28><a id=__codelineno-26-28 name=__codelineno-26-28 href=#__codelineno-26-28></a>Event: BridgeEnter
</span><span id=__span-26-29><a id=__codelineno-26-29 name=__codelineno-26-29 href=#__codelineno-26-29></a>BridgeUniqueid: 5678
</span><span id=__span-26-30><a id=__codelineno-26-30 name=__codelineno-26-30 href=#__codelineno-26-30></a>BridgeType: basic
</span><span id=__span-26-31><a id=__codelineno-26-31 name=__codelineno-26-31 href=#__codelineno-26-31></a>BridgeTechnology: simple_bridge
</span><span id=__span-26-32><a id=__codelineno-26-32 name=__codelineno-26-32 href=#__codelineno-26-32></a>BridgeNumChannels: 2
</span><span id=__span-26-33><a id=__codelineno-26-33 name=__codelineno-26-33 href=#__codelineno-26-33></a>Channel: PJSIP/kermit-00000002
</span><span id=__span-26-34><a id=__codelineno-26-34 name=__codelineno-26-34 href=#__codelineno-26-34></a>Uniqueid: asterisk-1368479150.3
</span></code></pre></div> <p>Gonzo, via the Local channel halves, dials Kermit and he answers. Kermit is now bridged with the second half of the Local channel, <code>Local/kermit@default-00000001;2</code>, while Gonzo is bridged with the first half of the Local channel, <code>Local/kermit@default-00000001;1.</code></p> <p>Note that even when Local channels are destined to be optimized away, both the Local channel halves and the other channels involved in the operation first enter their respective bridges.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>Event: LocalOptimizationBegin
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>LocalOneChannel: Local/kermit@default-00000001;1
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>LocalOneUniqueid: asterisk-1368479150.1
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a>LocalTwoChannel: Local/kermit@default-00000001;2
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>LocalTwoUniqueid: asterisk-1368479150.2
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>SourceChannel: PJSIP/gonzo-00000001
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>SourceUniqueid: asterisk-1368479150.0
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>...
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>Event: BridgeLeave
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>BridgeUniqueid: 1234
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>BridgeType: basic
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a>BridgeTechnology: simple_bridge
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a>BridgeNumChannels: 1
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>Channel: PJSIP/gonzo-00000001
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a>Uniqueid: asterisk-1368479150.0
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a>...
</span><span id=__span-27-17><a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a>Event: BridgeEnter 
</span><span id=__span-27-18><a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a>BridgeUniqueid: 5678
</span><span id=__span-27-19><a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a>BridgeType: basic 
</span><span id=__span-27-20><a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a>BridgeTechnology: simple_bridge 
</span><span id=__span-27-21><a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a>BridgeNumChannels: 3 
</span><span id=__span-27-22><a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a>Channel: PJSIP/gonzo-00000001
</span><span id=__span-27-23><a id=__codelineno-27-23 name=__codelineno-27-23 href=#__codelineno-27-23></a>Uniqueid: asterisk-1368479150.0
</span></code></pre></div> <p>Asterisk determines that it can optimize away the Local channel. It notifies the AMI client that this is about to begin, which Local channels are involved, and what channel it is going to start moving (the SourceChannel). It starts first by moving Gonzo into Kermit's bridge. From their perspective, nothing has happened - they just now happen to be in the same bridge, instead of having a Local channel pass frames for them.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>Event: BridgeLeave
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>BridgeUniqueid: 5678
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>BridgeType: basic 
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>BridgeTechnology: simple_bridge 
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>BridgeNumChannels: 2 
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>Channel: Local/kermit@default-00000001;2
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>...
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a>Event: LocalOptimizationEnd 
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a>LocalOneChannel: Local/kermit@default-00000001;1
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a>LocalOneUniqueid: asterisk-1368479150.1
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>LocalTwoChannel: Local/dial_bar@default-00000001;2 
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a>LocalTwoUniqueid: asterisk-1368479150.2
</span><span id=__span-28-14><a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a>...
</span><span id=__span-28-15><a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a>Event: BridgeLeave
</span><span id=__span-28-16><a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a>BridgeUniqueid: 1234
</span><span id=__span-28-17><a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a>BridgeType: basic 
</span><span id=__span-28-18><a id=__codelineno-28-18 name=__codelineno-28-18 href=#__codelineno-28-18></a>BridgeTechnology: simple_bridge 
</span><span id=__span-28-19><a id=__codelineno-28-19 name=__codelineno-28-19 href=#__codelineno-28-19></a>BridgeNumChannels: 0
</span><span id=__span-28-20><a id=__codelineno-28-20 name=__codelineno-28-20 href=#__codelineno-28-20></a>Channel: Local/kermit@default-00000001;1
</span><span id=__span-28-21><a id=__codelineno-28-21 name=__codelineno-28-21 href=#__codelineno-28-21></a>Uniqueid: asterisk-1368479150.1
</span><span id=__span-28-22><a id=__codelineno-28-22 name=__codelineno-28-22 href=#__codelineno-28-22></a>...
</span><span id=__span-28-23><a id=__codelineno-28-23 name=__codelineno-28-23 href=#__codelineno-28-23></a>Event: Hangup
</span><span id=__span-28-24><a id=__codelineno-28-24 name=__codelineno-28-24 href=#__codelineno-28-24></a>Channel: Local/kermit@default-00000001;1
</span><span id=__span-28-25><a id=__codelineno-28-25 name=__codelineno-28-25 href=#__codelineno-28-25></a>Uniqueid: asterisk-1368479150.1
</span><span id=__span-28-26><a id=__codelineno-28-26 name=__codelineno-28-26 href=#__codelineno-28-26></a>...
</span><span id=__span-28-27><a id=__codelineno-28-27 name=__codelineno-28-27 href=#__codelineno-28-27></a>Event: Hangup
</span><span id=__span-28-28><a id=__codelineno-28-28 name=__codelineno-28-28 href=#__codelineno-28-28></a>Channel: Local/kermit@default-00000001;2
</span><span id=__span-28-29><a id=__codelineno-28-29 name=__codelineno-28-29 href=#__codelineno-28-29></a>Uniqueid: asterisk-1368479150.2
</span><span id=__span-28-30><a id=__codelineno-28-30 name=__codelineno-28-30 href=#__codelineno-28-30></a>...
</span><span id=__span-28-31><a id=__codelineno-28-31 name=__codelineno-28-31 href=#__codelineno-28-31></a>Event: BridgeDestroy
</span><span id=__span-28-32><a id=__codelineno-28-32 name=__codelineno-28-32 href=#__codelineno-28-32></a>BridgeUniqueid: 1234
</span><span id=__span-28-33><a id=__codelineno-28-33 name=__codelineno-28-33 href=#__codelineno-28-33></a>BridgeType: basic 
</span><span id=__span-28-34><a id=__codelineno-28-34 name=__codelineno-28-34 href=#__codelineno-28-34></a>BridgeTechnology: simple_bridge 
</span><span id=__span-28-35><a id=__codelineno-28-35 name=__codelineno-28-35 href=#__codelineno-28-35></a>BridgeNumChannels: 0
</span></code></pre></div> <p>The Local channel optimization completes by removing the Local channel halves from their respective bridges and hanging them up. Because Bridge 1234 (which used to have Gonzo in it) no longer has anyone in it, it is destroyed.</p> <h3 id=masquerades>Masquerades<a class=headerlink href=#masquerades title="Permanent link">&para;</a></h3> <p>Masquerades are goneIn the past, masquerades occurred rather frequently - most often in any scenario where a transfer occurred or where a <code>pbx_thread</code> needed to be associated with a channel. This has now changed. Masquerades now rarely occur, and are never communicated to AMI clients. From the perspective of AMI clients, nothing changes - you still use your handle to a channel to communicate with it, regardless of the presence (or lack thereof) of a masquerade operation.</p> <p>This section only exists to explicitly call out the fact that Masquerades are gone.</p> <h2 id=transports>Transports<a class=headerlink href=#transports title="Permanent link">&para;</a></h2> <p>AMI supports the following transport mechanisms:</p> <ul> <li>TCP/TLS</li> <li>HTTP/HTTPS</li> </ul> <p>When clients connect over HTTP/HTTPS, AMI events are queued up for retrieval. Events queued up for a client are automatically retrieved and sent in the response to any POST operation. The <strong>WaitEvent</strong> action can be used to wait for and retrieve AMI events.</p> <h2 id=security-considerations>Security Considerations<a class=headerlink href=#security-considerations title="Permanent link">&para;</a></h2> <p>AMI supports security at the transport level via TLS using OpenSSL.</p> <p>For specific security considerations and best practice, please see the <a href=https://github.com/asterisk/asterisk/blob/master/README-SERIOUSLY.bestpractices.md>README-SERIOUSLY.bestpractices.txt</a> included with Asterisk.</p> <h3 id=class-authorizations>Class Authorizations<a class=headerlink href=#class-authorizations title="Permanent link">&para;</a></h3> <p>Do not rely on class authorizations for security. While they provide a means to restrict a client's access to sets of functionality, there are often ways of achieving similar functionality through multiple mechanisms. Do <strong>NOT</strong> assume that because a class authorization has not been granted to a client, that they can't find a way around it. In general, view class authorizations as a coarse grained way of providing sets of filters.</p> <p>Events and actions are automatically classified with particular class authorizations. Clients can be configured to support some set of class authorizations, filtering the actions that they can perform and events that they receive. The supported class authorizations are listed below.</p> <table> <thead> <tr> <th>Class Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>system</td> <td>The item is associated with something that reports on the status of the system or manipulates the system in some fashion</td> </tr> <tr> <td>call</td> <td>The item is associated with calls, i.e., state changes in a call, etc.</td> </tr> <tr> <td>log</td> <td>The item is associated with the logging subsystem</td> </tr> <tr> <td>verbose</td> <td>The item is associated with verbose messages</td> </tr> <tr> <td>command</td> <td>The item is associated with execution of CLI commands through AMI</td> </tr> <tr> <td>agent</td> <td>The item is associated with Queue Agent manipulation</td> </tr> <tr> <td>user</td> <td>The item is associated with user defined events</td> </tr> <tr> <td>config</td> <td>The item is associated with manipulating the configuration of Asterisk</td> </tr> <tr> <td>dtmf</td> <td>The item is associated with DTMF manipulation</td> </tr> <tr> <td>reporting</td> <td>The item is associated with querying information about the state of the Asterisk system</td> </tr> <tr> <td>cdr</td> <td>The item is associated with CDR manipulation</td> </tr> <tr> <td>dialplan</td> <td>The item is associated with dialplan execution</td> </tr> <tr> <td>originate</td> <td>The item is associated with originating a channel</td> </tr> <tr> <td>agi</td> <td>The item is associated with AGI execution</td> </tr> <tr> <td>cc</td> <td>The item is associated with call completion</td> </tr> <tr> <td>aoc</td> <td>The item is associated with Advice of Charge</td> </tr> <tr> <td>test</td> <td>The item is associated with some test action</td> </tr> <tr> <td>message</td> <td>The item is associated with out of call messaging</td> </tr> <tr> <td>security</td> <td>The item is associated with a security event in Asterisk</td> </tr> <tr> <td>all</td> <td>The item has all class authorizations associated with it</td> </tr> <tr> <td>none</td> <td>The item has no class authorization associated with it</td> </tr> </tbody> </table> <h3 id=access-control-lists>Access Control Lists<a class=headerlink href=#access-control-lists title="Permanent link">&para;</a></h3> <p>Access Control Lists can be used to filter connections based on address. If an attempt to connect from an unauthorized address is detected, the connection attempt will be rejected.</p> <h3 id=authorization>Authorization<a class=headerlink href=#authorization title="Permanent link">&para;</a></h3> <p>Authorization can be provided via the <strong>Login</strong> action. If a client fails to provide a valid username/password, the connection attempt and any subsequent actions will be rejected. Events will not be sent until the client provides authorized credentials.</p> <p>The actions that are excluded from successful login are:</p> <ul> <li><strong>Login</strong></li> <li><strong>Logoff</strong></li> <li><strong>Challenge</strong></li> </ul> <h2 id=ami-configuration>AMI Configuration<a class=headerlink href=#ami-configuration title="Permanent link">&para;</a></h2> <p>AMI supports the following configuration options. Note that additional configurations MAY be specified; however, these configuration options are valid for Asterisk 12.</p> <h3 id=general-settings>General Settings<a class=headerlink href=#general-settings title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Option</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td>enabled</td> <td>Boolean</td> <td>Enable AMI</td> <td>no</td> </tr> <tr> <td>webenabled</td> <td>Boolean</td> <td>Enable AMI over HTTP/HTTPS</td> <td>no</td> </tr> <tr> <td>port</td> <td>Integer</td> <td>The port AMI's TCP server will bind to</td> <td>5038</td> </tr> <tr> <td>bindaddr</td> <td>IP Address</td> <td>The address AMI's TCP server will bind to</td> <td>0.0.0.0</td> </tr> <tr> <td>tlsenable</td> <td>Boolean</td> <td>Enable TLS over TCP</td> <td>no</td> </tr> <tr> <td>tlsbindaddr</td> <td>IP Address</td> <td>The address AMI's TCP/TLS server will bind to</td> <td>0.0.0.0:5039</td> </tr> <tr> <td>tlscertfile</td> <td>String</td> <td>The full path to the TLS certificate to use</td> <td>/tmp/asterisk.pem</td> </tr> <tr> <td>tlsprivatekey</td> <td>String</td> <td>The full path to the private key. If no path is specified, <em>tlscertfile</em> will be used for the private key.</td> <td>/tmp/private.pem</td> </tr> <tr> <td>tlscipher</td> <td>String</td> <td>The string specifying which SSL ciphers to use. Valid SSL ciphers can be found at <a href=http://www.openssl.org/docs/apps/ciphers.html#CIPHER_STRINGS>http://www.openssl.org/docs/apps/ciphers.html#CIPHER_STRINGS</a></td> <td></td> </tr> <tr> <td>allowmultiplelogin</td> <td>Boolean</td> <td>Allow multiple logins for the same user. If set to no, multiple logins from the same user will be rejected.</td> <td>Yes</td> </tr> <tr> <td>timestampevents</td> <td>Boolean</td> <td>Add a Unix epoch *Timestamp* field to all AMI events</td> <td>No</td> </tr> <tr> <td>authlimit</td> <td>Integer</td> <td>The number of unauthenticated clients that can be connected at any time</td> <td></td> </tr> </tbody> </table> <h3 id=client-settings>Client Settings<a class=headerlink href=#client-settings title="Permanent link">&para;</a></h3> <p>Note that the name of the client settings context is the username for the client connection.</p> <table> <thead> <tr> <th>Option</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td>secret</td> <td>String</td> <td>The password that must be provided by the client via the <strong>Login</strong> action.</td> <td></td> </tr> <tr> <td>deny</td> <td>ACL</td> <td>An address/mask to deny in an ACL. This option may be present multiple times.</td> <td></td> </tr> <tr> <td>permit</td> <td>ACL</td> <td>An address/mask to allow in an ACL. This option may be present multiple times.</td> <td></td> </tr> <tr> <td>acl</td> <td>String</td> <td>A Named ACL to apply to the client.</td> <td></td> </tr> <tr> <td>setvar</td> <td>String</td> <td>A channel variable key/value pair (using the nomenclature VARIABLE=value) that will be set on all channels originated from this client</td> <td></td> </tr> <tr> <td>eventfilter</td> <td>RegEx</td> <td>This option may be present multiple times. This options allows clients to whitelist or blacklist events. A filter is assumed to be a whitelist unless preceeded by a '!'.Evaluation of the filters is as follows:</td> <td></td> </tr> <tr> <td>* If no filters are configured all events are reported as normal.</td> <td></td> <td></td> <td></td> </tr> <tr> <td>* If there are white filters only: implied black all filter processed first, then white filters.</td> <td></td> <td></td> <td></td> </tr> <tr> <td>* If there are black filters only: implied white all filter processed first, then black filters.</td> <td></td> <td></td> <td></td> </tr> <tr> <td>* If there are both white and black filters: implied black all filter processed first, then white filters, and lastly black filters.</td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td>read</td> <td>String</td> <td>A comma delineated list of the allowed class authorizations applied to events</td> <td>all</td> </tr> <tr> <td>write</td> <td>String</td> <td>A comma delineated list of the allowed class authorizations applied to actions</td> <td>all</td> </tr> </tbody> </table> <p>The item has all class authorizations associated with it</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Content is licensed under a Creative Commons Attribution-ShareAlike 3.0 United States License. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://www.asterisk.org/ target=_blank rel=noopener title=www.asterisk.org class=md-social__link> <?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg version=1.1 id=svg2 width=48 height=48 viewbox="0 0 48 48" sodipodi:docname=favicon.svg inkscape:version="1.2.2 (b0a8486541, 2022-12-01)" xmlns:inkscape=http://www.inkscape.org/namespaces/inkscape xmlns:sodipodi=http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd xmlns:xlink=http://www.w3.org/1999/xlink xmlns=http://www.w3.org/2000/svg xmlns:svg=http://www.w3.org/2000/svg> <defs id=defs6 /> <sodipodi:namedview id=namedview4 pagecolor=#ffffff bordercolor=#666666 borderopacity=1.0 inkscape:showpageshadow=2 inkscape:pageopacity=0.0 inkscape:pagecheckerboard=0 inkscape:deskcolor=#d1d1d1 showgrid=false inkscape:zoom=17.291667 inkscape:cx=24 inkscape:cy=24.028916 inkscape:current-layer=g8 /> <g inkscape:groupmode=layer inkscape:label=Image id=g8> <image width=48 height=48 preserveaspectratio=none id=image10 xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAACzxJREFU
aIHtmXuQXNVxxn997jz3qRdasay0s5IMiQCDIx4JqaSwjQFDoGIXAhUVMAajgF0kAWShB48xDy2W
eLmoOLbsFBHGBahcgYTEBAJBhYNLxsjEWKEko6BdJCEJSWi1O7O7M3Pv+fLHvmZ3Z1YrYZJ/+Kqm
am6fPt393XNud5974RN8go8E+ziNK4s70HtSbTpWrCl5pdMxFy9FYdx8EBdRKBcrxeWLUUR/nyXz
M2q25S2LPxofHwuB/LLZzVEQnGXyp2HuJEythh0PTAXSoADMA33AIcFeEzvMsRVpc6RwU3377g/3
LW2qmfXAvvz/CQEJy9/ZcorC2DeccZ5gOtAAuEGVItIHODuIKCDiGNMMZgmSgzoeowuxXfgHEwrf
Kvj4tM3pztc/myX8WAgom0kVC35uyexWwxYLUkAXsB/pVx694nz0evchvdO87v3esfN33tySnl4T
P7XkdbEzLjXIAI2ASTwdmH8NXCxU6fGG9t0Hf6cE+pZnMnLc4I2vmDRDst/g+HeTXhXujdrVOz4w
0GTtHbxpfkO6rnSezK4GLhTEgP/00i9jxqySi+5uvHfXO78TAodXzr4gwD2CbJ4ZuyTucS58Mb2/
6QNbt7l0rHYF1n1zy9QgHVwH3A+GxFbQf5jZjND7r0+5/71Dx0xAS5tq8/H09Rh3I/I4Hi+GbvW0
b797+FiDrobcisxXZTxi0IB4E6MGaV3t6s6HzQZW9qgIdK84Ybpz8TsRfwG8JvRwXaLzZzbmAeu5
Y87JLuScclkEexra3/uXo/Gnm1vS+bS7A9wtCDD2AnUu4OKaezp+MWkCyuLyxZnHQc0PQJ8DvisV
1ta3791fmWjb9YHpO6OEppdr7+u85GgIAOz/m9bj0zX2b8CngSIQk/RKV390yeyHd/W5iSYruyBx
YNnxv0+xtQnSDwj+1MTq2kTnymrBAzgUCtKjfxO6qorjHunc46RvAR5IAM7MTm9IB+cO+Jog+Fx/
9zn1ybjrxe5CnOvEbTXJzvuHtowWEVRh0D/OnihUUt1QzUYZ0gc7n0O8WSaaGsjO3ZJdkKhKoKfQ
c7ZzwfxS6JYIFoM9uCNZ89hQqd9xTSaVn5/5cX757DM1ZivKa1ywJj+OVO+yE1ouOrH1sdzKzOkT
EbB1lDB+VCZyzrTwZLoaKhLov735pJhzWYNGjKtMPFV7sONvT8m+XQTQBoKZzdyGcYVc7Kd9y1u/
0Z1tnjFExAXjV8DKVkVLm2pzt2cu9LH4C8iuQjykZSfVT0SCyDZStorCTuwP4/XjCPSuap4d+sT3
Q29veLgS089rvLvN1jGc2/t+3bJQ6GuDpmZ4Z9+xYuKJ3hWtX9ySXZCotAJeFJTF5VZmTu9NpB/C
6yfAAgCZzuwN+i+vuiWBwHTYjD3DBMQs52O1owgouyAhxa8HjnfYCcIapdhyK8vxe5c21Uqx68Ca
y6Y6g/Nl9nim0LsWXGxsACYr9hdbrzH0E+A6sNrhMaxOZkt6P9U6sxoBn4qKEsMFDCNeME0ZRaC3
P3+ysK9JvI9pkTP9Q11i9tZynVQqNVPGn1TwYcB0jL8Cnq4wem2E/b2weWLcnRZwYmT8YTUCFJ1g
dL2Jex8ME3glS8w7uws4HlgIdIRR9JRlN46a1PjpzveiEtcKfiDK7shoNFaQNVTRLZnpX510XX3c
nq8Wv1nkGEijQ/De1DNMYGGh7SJDFw8oU2/GUw3tu/5nnKHLiRrXdGyqSxRvCUIuQnoJiKo5PgK2
Ofkrw3j0lXR75zOW7Rj38I8QCBJmTB26FnQHLuiJwUBLnCvqVrChvduH9L2hfqOiwez7vcCmHdnM
JTNLXANaKm9zMOJHCNpjfCDPBjNbXdP+3r7JMI28NRo0DV07o9Or2OsAevr8GQYnlbF7sXZ1555K
hsaiLdvRvzbesU5m92F0HUnfoCTPU3XJ4oq61TsmFfzgvLPKDj54z7a+eKrHCcwFdjYwbZiA16Sb
rt5VLSd8s9T6PcT9DJzCJoQgiXFtvph4Nr9q7hnSZBtKXVr2PxS8OY3tuRjZ5jRFOwUGlt5QGMHm
CU0J61naPD0ej1/gPXfLbO7kghiADTzQX5D8Wb23tz7auyq2Lh2fvWdswhhCftnsZmFfGAnAPowT
vWZZvMvl0nUSbcNj0JUm6qnmfOfNLenciszlLpl4IjJbf7TBj0GjZLd7hT/NF3f8dW5lW1NFrcDd
SFkGEnorlYw2A7ggSRIbeTgM6+2PBVWzyvRE4jhzuhM4H6tcOSul1wlSLmCnAN/Cc9rYkUPLMxlv
dnm5zBsPDSYRnFkYM1RX5iiZwldt8tLp1F7QP4HGkvSIvZJWx/CLKrBaH1q0GPQ2aOxWEfCqt+Ko
ratFBHHTZQatw1ThhcbVncP1whVCGWXdpMGU0AdVGyvLvl30LlgPtr3MfUHS0/LRFXXJtrsqz1Sy
8d6dG3xY+rLDHgTKM1CXl62rb9/9YfmM7nktbWBXM5R9xN5I/p5yHZcMgsiwkU5xQHnC9rb+nh2/
9Wjt4OU2c1xRl4zfUP/tna9admPosdTYOc5ImqGGNe9vS/fE7jKL/gzTSwwcVJ6vz8WeH/sGIwiC
OzFOHryMMJ48mHSjVikWxVWgyAFg3ojYLpNYX62QmSGp87H8qkyTC0s/qlmze1f5uPekbMwmlEZy
uD26vQC8sXdp05/XJVJft9D/2B7tGGmVlyyM52YcWILsqhGn2hqz4O/asu+OqtaxArHeBGGnwdll
7j7ftSpzGnT8VyUCQySgo73imBsJdkTfjVuVwdeGa8tl2kCQ+/WBSw27c+j2CQ47cVvqvnffGWvD
TWN7zqEtjO5nUgnpDi05YltQEX7g7dwoqIKsEnrebDvHZA8ijhsUlfAsr0l0Vmz0nGXxQpswjUpz
Mvtcbkbbl5Q9htO4B0wHyn+Sr3gmLkf/8nnzndOzDGQdA4USP+zrzj9R7a11DKCQSPwiWQx/A3y2
bGyKodvyxbatsOOto4k/puAlr/DKclnkNEEdGEAy1fd+WEi8jnEhgGHPOVdsn/nd/blqc4bTZ//y
OeeF5l7EynoTIWBLLIi+lLp357jW+uPAoW9mTo/H+WdgtozF9fd1jD8clWFUI5Vflfm+xHWMPzF1
4LmxNsXGiXr2o8GW7ILE3FJXEz7eYiX2Hqb/g6YH9vWSJegptC5zZnchfl6bLF48VHWPSKB31bzZ
XuF6ZOeOWokB7BPaIPFkfabzDftLjukFbtfyOVNjuLMxfR5nFyAWALsMvSzcKy4sbqQGfCH+jzI+
5cRXa9s7np0UAQk7vGLOHwSBPW2yeRX0/QARXpfX+vpU6YWJ7s6w3ZvmJ/saws8gfdnLzsdoYeBr
TXmCEJAD9gDPO2mXx9ZgPFnoid04/dHt3UckMITuFZnfc/CUGQtE9VRqKCfZLzH9Ssa7RHbQmfWZ
kYq8n2FmrZhOxWzhYFoc60+CHkPdhk0V1IzoyIM54LCz8Pya+3a9PmkCAIdubWuNJ3QLxtXAlGp6
HwH7kV6U7Dlc9N/ywRku4DOIUxk4Hc5icIUEz9QlOi6rlEonPA0p21zTU4ifFhirJLuwWvs8aQjh
+G0g1pfEM4UouXvGmm25oR7onZvmJ2fV0RAPCg3ybo6Hc4A/lnEm0uK61e+9fFQEhv0uIuib23q2
d9xg5v5IqNGgdrC6Vip03qCgga+QedA+sJ95Rc/UH9y5qfwt36T8Z8+N7c93zJi5tmPvMREoR25l
W5PwCyTmBsasSEwzsxpnCpArCfokuhzRPrDdMezdRH/YaQ/v6jtaX5PBR/rIJ7DNSxbGpjcfDDKH
Q6Mt5fmwJSK7MTqaj3uf4BP8P+J/ASVw7ffFYZkMAAAAAElFTkSuQmCC
"/> </g> </svg> </a> <a href=https://www.asterisk.org/blog/ target=_blank rel=noopener title=www.asterisk.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="m61.7 169.4 101.5 278C92.2 413 43.3 340.2 43.3 256c0-30.9 6.6-60.1 18.4-86.6m337.9 75.9c0-26.3-9.4-44.5-17.5-58.7-10.8-17.5-20.9-32.4-20.9-49.9 0-19.6 14.8-37.8 35.7-37.8.9 0 1.8.1 2.8.2-37.9-34.7-88.3-55.9-143.7-55.9-74.3 0-139.7 38.1-177.8 95.9 5 .2 9.7.3 13.7.3 22.2 0 56.7-2.7 56.7-2.7 11.5-.7 12.8 16.2 1.4 17.5 0 0-11.5 1.3-24.3 2l77.5 230.4L249.8 247l-33.1-90.8c-11.5-.7-22.3-2-22.3-2-11.5-.7-10.1-18.2 1.3-17.5 0 0 35.1 2.7 56 2.7 22.2 0 56.7-2.7 56.7-2.7 11.5-.7 12.8 16.2 1.4 17.5 0 0-11.5 1.3-24.3 2l76.9 228.7 21.2-70.9c9-29.4 16-50.5 16-68.7m-139.9 29.3-63.8 185.5c19.1 5.6 39.2 8.7 60.1 8.7 24.8 0 48.5-4.3 70.6-12.1-.6-.9-1.1-1.9-1.5-2.9zm183-120.7c.9 6.8 1.4 14 1.4 21.9 0 21.6-4 45.8-16.2 76.2l-65 187.9C426.2 403 468.7 334.5 468.7 256c0-37-9.4-71.8-26-102.1M8 256a248 248 0 1 1 496 0 248 248 0 1 1-496 0m484.6 0a236.6 236.6 0 1 0-473.2 0 236.6 236.6 0 1 0 473.2 0"/></svg> </a> <a href=https://twitter.com/asteriskdev target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg> </a> <a href=https://github.com/asterisk target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://community.asterisk.org target=_blank rel=noopener title=community.asterisk.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.prune", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../../assets/javascripts/bundle.92b07e13.min.js></script> </body> </html>