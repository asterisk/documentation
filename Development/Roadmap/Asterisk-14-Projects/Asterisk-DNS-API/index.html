<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://docs.asterisk.org/Development/Roadmap/Asterisk-14-Projects/Asterisk-DNS-API/ rel=canonical><link href=../Module-Loader-Ideas/ rel=prev><link href=DNS-NAPTRSRV-Test-Plan-for-PJSIP/ rel=next><link rel=icon href=../../../../favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.19"><title>Overview - Asterisk Documentation</title><link rel=stylesheet href=../../../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../material-override.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2ZKMCW9DZ9"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2ZKMCW9DZ9",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2ZKMCW9DZ9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#overview class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title="Asterisk Documentation" class="md-header__button md-logo" aria-label="Asterisk Documentation" data-md-component=logo> <img src=../../../../favicon.ico alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Asterisk Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Overview </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <table border=0 style="width: max-content;padding:0px;margin:0px"><tr><td> <a href=https://github.com/asterisk/asterisk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Asterisk </div> </a> </td> <td style=font-size:.65rem;line-height:1.2;vertical-align:middle;> <a href=/About-the-Project/Asterisk-Versions>Asterisk Versions</a><br> <a target=_blank href=https://github.com/asterisk/documentation/issues>Report Documentation Issues</a><br> <a target=_blank href=https://github.com/asterisk/documentation>Contribute to the Documentation</a> </td></tr> </table> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Asterisk Documentation" class="md-nav__button md-logo" aria-label="Asterisk Documentation" data-md-component=logo> <img src=../../../../favicon.ico alt=logo> </a> Asterisk Documentation </label> <div class=md-nav__source> <table border=0 style="width: max-content;padding:0px;margin:0px"><tr><td> <a href=https://github.com/asterisk/asterisk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Asterisk </div> </a> </td> <td style=font-size:.65rem;line-height:1.2;vertical-align:middle;> <a href=/About-the-Project/Asterisk-Versions>Asterisk Versions</a><br> <a target=_blank href=https://github.com/asterisk/documentation/issues>Report Documentation Issues</a><br> <a target=_blank href=https://github.com/asterisk/documentation>Contribute to the Documentation</a> </td></tr> </table> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../About-the-Project/ class=md-nav__link> <span class=md-ellipsis> About the Project </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk-Community/ class=md-nav__link> <span class=md-ellipsis> Asterisk Community </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Fundamentals/ class=md-nav__link> <span class=md-ellipsis> Fundamentals </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Getting-Started/Beginning-Asterisk/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Configuration/Core-Configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Deployment/ class=md-nav__link> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Operation/ class=md-nav__link> <span class=md-ellipsis> Operation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8 checked> <div class="md-nav__link md-nav__container"> <a href=../../../ class="md-nav__link "> <span class=md-ellipsis> Development </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=true> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Policies-and-Procedures/ class=md-nav__link> <span class=md-ellipsis> Policies and Procedures </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Debugging/ class=md-nav__link> <span class=md-ellipsis> Debugging </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Reference-Information/ class=md-nav__link> <span class=md-ellipsis> Reference Information </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_5 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> Roadmap </span> </a> <label class="md-nav__link " for=__nav_8_5 id=__nav_8_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_8_5_label aria-expanded=true> <label class=md-nav__title for=__nav_8_5> <span class="md-nav__icon md-icon"></span> Roadmap </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../AstriCon-2012-Presentations/ class=md-nav__link> <span class=md-ellipsis> AstriCon 2012 Presentations </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2010/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2010 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2011/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2011 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2012/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2012 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2013/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2013 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2014/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2014 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2015/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2015 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2016/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2016 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2017/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2017 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2022/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2022 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2024-December/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2024 December </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2024/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2024 </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2025-April/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2025 April </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon-2025-July/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2025 July </span> </a> </li> <li class=md-nav__item> <a href=../../AstriDevCon/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon </span> </a> </li> <li class=md-nav__item> <a href=../../Astricon-2021-Presentation-attachments/ class=md-nav__link> <span class=md-ellipsis> Astricon 2021 Presentation attachments </span> </a> </li> <li class=md-nav__item> <a href=../../FOSDEM-2011-Open-Source-Telephony-Devroom/ class=md-nav__link> <span class=md-ellipsis> FOSDEM 2011 Open Source Telephony Devroom </span> </a> </li> <li class=md-nav__item> <a href=../../OpenSIPit-2021/ class=md-nav__link> <span class=md-ellipsis> OpenSIPit 2021 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-10-Projects/ class=md-nav__link> <span class=md-ellipsis> Asterisk 10 Projects </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-11-Projects/ class=md-nav__link> <span class=md-ellipsis> Asterisk 11 Projects </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-12-Projects/ class=md-nav__link> <span class=md-ellipsis> Asterisk 12 Projects </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-13-Projects/ class=md-nav__link> <span class=md-ellipsis> Asterisk 13 Projects </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_5_24 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Asterisk 14 Projects </span> </a> <label class="md-nav__link " for=__nav_8_5_24 id=__nav_8_5_24_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_8_5_24_label aria-expanded=true> <label class=md-nav__title for=__nav_8_5_24> <span class="md-nav__icon md-icon"></span> Asterisk 14 Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ARI-Feature-Wish-list/ class=md-nav__link> <span class=md-ellipsis> ARI Feature Wish-list </span> </a> </li> <li class=md-nav__item> <a href=../Asterisk-14-Project-ARI-and-generic-Text-To-Speech/ class=md-nav__link> <span class=md-ellipsis> Asterisk 14 Project - ARI and generic Text To Speech </span> </a> </li> <li class=md-nav__item> <a href=../Asterisk-14-Project-Media-Playlists/ class=md-nav__link> <span class=md-ellipsis> Asterisk 14 Project - Media Playlists </span> </a> </li> <li class=md-nav__item> <a href=../Asterisk-14-Project-URI-Media-Playback/ class=md-nav__link> <span class=md-ellipsis> Asterisk 14 Project - URI Media Playback </span> </a> </li> <li class=md-nav__item> <a href=../Asterisk-Beacon-Module/ class=md-nav__link> <span class=md-ellipsis> Asterisk Beacon Module </span> </a> </li> <li class=md-nav__item> <a href=../Git-Migration/ class=md-nav__link> <span class=md-ellipsis> Git Migration </span> </a> </li> <li class=md-nav__item> <a href=../Module-Loader-Ideas/ class=md-nav__link> <span class=md-ellipsis> Module Loader Ideas </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8_5_24_9 checked> <div class="md-nav__link md-nav__container"> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Asterisk DNS API </span> </a> <label class="md-nav__link md-nav__link--active" for=__nav_8_5_24_9 id=__nav_8_5_24_9_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_8_5_24_9_label aria-expanded=true> <label class=md-nav__title for=__nav_8_5_24_9> <span class="md-nav__icon md-icon"></span> Asterisk DNS API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=DNS-NAPTRSRV-Test-Plan-for-PJSIP/ class=md-nav__link> <span class=md-ellipsis> DNS NAPTR/SRV Test Plan for PJSIP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../RTP-engine-replacement/ class=md-nav__link> <span class=md-ellipsis> RTP engine replacement </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-15-Projects/ class=md-nav__link> <span class=md-ellipsis> Asterisk 15 Projects </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-16-Projects/ class=md-nav__link> <span class=md-ellipsis> Asterisk 16 Projects </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-18-Projects/ class=md-nav__link> <span class=md-ellipsis> Asterisk 18 Projects </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Asterisk-19-Projects/ class=md-nav__link> <span class=md-ellipsis> Asterisk 19 Projects </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../AstriDevCon-2018/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2018 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../AstriDevCon-2019/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2019 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../AstriDevCon-2020/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2020 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../AstriDevCon-2021/ class=md-nav__link> <span class=md-ellipsis> AstriDevCon 2021 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Future-Potential-Project-Thoughts/ class=md-nav__link> <span class=md-ellipsis> Future Potential Project Thoughts </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Asterisk-Bug-Bounties/ class=md-nav__link> <span class=md-ellipsis> Asterisk Bug Bounties </span> </a> </li> <li class=md-nav__item> <a href=../../../Asterisk-C-API-Deprecations/ class=md-nav__link> <span class=md-ellipsis> Asterisk C API Deprecations </span> </a> </li> <li class=md-nav__item> <a href=../../../Asterisk-Module-Deprecations/ class=md-nav__link> <span class=md-ellipsis> Asterisk Module Deprecations </span> </a> </li> <li class=md-nav__item> <a href=../../../Asterisk-Open-Source-Maintainers/ class=md-nav__link> <span class=md-ellipsis> Asterisk Open Source Maintainers </span> </a> </li> <li class=md-nav__item> <a href=../../../Open-Features-and-Improvements/ class=md-nav__link> <span class=md-ellipsis> Open Features and Improvements </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Latest_API/ class=md-nav__link> <span class=md-ellipsis> Latest API </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_16_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 16 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_18_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 18 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_19_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 19 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_20_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 20 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_21_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 21 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_22_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 22 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Asterisk_23_Documentation/ class=md-nav__link> <span class=md-ellipsis> Asterisk 23 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Certified-Asterisk_18.9_Documentation/ class=md-nav__link> <span class=md-ellipsis> Certified Asterisk 18.9 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Certified-Asterisk_20.7_Documentation/ class=md-nav__link> <span class=md-ellipsis> Certified Asterisk 20.7 Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Test-Suite-Documentation/ class=md-nav__link> <span class=md-ellipsis> Test Suite Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../Historical-Documentation/ class=md-nav__link> <span class=md-ellipsis> Historical Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../../Contributing-to-the-Documentation/ class=md-nav__link> <span class=md-ellipsis> Contributing to the Documentation </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h1> <p>The Asterisk DNS API is designed as a facade over resolver implementations. It provides a consistent view and also additional features. These additional features include a construct for doing queries in parallel and gathering the results, parsing some DNS types, and applying sorting/weight logic to some DNS types.</p> <h1 id=threading>Threading<a class=headerlink href=#threading title="Permanent link">&para;</a></h1> <p>The API provides a guarantee that it is safe to initiate and cancel queries from any thread. It does NOT, however, provide a guarantee that the ordering of queries shall be preserved. In other words, if you execute multiple queries individually you will not necessarily receive callbacks in the order the queries were originally executed. This API only guarantees that an individual DNS result and records are safe to retrieve within the scope of the respective asynchronous callback.</p> <h1 id=dnsh>dns.h<a class=headerlink href=#dnsh title="Permanent link">&para;</a></h1> <p>The dns.h file is the public API into the DNS core. It provides mechanisms to perform individual DNS queries and access the results. All data structures are opaque and can not be accessed directly.</p> <h2 id=query>Query<a class=headerlink href=#query title="Permanent link">&para;</a></h2> <p>A query contains information about an in-process DNS query. It also contains information about the result of the query.</p> <h2 id=result>Result<a class=headerlink href=#result title="Permanent link">&para;</a></h2> <p>A result contains information about a completed DNS query. It also contains the resulting DNS records (if there are any).</p> <h2 id=record>Record<a class=headerlink href=#record title="Permanent link">&para;</a></h2> <p>A record is a DNS record.</p> <h2 id=code>Code<a class=headerlink href=#code title="Permanent link">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>/*! \brief Opaque structure for a DNS quer */
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>struct ast_dns_query;
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>/*!
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a> * \brief Get the name queried in a DNS query
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a> *
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a> * \param query The DNS query
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a> *
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a> * \return the name queried
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a> */
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>const char *ast_dns_query_get_name(const struct ast_dns_query *query);
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>/*!
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a> * \brief Get the record resource type of a DNS query
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a> *
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a> * \param query The DNS query
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a> *
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a> * \return the record resource type
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a> */
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>int ast_dns_query_get_rr_type(const struct ast_dns_query *query);
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>/*!
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a> * \brief Get the record resource class of a DNS query
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a> *
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a> * \param query The DNS query
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a> *
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a> * \return the record resource class
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a> */
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>int ast_dns_query_get_rr_class(const struct ast_dns_query *query);
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>/*!
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a> * \brief Get the error rcode of a DNS query
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a> *
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a> * \param query The DNS query
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a> *
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a> * \return the DNS rcode
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a> */
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>int ast_dns_query_get_rcode(const struct ast_dns_query *query);
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a>/*!
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a> * \brief Get the user specific data of a DNS query
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a> *
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a> * \param query The DNS query
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a> *
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a> * \return the user specific data
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a> */
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a>void *ast_dns_query_get_data(const struct ast_dns_query *query);
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a>/*! \brief Opaque structure for a DNS query resul */
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>struct ast_dns_result;
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a>/*!
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a> * \brief Get the result information for a DNS query
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a> *
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a> * \param query The DNS query
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a> *
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a> * \return the DNS result information
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a> */
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a>struct ast_dns_result *ast_dns_query_get_result(const struct ast_dns_query *query);
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a>/*!
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a> * \brief Get whether the domain exists or not
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a> *
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56 href=#__codelineno-0-56></a> * \param query The DNS result
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57 href=#__codelineno-0-57></a> *
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58 href=#__codelineno-0-58></a> * \return whether the domain exists or not
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59 href=#__codelineno-0-59></a> */
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60 href=#__codelineno-0-60></a>unsigned int ast_dns_result_get_nxdomain(const struct ast_dns_result *result);
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61 href=#__codelineno-0-61></a>/*!
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62 href=#__codelineno-0-62></a> * \brief Get whether the result is secure or not
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63 href=#__codelineno-0-63></a> *
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64 href=#__codelineno-0-64></a> * \param result The DNS result
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65 href=#__codelineno-0-65></a> *
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66 href=#__codelineno-0-66></a> * \return whether the result is secure or not
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67 href=#__codelineno-0-67></a> */
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68 href=#__codelineno-0-68></a>unsigned int ast_dns_result_get_secure(const struct ast_dns_result *result);
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69 href=#__codelineno-0-69></a>/*!
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70 href=#__codelineno-0-70></a> * \brief Get whether the result is bogus or not
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71 href=#__codelineno-0-71></a> *
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72 href=#__codelineno-0-72></a> * \param result The DNS result
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73 href=#__codelineno-0-73></a> *
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74 href=#__codelineno-0-74></a> * \return whether the result is bogus or not
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75 href=#__codelineno-0-75></a> */
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76 href=#__codelineno-0-76></a>unsigned int ast_dns_result_get_bogus(const struct ast_dns_result *result);
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77 href=#__codelineno-0-77></a>/*!
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78 href=#__codelineno-0-78></a> * \brief Get the canonical name of the result
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79 href=#__codelineno-0-79></a> *
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80 href=#__codelineno-0-80></a> * \param result The DNS result
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81 href=#__codelineno-0-81></a> *
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82 href=#__codelineno-0-82></a> * \return the canonical name
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83 href=#__codelineno-0-83></a> */
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84 href=#__codelineno-0-84></a>const char *ast_dns_result_get_canonical(const struct ast_dns_result *result);
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85 href=#__codelineno-0-85></a>/*!
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86 href=#__codelineno-0-86></a> * \brief Get the first record of a DNS Result
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87 href=#__codelineno-0-87></a> *
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88 href=#__codelineno-0-88></a> * \param result The DNS result
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89 href=#__codelineno-0-89></a> *
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90 href=#__codelineno-0-90></a> * \return first DNS record
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91 href=#__codelineno-0-91></a> */
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92 href=#__codelineno-0-92></a>const struct ast_dns_record *ast_dns_result_get_records(const struct ast_dns_result *result);
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93 href=#__codelineno-0-93></a>/*!
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94 href=#__codelineno-0-94></a> * \brief Free the DNS result information
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95 href=#__codelineno-0-95></a> *
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96 href=#__codelineno-0-96></a> * \param result The DNS result
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97 href=#__codelineno-0-97></a> */
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98 href=#__codelineno-0-98></a>void ast_dns_result_free(struct ast_dns_result *result);
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99 href=#__codelineno-0-99></a>/*! \brief Opaque structure for a DNS recor */
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100 href=#__codelineno-0-100></a>struct ast_dns_record;
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101 href=#__codelineno-0-101></a>/*!
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102 href=#__codelineno-0-102></a> * \brief Callback invoked when a query completes
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103 href=#__codelineno-0-103></a> *
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104 href=#__codelineno-0-104></a> * \param query The DNS query that was invoked
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105 href=#__codelineno-0-105></a> */
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106 href=#__codelineno-0-106></a>typedef void (*ast_dns_resolve_callback)(const struct ast_dns_query *query);
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107 href=#__codelineno-0-107></a>/*!
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108 href=#__codelineno-0-108></a> * \brief Get the resource record type of a DNS record
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109 href=#__codelineno-0-109></a> *
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110 href=#__codelineno-0-110></a> * \param record The DNS record
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111 href=#__codelineno-0-111></a> *
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112 href=#__codelineno-0-112></a> * \return the resource record type
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113 href=#__codelineno-0-113></a> */
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114 href=#__codelineno-0-114></a>int ast_dns_record_get_rr_type(const struct ast_dns_record *record);
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115 href=#__codelineno-0-115></a>/*!
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116 href=#__codelineno-0-116></a> * \brief Get the resource record class of a DNS record
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117 href=#__codelineno-0-117></a> *
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118 href=#__codelineno-0-118></a> * \param record The DNS record
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119 href=#__codelineno-0-119></a> *
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120 href=#__codelineno-0-120></a> * \return the resource record class
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121 href=#__codelineno-0-121></a> */
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122 href=#__codelineno-0-122></a>int ast_dns_record_get_rr_class(const struct ast_dns_record *record);
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123 href=#__codelineno-0-123></a>/*!
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124 href=#__codelineno-0-124></a> * \brief Get the TTL of a DNS record
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125 href=#__codelineno-0-125></a> *
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126 href=#__codelineno-0-126></a> * \param record The DNS record
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127 href=#__codelineno-0-127></a> *
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128 href=#__codelineno-0-128></a> * \return the TTL
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129 href=#__codelineno-0-129></a> */
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130 href=#__codelineno-0-130></a>int ast_dns_record_get_ttl(const struct ast_dns_record *record);
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131 href=#__codelineno-0-131></a>/*!
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132 href=#__codelineno-0-132></a> * \brief Retrieve the raw DNS record
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133 href=#__codelineno-0-133></a> *
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134 href=#__codelineno-0-134></a> * \param record The DNS record
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135 href=#__codelineno-0-135></a> *
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136 href=#__codelineno-0-136></a> * \return the raw DNS record
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137 href=#__codelineno-0-137></a> */
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138 href=#__codelineno-0-138></a>const char *ast_dns_record_get_data(const struct ast_dns_record *record);
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139 href=#__codelineno-0-139></a>/*!
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140 href=#__codelineno-0-140></a> * \brief Get the next DNS record
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141 href=#__codelineno-0-141></a> *
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142 href=#__codelineno-0-142></a> * \param record The current DNS record
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143 href=#__codelineno-0-143></a> *
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144 href=#__codelineno-0-144></a> * \return the next DNS record
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145 href=#__codelineno-0-145></a> */
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146 href=#__codelineno-0-146></a>struct ast_dns_record *ast_dns_record_get_next(const struct ast_dns_record *record);
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147 href=#__codelineno-0-147></a>/*!
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148 href=#__codelineno-0-148></a> * \brief Asynchronously resolve a DNS query
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149 href=#__codelineno-0-149></a> *
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150 href=#__codelineno-0-150></a> * \param name The name of what to resolve
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151 href=#__codelineno-0-151></a> * \param rr_type Resource record type
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152 href=#__codelineno-0-152></a> * \param rr_class Resource record class
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153 href=#__codelineno-0-153></a> * \param callback The callback to invoke upon completion
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154 href=#__codelineno-0-154></a> * \param data User data to make available on the query
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155 href=#__codelineno-0-155></a> *
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156 href=#__codelineno-0-156></a> * \retval non-NULL success - query has been sent for resolution
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157 href=#__codelineno-0-157></a> * \retval NULL failure
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158 href=#__codelineno-0-158></a> *
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159 href=#__codelineno-0-159></a> * \note The result passed to the callback does not need to be freed
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160 href=#__codelineno-0-160></a> */
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161 href=#__codelineno-0-161></a>struct ast_dns_query *ast_dns_resolve_async(const char *name, int rr_type, int rr_class, ast_dns_resolve_callback callback, void *data);
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162 href=#__codelineno-0-162></a>/*!
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163 href=#__codelineno-0-163></a> * \brief Asynchronously resolve a DNS query, and continue resolving it according to the lowest TTL available
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164 href=#__codelineno-0-164></a> *
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165 href=#__codelineno-0-165></a> * \param name The name of what to resolve
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166 href=#__codelineno-0-166></a> * \param rr_type Resource record type
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167 href=#__codelineno-0-167></a> * \param rr_class Resource record class
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168 href=#__codelineno-0-168></a> * \param callback The callback to invoke upon completion
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169 href=#__codelineno-0-169></a> * \param data User data to make available on the query
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170 href=#__codelineno-0-170></a> *
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171 href=#__codelineno-0-171></a> * \retval non-NULL success - query has been sent for resolution
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172 href=#__codelineno-0-172></a> * \retval NULL failure
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173 href=#__codelineno-0-173></a> *
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174 href=#__codelineno-0-174></a> * \note The user data passed in to this function must be ao2 allocated
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175 href=#__codelineno-0-175></a> *
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176 href=#__codelineno-0-176></a> * \note This query will continue to happen according to the lowest TTL unless cancelled using ast_dns_resolve_cancel
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177 href=#__codelineno-0-177></a> *
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178 href=#__codelineno-0-178></a> * \note It is NOT possible for the callback to be invoked concurrently for the query multiple times
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179 href=#__codelineno-0-179></a> */
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180 href=#__codelineno-0-180></a>struct ast_dns_query *ast_dns_resolve_async_recurring(const char *name, int rr_type, int rr_class, ast_dns_resolve_callback callback, void *data);
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181 href=#__codelineno-0-181></a>/*!
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182 href=#__codelineno-0-182></a> * \brief Cancel an asynchronous DNS resolution
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183 href=#__codelineno-0-183></a> *
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184 href=#__codelineno-0-184></a> * \param query The DNS query returned from ast_dns_resolve_async
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185 href=#__codelineno-0-185></a> *
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186 href=#__codelineno-0-186></a> * \retval 0 success
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187 href=#__codelineno-0-187></a> * \retval -1 failure
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188 href=#__codelineno-0-188></a> *
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189 href=#__codelineno-0-189></a> * \note If successfully cancelled the callback will not be invoked
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190 href=#__codelineno-0-190></a> */
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191 href=#__codelineno-0-191></a>int ast_dns_resolve_cancel(struct ast_dns_query *query);
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192 href=#__codelineno-0-192></a>/*!
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193 href=#__codelineno-0-193></a> * \brief Synchronously resolve a DNS query
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194 href=#__codelineno-0-194></a> *
</span><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195 href=#__codelineno-0-195></a> * \param name The name of what to resolve
</span><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196 href=#__codelineno-0-196></a> * \param rr_type Resource record type
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197 href=#__codelineno-0-197></a> * \param rr_class Resource record class
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198 href=#__codelineno-0-198></a> * \param result A pointer to hold the DNS result
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199 href=#__codelineno-0-199></a> *
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200 href=#__codelineno-0-200></a> * \retval 0 success - query was completed and result is available
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201 href=#__codelineno-0-201></a> * \retval -1 failure
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202 href=#__codelineno-0-202></a> */
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203 href=#__codelineno-0-203></a>int ast_dns_resolve(const char *name, int rr_type, int rr_class, struct ast_dns_result **result);
</span></code></pre></div> <p>On this Page</p> <h1 id=dns_query_seth>dns_query_set.h<a class=headerlink href=#dns_query_seth title="Permanent link">&para;</a></h1> <p>The dns_query_set.h file is the public API into doing parallel queries. It provides mechanisms to group DNS queries together and receive notification when all have been completed. It mirrors the single query API in functionality.</p> <h2 id=code_1>Code<a class=headerlink href=#code_1 title="Permanent link">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>/*! \brief Opaque structure for a set of DNS querie */
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>struct ast_dns_query_set;
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>/*!
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a> * \brief Callback invoked when a query set completes
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a> *
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a> * \param query_set The DNS query set that was invoked
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a> */
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>typedef void (*ast_dns_query_set_callback)(const struct ast_dns_query_set *query_set);
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>/*!
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a> * \brief Create a query set to hold queries
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a> *
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a> * \retval non-NULL success
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a> * \retval NULL failure
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a> */
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>struct ast_dns_query_set *ast_dns_query_set_create(void);
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>/*!
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a> * \brief Add a query to a query set
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a> *
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a> * \param query_set A DNS query set
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a> * \param name The name of what to resolve
</span><span id=__span-1-21><a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a> * \param rr_type Resource record type
</span><span id=__span-1-22><a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a> * \param rr_class Resource record class
</span><span id=__span-1-23><a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a> *
</span><span id=__span-1-24><a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a> * \retval 0 success
</span><span id=__span-1-25><a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a> * \retval -1 failure
</span><span id=__span-1-26><a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a> */
</span><span id=__span-1-27><a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a>int ast_dns_query_set_add(struct ast_dns_query_set *query_set, const char *name, int rr_type, int rr_class);
</span><span id=__span-1-28><a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a>/*!
</span><span id=__span-1-29><a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a> * \brief Retrieve the number of queries in a query set
</span><span id=__span-1-30><a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a> *
</span><span id=__span-1-31><a id=__codelineno-1-31 name=__codelineno-1-31 href=#__codelineno-1-31></a> * \param query_set A DNS query set
</span><span id=__span-1-32><a id=__codelineno-1-32 name=__codelineno-1-32 href=#__codelineno-1-32></a> *
</span><span id=__span-1-33><a id=__codelineno-1-33 name=__codelineno-1-33 href=#__codelineno-1-33></a> * \return the number of queries
</span><span id=__span-1-34><a id=__codelineno-1-34 name=__codelineno-1-34 href=#__codelineno-1-34></a> */
</span><span id=__span-1-35><a id=__codelineno-1-35 name=__codelineno-1-35 href=#__codelineno-1-35></a>size_t ast_dns_query_set_num_queries(const struct ast_dns_query_set *query_set);
</span><span id=__span-1-36><a id=__codelineno-1-36 name=__codelineno-1-36 href=#__codelineno-1-36></a>/*!
</span><span id=__span-1-37><a id=__codelineno-1-37 name=__codelineno-1-37 href=#__codelineno-1-37></a> * \brief Retrieve a query from a query set
</span><span id=__span-1-38><a id=__codelineno-1-38 name=__codelineno-1-38 href=#__codelineno-1-38></a> *
</span><span id=__span-1-39><a id=__codelineno-1-39 name=__codelineno-1-39 href=#__codelineno-1-39></a> * \param query_set A DNS query set
</span><span id=__span-1-40><a id=__codelineno-1-40 name=__codelineno-1-40 href=#__codelineno-1-40></a> * \param index The index of the query to retrieve
</span><span id=__span-1-41><a id=__codelineno-1-41 name=__codelineno-1-41 href=#__codelineno-1-41></a> *
</span><span id=__span-1-42><a id=__codelineno-1-42 name=__codelineno-1-42 href=#__codelineno-1-42></a> * \retval non-NULL success
</span><span id=__span-1-43><a id=__codelineno-1-43 name=__codelineno-1-43 href=#__codelineno-1-43></a> * \retval NULL failure
</span><span id=__span-1-44><a id=__codelineno-1-44 name=__codelineno-1-44 href=#__codelineno-1-44></a> */
</span><span id=__span-1-45><a id=__codelineno-1-45 name=__codelineno-1-45 href=#__codelineno-1-45></a>struct ast_dns_query *ast_dns_query_set_get(const struct ast_dns_query_set *query_set, unsigned int index);
</span><span id=__span-1-46><a id=__codelineno-1-46 name=__codelineno-1-46 href=#__codelineno-1-46></a>/*!
</span><span id=__span-1-47><a id=__codelineno-1-47 name=__codelineno-1-47 href=#__codelineno-1-47></a> * \brief Retrieve user specific data from a query set
</span><span id=__span-1-48><a id=__codelineno-1-48 name=__codelineno-1-48 href=#__codelineno-1-48></a> *
</span><span id=__span-1-49><a id=__codelineno-1-49 name=__codelineno-1-49 href=#__codelineno-1-49></a> * \param query_set A DNS query set
</span><span id=__span-1-50><a id=__codelineno-1-50 name=__codelineno-1-50 href=#__codelineno-1-50></a> *
</span><span id=__span-1-51><a id=__codelineno-1-51 name=__codelineno-1-51 href=#__codelineno-1-51></a> * \return user specific data
</span><span id=__span-1-52><a id=__codelineno-1-52 name=__codelineno-1-52 href=#__codelineno-1-52></a> */
</span><span id=__span-1-53><a id=__codelineno-1-53 name=__codelineno-1-53 href=#__codelineno-1-53></a>void *ast_dns_query_set_get_data(const struct ast_dns_query_set *query_set);
</span><span id=__span-1-54><a id=__codelineno-1-54 name=__codelineno-1-54 href=#__codelineno-1-54></a>/*!
</span><span id=__span-1-55><a id=__codelineno-1-55 name=__codelineno-1-55 href=#__codelineno-1-55></a> * \brief Asynchronously resolve queries in a query set
</span><span id=__span-1-56><a id=__codelineno-1-56 name=__codelineno-1-56 href=#__codelineno-1-56></a> *
</span><span id=__span-1-57><a id=__codelineno-1-57 name=__codelineno-1-57 href=#__codelineno-1-57></a> * \param query_set The query set
</span><span id=__span-1-58><a id=__codelineno-1-58 name=__codelineno-1-58 href=#__codelineno-1-58></a> * \param callback The callback to invoke upon completion
</span><span id=__span-1-59><a id=__codelineno-1-59 name=__codelineno-1-59 href=#__codelineno-1-59></a> * \param data User data to make available on the query set
</span><span id=__span-1-60><a id=__codelineno-1-60 name=__codelineno-1-60 href=#__codelineno-1-60></a> *
</span><span id=__span-1-61><a id=__codelineno-1-61 name=__codelineno-1-61 href=#__codelineno-1-61></a> * \note The callback will be invoked when all queries have completed
</span><span id=__span-1-62><a id=__codelineno-1-62 name=__codelineno-1-62 href=#__codelineno-1-62></a> *
</span><span id=__span-1-63><a id=__codelineno-1-63 name=__codelineno-1-63 href=#__codelineno-1-63></a> * \note The user data passed in to this function must be ao2 allocated
</span><span id=__span-1-64><a id=__codelineno-1-64 name=__codelineno-1-64 href=#__codelineno-1-64></a> */
</span><span id=__span-1-65><a id=__codelineno-1-65 name=__codelineno-1-65 href=#__codelineno-1-65></a>void ast_dns_query_set_resolve_async(struct ast_dns_query_set *query_set, ast_dns_query_set_callback callback, void *data);
</span><span id=__span-1-66><a id=__codelineno-1-66 name=__codelineno-1-66 href=#__codelineno-1-66></a>/*!
</span><span id=__span-1-67><a id=__codelineno-1-67 name=__codelineno-1-67 href=#__codelineno-1-67></a> * \brief Synchronously resolve queries in a query set
</span><span id=__span-1-68><a id=__codelineno-1-68 name=__codelineno-1-68 href=#__codelineno-1-68></a> *
</span><span id=__span-1-69><a id=__codelineno-1-69 name=__codelineno-1-69 href=#__codelineno-1-69></a> * \param query_set The query set
</span><span id=__span-1-70><a id=__codelineno-1-70 name=__codelineno-1-70 href=#__codelineno-1-70></a> *
</span><span id=__span-1-71><a id=__codelineno-1-71 name=__codelineno-1-71 href=#__codelineno-1-71></a> * \note This function will return when all queries have been completed
</span><span id=__span-1-72><a id=__codelineno-1-72 name=__codelineno-1-72 href=#__codelineno-1-72></a> */
</span><span id=__span-1-73><a id=__codelineno-1-73 name=__codelineno-1-73 href=#__codelineno-1-73></a>void ast_query_set_resolve(struct ast_dns_query_set *query_set);
</span><span id=__span-1-74><a id=__codelineno-1-74 name=__codelineno-1-74 href=#__codelineno-1-74></a>/*!
</span><span id=__span-1-75><a id=__codelineno-1-75 name=__codelineno-1-75 href=#__codelineno-1-75></a> * \brief Cancel an asynchronous DNS query set resolution
</span><span id=__span-1-76><a id=__codelineno-1-76 name=__codelineno-1-76 href=#__codelineno-1-76></a> *
</span><span id=__span-1-77><a id=__codelineno-1-77 name=__codelineno-1-77 href=#__codelineno-1-77></a> * \param query_set The DNS query set
</span><span id=__span-1-78><a id=__codelineno-1-78 name=__codelineno-1-78 href=#__codelineno-1-78></a> *
</span><span id=__span-1-79><a id=__codelineno-1-79 name=__codelineno-1-79 href=#__codelineno-1-79></a> * \retval 0 success
</span><span id=__span-1-80><a id=__codelineno-1-80 name=__codelineno-1-80 href=#__codelineno-1-80></a> * \retval -1 failure
</span><span id=__span-1-81><a id=__codelineno-1-81 name=__codelineno-1-81 href=#__codelineno-1-81></a> *
</span><span id=__span-1-82><a id=__codelineno-1-82 name=__codelineno-1-82 href=#__codelineno-1-82></a> * \note If successfully cancelled the callback will not be invoked
</span><span id=__span-1-83><a id=__codelineno-1-83 name=__codelineno-1-83 href=#__codelineno-1-83></a> */
</span><span id=__span-1-84><a id=__codelineno-1-84 name=__codelineno-1-84 href=#__codelineno-1-84></a>int ast_dns_query_set_resolve_cancel(struct ast_dns_query_set *query_set);
</span><span id=__span-1-85><a id=__codelineno-1-85 name=__codelineno-1-85 href=#__codelineno-1-85></a>/*!
</span><span id=__span-1-86><a id=__codelineno-1-86 name=__codelineno-1-86 href=#__codelineno-1-86></a> * \brief Free a query set
</span><span id=__span-1-87><a id=__codelineno-1-87 name=__codelineno-1-87 href=#__codelineno-1-87></a> *
</span><span id=__span-1-88><a id=__codelineno-1-88 name=__codelineno-1-88 href=#__codelineno-1-88></a> * \param query_set A DNS query set
</span><span id=__span-1-89><a id=__codelineno-1-89 name=__codelineno-1-89 href=#__codelineno-1-89></a> */
</span><span id=__span-1-90><a id=__codelineno-1-90 name=__codelineno-1-90 href=#__codelineno-1-90></a>void ast_dns_query_set_free(struct ast_dns_query_set *query_set);
</span></code></pre></div> <h1 id=dns_naptrh>dns_naptr.h<a class=headerlink href=#dns_naptrh title="Permanent link">&para;</a></h1> <p>The dns_naptr.h file is the public API into accessing NAPTR records. The DNS core will automatically parse and make this information available. It will also sort the records.</p> <h2 id=code_2>Code<a class=headerlink href=#code_2 title="Permanent link">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>/*!
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a> * \brief Get the flags from a NAPTR record
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a> *
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a> * \param record The DNS record
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a> *
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a> * \return the flags
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a> */
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>const char *ast_dns_naptr_get_flags(const struct ast_dns_record *record);
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>/*!
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a> * \brief Get the service from a NAPTR record
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a> *
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a> * \param record The DNS record
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a> *
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a> * \return the service
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a> */
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a>const char *ast_dns_naptr_get_service(const struct ast_dns_record *record);
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a>/*!
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a> * \brief Get the regular expression from a NAPTR record
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a> *
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a> * \param record The DNS record
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a> *
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a> * \return the regular expression
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a> */
</span><span id=__span-2-24><a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a>const char *ast_dns_naptr_get_regexp(const struct ast_dns_record *record);
</span><span id=__span-2-25><a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a>/*!
</span><span id=__span-2-26><a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a> * \brief Get the replacement value from a NAPTR record
</span><span id=__span-2-27><a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a> *
</span><span id=__span-2-28><a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a> * \param record The DNS record
</span><span id=__span-2-29><a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a> *
</span><span id=__span-2-30><a id=__codelineno-2-30 name=__codelineno-2-30 href=#__codelineno-2-30></a> * \return the replacement value
</span><span id=__span-2-31><a id=__codelineno-2-31 name=__codelineno-2-31 href=#__codelineno-2-31></a> */
</span><span id=__span-2-32><a id=__codelineno-2-32 name=__codelineno-2-32 href=#__codelineno-2-32></a>const char *ast_dns_naptr_get_replacement(const struct ast_dns_record *record);
</span><span id=__span-2-33><a id=__codelineno-2-33 name=__codelineno-2-33 href=#__codelineno-2-33></a>/*!
</span><span id=__span-2-34><a id=__codelineno-2-34 name=__codelineno-2-34 href=#__codelineno-2-34></a> * \brief Get the order from a NAPTR record
</span><span id=__span-2-35><a id=__codelineno-2-35 name=__codelineno-2-35 href=#__codelineno-2-35></a> *
</span><span id=__span-2-36><a id=__codelineno-2-36 name=__codelineno-2-36 href=#__codelineno-2-36></a> * \param record The DNS record
</span><span id=__span-2-37><a id=__codelineno-2-37 name=__codelineno-2-37 href=#__codelineno-2-37></a> *
</span><span id=__span-2-38><a id=__codelineno-2-38 name=__codelineno-2-38 href=#__codelineno-2-38></a> * \return the order
</span><span id=__span-2-39><a id=__codelineno-2-39 name=__codelineno-2-39 href=#__codelineno-2-39></a> */
</span><span id=__span-2-40><a id=__codelineno-2-40 name=__codelineno-2-40 href=#__codelineno-2-40></a>unsigned short ast_dns_naptr_get_order(const struct ast_dns_record *record);
</span><span id=__span-2-41><a id=__codelineno-2-41 name=__codelineno-2-41 href=#__codelineno-2-41></a>/*!
</span><span id=__span-2-42><a id=__codelineno-2-42 name=__codelineno-2-42 href=#__codelineno-2-42></a> * \brief Get the preference from a NAPTR record
</span><span id=__span-2-43><a id=__codelineno-2-43 name=__codelineno-2-43 href=#__codelineno-2-43></a> *
</span><span id=__span-2-44><a id=__codelineno-2-44 name=__codelineno-2-44 href=#__codelineno-2-44></a> * \param record The DNS record
</span><span id=__span-2-45><a id=__codelineno-2-45 name=__codelineno-2-45 href=#__codelineno-2-45></a> *
</span><span id=__span-2-46><a id=__codelineno-2-46 name=__codelineno-2-46 href=#__codelineno-2-46></a> * \return the preference
</span><span id=__span-2-47><a id=__codelineno-2-47 name=__codelineno-2-47 href=#__codelineno-2-47></a> */
</span><span id=__span-2-48><a id=__codelineno-2-48 name=__codelineno-2-48 href=#__codelineno-2-48></a>unsigned short ast_dns_naptr_get_preference(const struct ast_dns_record *record);
</span></code></pre></div> <h1 id=dns_srvh>dns_srv.h<a class=headerlink href=#dns_srvh title="Permanent link">&para;</a></h1> <p>The dns_srv.h file is the public API into accessing SRV records. The DNS core will automatically parse and make this information available. It will also sort the records.</p> <h2 id=code_3>Code<a class=headerlink href=#code_3 title="Permanent link">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>/*!
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a> * \brief Get the hostname from an SRV record
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a> *
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a> * \param record The DNS record
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a> *
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a> * \return the hostname
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a> */
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>const char *ast_dns_srv_get_host(const struct ast_dns_record *record);
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>/*!
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a> * \brief Get the priority from an SRV record
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a> *
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a> * \param record The DNS record
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a> *
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a> * \return the priority
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a> */
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>unsigned short ast_dns_srv_get_priority(const struct ast_dns_record *record);
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a>/*!
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a> * \brief Get the weight from an SRV record
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a> *
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a> * \param record The DNS record
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a> *
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a> * \return the weight
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a> */
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a>unsigned short ast_dns_srv_get_weight(const struct ast_dns_record *record);
</span><span id=__span-3-25><a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a>/*!
</span><span id=__span-3-26><a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a> * \brief Get the port from an SRV record
</span><span id=__span-3-27><a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a> *
</span><span id=__span-3-28><a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a> * \param record The DNS record
</span><span id=__span-3-29><a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a> *
</span><span id=__span-3-30><a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a> * \return the port
</span><span id=__span-3-31><a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a> */
</span><span id=__span-3-32><a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a>unsigned short ast_dns_srv_get_port(const struct ast_dns_record *record);
</span></code></pre></div> <h1 id=dns_tlsah>dns_tlsa.h<a class=headerlink href=#dns_tlsah title="Permanent link">&para;</a></h1> <p>The dns_tlsa.h file is the public API into accessing TLSA records.</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>/*!
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a> * \brief Get the certificate usage field from a TLSA record
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a> *
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a> * \param record The DNS record
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a> *
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a> * \return the certificate usage field
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a> */
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>unsigned int ast_dns_tlsa_get_usage(const struct ast_dns_record *record);
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>/*!
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a> * \brief Get the selector field from a TLSA record
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a> *
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a> * \param record The DNS record
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a> *
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a> * \return the selector field
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a> */
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a>unsigned int ast_dns_tlsa_get_selector(const struct ast_dns_record *record);
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a>/*!
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a> * \brief Get the matching type field from a TLSA record
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a> *
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a> * \param record The DNS record
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a> *
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a> * \return the matching type field
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a> */
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a>unsigned int ast_dns_tlsa_get_matching_type(const struct ast_dns_record *record);
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a>/*!
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a> * \brief Get the certificate association data from a TLSA record
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a> *
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a> * \param record The DNS record
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a> *
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a> * \return the certificate association data
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a> */
</span><span id=__span-4-32><a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a>const char *ast_dns_tlsa_get_association_data(const struct ast_dns_record *record);
</span></code></pre></div> <h1 id=dns_resolverh>dns_resolver.h<a class=headerlink href=#dns_resolverh title="Permanent link">&para;</a></h1> <p>The dns_resolver.h file contains the interface as defined for resolver implementations.</p> <h2 id=code_4>Code<a class=headerlink href=#code_4 title="Permanent link">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>/*! \brief DNS resolver implementatio */
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>struct ast_dns_resolver {
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a> /*! \brief The name of the resolver implementatio */
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a> const char *name;
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a> /*! \brief Priority for this resolver if multiple exis */
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a> unsigned int priority;
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a> /*! \brief Perform resolution of a DNS quer */
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a> int (*resolve)(struct ast_dns_query *query);
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a> /*! \brief Cancel resolution of a DNS quer */
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a> int (*cancel)(struct ast_dns_query *query);
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>};
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>/*!
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a> * \brief Set resolver specific data on a query
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a> *
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a> * \param query The DNS query
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a> * \param data The resolver specific data
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a> *
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a> * \note Unlike user specific data this does not have to be ao2 allocated
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a> */
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>void ast_dns_resolver_set_data(struct ast_dns_query *query, void *data);
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>/*!
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a> * \brief Retrieve resolver specific data
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a> *
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a> * \param query The DNS query
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a> *
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a> * \return the resolver specific data
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a> */
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>void *ast_dns_resolver_get_data(const struct ast_dns_query *query);
</span><span id=__span-5-29><a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a>/*!
</span><span id=__span-5-30><a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a> * \brief Set result information for a DNS query
</span><span id=__span-5-31><a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a> *
</span><span id=__span-5-32><a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a> * \param query The DNS query
</span><span id=__span-5-33><a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a> * \param nxdomain Whether the domain was not found
</span><span id=__span-5-34><a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a> * \param result Whether the result is secured or not
</span><span id=__span-5-35><a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a> * \param bogus Whether the result is bogus or not
</span><span id=__span-5-36><a id=__codelineno-5-36 name=__codelineno-5-36 href=#__codelineno-5-36></a> * \param canonical The canonical name
</span><span id=__span-5-37><a id=__codelineno-5-37 name=__codelineno-5-37 href=#__codelineno-5-37></a> */
</span><span id=__span-5-38><a id=__codelineno-5-38 name=__codelineno-5-38 href=#__codelineno-5-38></a>void ast_dns_resolver_set_result(struct ast_dns_query *query, unsigned int nxdomain, unsigned int secure, unsigned int bogus,
</span><span id=__span-5-39><a id=__codelineno-5-39 name=__codelineno-5-39 href=#__codelineno-5-39></a> const char *canonical);
</span><span id=__span-5-40><a id=__codelineno-5-40 name=__codelineno-5-40 href=#__codelineno-5-40></a>/*!
</span><span id=__span-5-41><a id=__codelineno-5-41 name=__codelineno-5-41 href=#__codelineno-5-41></a> * \brief Add a DNS record to the result of a DNS query
</span><span id=__span-5-42><a id=__codelineno-5-42 name=__codelineno-5-42 href=#__codelineno-5-42></a> *
</span><span id=__span-5-43><a id=__codelineno-5-43 name=__codelineno-5-43 href=#__codelineno-5-43></a> * \param query The DNS query
</span><span id=__span-5-44><a id=__codelineno-5-44 name=__codelineno-5-44 href=#__codelineno-5-44></a> * \param rr_type Resource record type
</span><span id=__span-5-45><a id=__codelineno-5-45 name=__codelineno-5-45 href=#__codelineno-5-45></a> * \param rr_class Resource record class
</span><span id=__span-5-46><a id=__codelineno-5-46 name=__codelineno-5-46 href=#__codelineno-5-46></a> * \param ttl TTL of the record
</span><span id=__span-5-47><a id=__codelineno-5-47 name=__codelineno-5-47 href=#__codelineno-5-47></a> * \param data The raw DNS record
</span><span id=__span-5-48><a id=__codelineno-5-48 name=__codelineno-5-48 href=#__codelineno-5-48></a> * \param size The size of the raw DNS record
</span><span id=__span-5-49><a id=__codelineno-5-49 name=__codelineno-5-49 href=#__codelineno-5-49></a> *
</span><span id=__span-5-50><a id=__codelineno-5-50 name=__codelineno-5-50 href=#__codelineno-5-50></a> * \retval 0 success
</span><span id=__span-5-51><a id=__codelineno-5-51 name=__codelineno-5-51 href=#__codelineno-5-51></a> * \retval -1 failure
</span><span id=__span-5-52><a id=__codelineno-5-52 name=__codelineno-5-52 href=#__codelineno-5-52></a> */
</span><span id=__span-5-53><a id=__codelineno-5-53 name=__codelineno-5-53 href=#__codelineno-5-53></a>int ast_dns_resolver_add_record(struct ast_dns_query *query, int rr_type, int rr_class, int ttl, char *data, size_t size);
</span><span id=__span-5-54><a id=__codelineno-5-54 name=__codelineno-5-54 href=#__codelineno-5-54></a>/*!
</span><span id=__span-5-55><a id=__codelineno-5-55 name=__codelineno-5-55 href=#__codelineno-5-55></a> * \brief Mark a DNS query as having been completed
</span><span id=__span-5-56><a id=__codelineno-5-56 name=__codelineno-5-56 href=#__codelineno-5-56></a> *
</span><span id=__span-5-57><a id=__codelineno-5-57 name=__codelineno-5-57 href=#__codelineno-5-57></a> * \param query The DNS query
</span><span id=__span-5-58><a id=__codelineno-5-58 name=__codelineno-5-58 href=#__codelineno-5-58></a> *
</span><span id=__span-5-59><a id=__codelineno-5-59 name=__codelineno-5-59 href=#__codelineno-5-59></a> * \note Once this is invoked the resolver data on the query will be removed
</span><span id=__span-5-60><a id=__codelineno-5-60 name=__codelineno-5-60 href=#__codelineno-5-60></a> */
</span><span id=__span-5-61><a id=__codelineno-5-61 name=__codelineno-5-61 href=#__codelineno-5-61></a>void ast_dns_resolver_completed(const struct ast_dns_query *query);
</span><span id=__span-5-62><a id=__codelineno-5-62 name=__codelineno-5-62 href=#__codelineno-5-62></a>/*!
</span><span id=__span-5-63><a id=__codelineno-5-63 name=__codelineno-5-63 href=#__codelineno-5-63></a> * \brief Register a DNS resolver
</span><span id=__span-5-64><a id=__codelineno-5-64 name=__codelineno-5-64 href=#__codelineno-5-64></a> *
</span><span id=__span-5-65><a id=__codelineno-5-65 name=__codelineno-5-65 href=#__codelineno-5-65></a> * \param resolver A DNS resolver implementation
</span><span id=__span-5-66><a id=__codelineno-5-66 name=__codelineno-5-66 href=#__codelineno-5-66></a> *
</span><span id=__span-5-67><a id=__codelineno-5-67 name=__codelineno-5-67 href=#__codelineno-5-67></a> * \retval 0 success
</span><span id=__span-5-68><a id=__codelineno-5-68 name=__codelineno-5-68 href=#__codelineno-5-68></a> * \retval -1 failure
</span><span id=__span-5-69><a id=__codelineno-5-69 name=__codelineno-5-69 href=#__codelineno-5-69></a> */
</span><span id=__span-5-70><a id=__codelineno-5-70 name=__codelineno-5-70 href=#__codelineno-5-70></a>int ast_dns_resolver_register(const struct ast_core_dns_resolver *resolver);
</span><span id=__span-5-71><a id=__codelineno-5-71 name=__codelineno-5-71 href=#__codelineno-5-71></a>/*!
</span><span id=__span-5-72><a id=__codelineno-5-72 name=__codelineno-5-72 href=#__codelineno-5-72></a> * \brief Unregister a DNS resolver
</span><span id=__span-5-73><a id=__codelineno-5-73 name=__codelineno-5-73 href=#__codelineno-5-73></a> *
</span><span id=__span-5-74><a id=__codelineno-5-74 name=__codelineno-5-74 href=#__codelineno-5-74></a> * \param resolver A DNS resolver implementation
</span><span id=__span-5-75><a id=__codelineno-5-75 name=__codelineno-5-75 href=#__codelineno-5-75></a> *
</span><span id=__span-5-76><a id=__codelineno-5-76 name=__codelineno-5-76 href=#__codelineno-5-76></a> * \retval 0 success
</span><span id=__span-5-77><a id=__codelineno-5-77 name=__codelineno-5-77 href=#__codelineno-5-77></a> * \retval -1 failure
</span><span id=__span-5-78><a id=__codelineno-5-78 name=__codelineno-5-78 href=#__codelineno-5-78></a> */
</span><span id=__span-5-79><a id=__codelineno-5-79 name=__codelineno-5-79 href=#__codelineno-5-79></a>int ast_dns_resolver_unregister(const struct ast_core_dns_resolver *resolver);
</span></code></pre></div> <h1 id=dns_internalh>dns_internal.h<a class=headerlink href=#dns_internalh title="Permanent link">&para;</a></h1> <p>The dns_internal.h file contains the internal data structures.</p> <h2 id=code_5>Code<a class=headerlink href=#code_5 title="Permanent link">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>/*! \brief Generic DNS record informatio */
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>struct ast_dns_record {
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a> /*! \brief Resource record typ */
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a> int rr_type;
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a> /*! \brief Resource record clas */
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a> int rr_class;
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a> /*! \brief Time-to-live of the recor */
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a> int ttl;
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a> /*! \brief The raw DNS recor */
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a> char *data;
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a> /*! \brief The size of the raw DNS recor */
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a> size_t data_len;
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a> /*! \brief Linked list informatio */
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a> AST_LIST_ENTRY(ast_dns_record) list;
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>};
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>/*! \brief An SRV recor */
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>struct ast_dns_srv_record {
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a> /*! \brief Generic DNS record informatio */
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a> struct ast_dns_record generic;
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a> /*! \brief The hostname in the SRV recor */
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a> const char *host;
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a> /*! \brief The priority of the SRV recor */
</span><span id=__span-6-23><a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a> unsigned short priority;
</span><span id=__span-6-24><a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a> /*! \brief The weight of the SRV recor */
</span><span id=__span-6-25><a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a> unsigned short weight;
</span><span id=__span-6-26><a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a> /*! \brief The port in the SRV recor */
</span><span id=__span-6-27><a id=__codelineno-6-27 name=__codelineno-6-27 href=#__codelineno-6-27></a> unsigned short port;
</span><span id=__span-6-28><a id=__codelineno-6-28 name=__codelineno-6-28 href=#__codelineno-6-28></a>};
</span><span id=__span-6-29><a id=__codelineno-6-29 name=__codelineno-6-29 href=#__codelineno-6-29></a>/*! \brief A NAPTR recor */
</span><span id=__span-6-30><a id=__codelineno-6-30 name=__codelineno-6-30 href=#__codelineno-6-30></a>struct ast_dns_naptr_record {
</span><span id=__span-6-31><a id=__codelineno-6-31 name=__codelineno-6-31 href=#__codelineno-6-31></a> /*! \brief Generic DNS record informatio */
</span><span id=__span-6-32><a id=__codelineno-6-32 name=__codelineno-6-32 href=#__codelineno-6-32></a> struct ast_dns_record generic;
</span><span id=__span-6-33><a id=__codelineno-6-33 name=__codelineno-6-33 href=#__codelineno-6-33></a> /*! \brief The flags from the NAPTR recor */
</span><span id=__span-6-34><a id=__codelineno-6-34 name=__codelineno-6-34 href=#__codelineno-6-34></a> const char *flags;
</span><span id=__span-6-35><a id=__codelineno-6-35 name=__codelineno-6-35 href=#__codelineno-6-35></a> /*! \brief The service from the NAPTR recor */
</span><span id=__span-6-36><a id=__codelineno-6-36 name=__codelineno-6-36 href=#__codelineno-6-36></a> const char *service;
</span><span id=__span-6-37><a id=__codelineno-6-37 name=__codelineno-6-37 href=#__codelineno-6-37></a> /*! \brief The regular expression from the NAPTR recor */
</span><span id=__span-6-38><a id=__codelineno-6-38 name=__codelineno-6-38 href=#__codelineno-6-38></a> const char *regexp;
</span><span id=__span-6-39><a id=__codelineno-6-39 name=__codelineno-6-39 href=#__codelineno-6-39></a> /*! \brief The replacement from the NAPTR recor */
</span><span id=__span-6-40><a id=__codelineno-6-40 name=__codelineno-6-40 href=#__codelineno-6-40></a> const char *replacement;
</span><span id=__span-6-41><a id=__codelineno-6-41 name=__codelineno-6-41 href=#__codelineno-6-41></a> /*! \brief The order for the NAPTR recor */
</span><span id=__span-6-42><a id=__codelineno-6-42 name=__codelineno-6-42 href=#__codelineno-6-42></a> unsigned short order;
</span><span id=__span-6-43><a id=__codelineno-6-43 name=__codelineno-6-43 href=#__codelineno-6-43></a> /*! \brief The preference of the NAPTR recor */
</span><span id=__span-6-44><a id=__codelineno-6-44 name=__codelineno-6-44 href=#__codelineno-6-44></a> unsigned short preference;
</span><span id=__span-6-45><a id=__codelineno-6-45 name=__codelineno-6-45 href=#__codelineno-6-45></a>};
</span><span id=__span-6-46><a id=__codelineno-6-46 name=__codelineno-6-46 href=#__codelineno-6-46></a>/*! \brief The result of a DNS quer */
</span><span id=__span-6-47><a id=__codelineno-6-47 name=__codelineno-6-47 href=#__codelineno-6-47></a>struct ast_dns_result {
</span><span id=__span-6-48><a id=__codelineno-6-48 name=__codelineno-6-48 href=#__codelineno-6-48></a> /*! \brief Whether the domain was not foun */
</span><span id=__span-6-49><a id=__codelineno-6-49 name=__codelineno-6-49 href=#__codelineno-6-49></a> unsigned int nxdomain;
</span><span id=__span-6-50><a id=__codelineno-6-50 name=__codelineno-6-50 href=#__codelineno-6-50></a> /*! \brief Whether the result is secur */
</span><span id=__span-6-51><a id=__codelineno-6-51 name=__codelineno-6-51 href=#__codelineno-6-51></a> unsigned int secure;
</span><span id=__span-6-52><a id=__codelineno-6-52 name=__codelineno-6-52 href=#__codelineno-6-52></a> /*! \brief Whether the result is bogu */
</span><span id=__span-6-53><a id=__codelineno-6-53 name=__codelineno-6-53 href=#__codelineno-6-53></a> unsigned int bogus;
</span><span id=__span-6-54><a id=__codelineno-6-54 name=__codelineno-6-54 href=#__codelineno-6-54></a> /*! \brief The canonical nam */
</span><span id=__span-6-55><a id=__codelineno-6-55 name=__codelineno-6-55 href=#__codelineno-6-55></a> const char *canonical;
</span><span id=__span-6-56><a id=__codelineno-6-56 name=__codelineno-6-56 href=#__codelineno-6-56></a> /*! \brief Records returne */
</span><span id=__span-6-57><a id=__codelineno-6-57 name=__codelineno-6-57 href=#__codelineno-6-57></a> AST_LIST_HEAD_NOLOCK(, ast_dns_record) records;
</span><span id=__span-6-58><a id=__codelineno-6-58 name=__codelineno-6-58 href=#__codelineno-6-58></a>};
</span><span id=__span-6-59><a id=__codelineno-6-59 name=__codelineno-6-59 href=#__codelineno-6-59></a>/*! \brief A DNS quer */
</span><span id=__span-6-60><a id=__codelineno-6-60 name=__codelineno-6-60 href=#__codelineno-6-60></a>struct ast_dns_query {
</span><span id=__span-6-61><a id=__codelineno-6-61 name=__codelineno-6-61 href=#__codelineno-6-61></a> /*! \brief Callback to invoke upon completio */
</span><span id=__span-6-62><a id=__codelineno-6-62 name=__codelineno-6-62 href=#__codelineno-6-62></a> ast_dns_resolve_callback callback;
</span><span id=__span-6-63><a id=__codelineno-6-63 name=__codelineno-6-63 href=#__codelineno-6-63></a> /*! \brief User-specific dat */
</span><span id=__span-6-64><a id=__codelineno-6-64 name=__codelineno-6-64 href=#__codelineno-6-64></a> void *user_data;
</span><span id=__span-6-65><a id=__codelineno-6-65 name=__codelineno-6-65 href=#__codelineno-6-65></a> /*! \brief Resolver-specific dat */
</span><span id=__span-6-66><a id=__codelineno-6-66 name=__codelineno-6-66 href=#__codelineno-6-66></a> void *resolver_data;
</span><span id=__span-6-67><a id=__codelineno-6-67 name=__codelineno-6-67 href=#__codelineno-6-67></a> /*! \brief Result of the DNS quer */
</span><span id=__span-6-68><a id=__codelineno-6-68 name=__codelineno-6-68 href=#__codelineno-6-68></a> struct ast_dns_result *result;
</span><span id=__span-6-69><a id=__codelineno-6-69 name=__codelineno-6-69 href=#__codelineno-6-69></a> /*! \brief Timer for recurring resolutio */
</span><span id=__span-6-70><a id=__codelineno-6-70 name=__codelineno-6-70 href=#__codelineno-6-70></a> int timer;
</span><span id=__span-6-71><a id=__codelineno-6-71 name=__codelineno-6-71 href=#__codelineno-6-71></a>};
</span><span id=__span-6-72><a id=__codelineno-6-72 name=__codelineno-6-72 href=#__codelineno-6-72></a>/*! \brief A set of DNS querie */
</span><span id=__span-6-73><a id=__codelineno-6-73 name=__codelineno-6-73 href=#__codelineno-6-73></a>struct ast_dns_query_set {
</span><span id=__span-6-74><a id=__codelineno-6-74 name=__codelineno-6-74 href=#__codelineno-6-74></a> /*! \brief DNS querie */
</span><span id=__span-6-75><a id=__codelineno-6-75 name=__codelineno-6-75 href=#__codelineno-6-75></a> AST_VECTOR(, struct ast_dns_query *) queries;
</span><span id=__span-6-76><a id=__codelineno-6-76 name=__codelineno-6-76 href=#__codelineno-6-76></a> /*! \brief The total number of completed querie */
</span><span id=__span-6-77><a id=__codelineno-6-77 name=__codelineno-6-77 href=#__codelineno-6-77></a> unsigned int queries_completed;
</span><span id=__span-6-78><a id=__codelineno-6-78 name=__codelineno-6-78 href=#__codelineno-6-78></a> /*! \brief Callback to invoke upon completio */
</span><span id=__span-6-79><a id=__codelineno-6-79 name=__codelineno-6-79 href=#__codelineno-6-79></a> ast_dns_query_set_callback callback;
</span><span id=__span-6-80><a id=__codelineno-6-80 name=__codelineno-6-80 href=#__codelineno-6-80></a> /*! \brief User-specific dat */
</span><span id=__span-6-81><a id=__codelineno-6-81 name=__codelineno-6-81 href=#__codelineno-6-81></a> void *user_data;
</span><span id=__span-6-82><a id=__codelineno-6-82 name=__codelineno-6-82 href=#__codelineno-6-82></a> /*! \brief Timer for recurring resolutio */
</span><span id=__span-6-83><a id=__codelineno-6-83 name=__codelineno-6-83 href=#__codelineno-6-83></a> int timer;
</span><span id=__span-6-84><a id=__codelineno-6-84 name=__codelineno-6-84 href=#__codelineno-6-84></a>};
</span></code></pre></div> <h1 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">&para;</a></h1> <h2 id=synchronous-resolution>Synchronous Resolution<a class=headerlink href=#synchronous-resolution title="Permanent link">&para;</a></h2> <p>This example blocks the calling thread until resolution has completed. Once completed result information is returned.</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-7-1> 1</a></span>
<span class=normal><a href=#__codelineno-7-2> 2</a></span>
<span class=normal><a href=#__codelineno-7-3> 3</a></span>
<span class=normal><a href=#__codelineno-7-4> 4</a></span>
<span class=normal><a href=#__codelineno-7-5> 5</a></span>
<span class=normal><a href=#__codelineno-7-6> 6</a></span>
<span class=normal><a href=#__codelineno-7-7> 7</a></span>
<span class=normal><a href=#__codelineno-7-8> 8</a></span>
<span class=normal><a href=#__codelineno-7-9> 9</a></span>
<span class=normal><a href=#__codelineno-7-10>10</a></span>
<span class=normal><a href=#__codelineno-7-11>11</a></span>
<span class=normal><a href=#__codelineno-7-12>12</a></span>
<span class=normal><a href=#__codelineno-7-13>13</a></span>
<span class=normal><a href=#__codelineno-7-14>14</a></span>
<span class=normal><a href=#__codelineno-7-15>15</a></span>
<span class=normal><a href=#__codelineno-7-16>16</a></span>
<span class=normal><a href=#__codelineno-7-17>17</a></span>
<span class=normal><a href=#__codelineno-7-18>18</a></span>
<span class=normal><a href=#__codelineno-7-19>19</a></span>
<span class=normal><a href=#__codelineno-7-20>20</a></span>
<span class=normal><a href=#__codelineno-7-21>21</a></span>
<span class=normal><a href=#__codelineno-7-22>22</a></span>
<span class=normal><a href=#__codelineno-7-23>23</a></span>
<span class=normal><a href=#__codelineno-7-24>24</a></span>
<span class=normal><a href=#__codelineno-7-25>25</a></span>
<span class=normal><a href=#__codelineno-7-26>26</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a><span class=c1>#include &lt;asterisk/dns.h&gt;</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a>int<span class=w> </span>test<span class=o>(</span>void<span class=o>)</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a><span class=o>{</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4></a><span class=w> </span>RAII_VAR<span class=o>(</span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*,<span class=w> </span>result,<span class=w> </span>NULL,<span class=w> </span>ast_dns_result_unref<span class=o>)</span><span class=p>;</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5></a><span class=w> </span>int<span class=w> </span>res<span class=p>;</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6></a><span class=w> </span>struct<span class=w> </span>ast_dns_record<span class=w> </span>*record<span class=p>;</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7></a><span class=w> </span><span class=nv>res</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_resolve<span class=o>(</span><span class=s2>&quot;www.asterisk.org&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_a,<span class=w> </span><span class=p>&amp;</span>result<span class=o>)</span><span class=p>;</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>res<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Synchronous resolution of &#39;asterisk.org&#39; failed\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10></a><span class=w> </span><span class=k>return</span><span class=w> </span>-1<span class=p>;</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_nxdomain<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Specified domain name &#39;asterisk.org&#39; does not exist\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14></a><span class=w> </span><span class=k>return</span><span class=w> </span>-1<span class=p>;</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_secure<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;DNS result was secured\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18></a><span class=w> </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_bogus<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;DNS result is bogus\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20></a><span class=w> </span><span class=k>return</span><span class=w> </span>-1<span class=p>;</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22></a><span class=w> </span><span class=k>for</span><span class=w> </span><span class=o>(</span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>result<span class=o>)</span><span class=p>;</span><span class=w> </span>record<span class=p>;</span><span class=w> </span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_record_get_next<span class=o>(</span>record<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Got address: %s\n&quot;</span>,<span class=w> </span>inet_ntoa<span class=o>(</span>*<span class=o>(</span>struct<span class=w> </span>in_addr*<span class=o>)</span>ast_dns_record_get_data<span class=o>(</span>record<span class=o>)))</span><span class=p>;</span>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25></a><span class=w> </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=asynchronous-resolution>Asynchronous Resolution<a class=headerlink href=#asynchronous-resolution title="Permanent link">&para;</a></h2> <p>This example does not block the calling thread when resolving. A callback is invoked upon query completion instead. The result information can then be retrieved from the query.</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1> 1</a></span>
<span class=normal><a href=#__codelineno-8-2> 2</a></span>
<span class=normal><a href=#__codelineno-8-3> 3</a></span>
<span class=normal><a href=#__codelineno-8-4> 4</a></span>
<span class=normal><a href=#__codelineno-8-5> 5</a></span>
<span class=normal><a href=#__codelineno-8-6> 6</a></span>
<span class=normal><a href=#__codelineno-8-7> 7</a></span>
<span class=normal><a href=#__codelineno-8-8> 8</a></span>
<span class=normal><a href=#__codelineno-8-9> 9</a></span>
<span class=normal><a href=#__codelineno-8-10>10</a></span>
<span class=normal><a href=#__codelineno-8-11>11</a></span>
<span class=normal><a href=#__codelineno-8-12>12</a></span>
<span class=normal><a href=#__codelineno-8-13>13</a></span>
<span class=normal><a href=#__codelineno-8-14>14</a></span>
<span class=normal><a href=#__codelineno-8-15>15</a></span>
<span class=normal><a href=#__codelineno-8-16>16</a></span>
<span class=normal><a href=#__codelineno-8-17>17</a></span>
<span class=normal><a href=#__codelineno-8-18>18</a></span>
<span class=normal><a href=#__codelineno-8-19>19</a></span>
<span class=normal><a href=#__codelineno-8-20>20</a></span>
<span class=normal><a href=#__codelineno-8-21>21</a></span>
<span class=normal><a href=#__codelineno-8-22>22</a></span>
<span class=normal><a href=#__codelineno-8-23>23</a></span>
<span class=normal><a href=#__codelineno-8-24>24</a></span>
<span class=normal><a href=#__codelineno-8-25>25</a></span>
<span class=normal><a href=#__codelineno-8-26>26</a></span>
<span class=normal><a href=#__codelineno-8-27>27</a></span>
<span class=normal><a href=#__codelineno-8-28>28</a></span>
<span class=normal><a href=#__codelineno-8-29>29</a></span>
<span class=normal><a href=#__codelineno-8-30>30</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=c1>#include &lt;asterisk/dns.h&gt;</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2></a>static<span class=w> </span>void<span class=w> </span>test_callback<span class=o>(</span>const<span class=w> </span>struct<span class=w> </span>ast_dns_query<span class=w> </span>*query<span class=o>)</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=o>{</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4></a><span class=w> </span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*result<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_get_result<span class=o>(</span>query<span class=o>)</span><span class=p>;</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5></a><span class=w> </span>struct<span class=w> </span>ast_dns_record<span class=w> </span>*record<span class=p>;</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_nxdomain<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Specified domain name &#39;asterisk.org&#39; does not exist\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_secure<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;DNS result was secured\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12></a><span class=w> </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_bogus<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;DNS result is bogus\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16></a><span class=w> </span><span class=k>for</span><span class=w> </span><span class=o>(</span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>result<span class=o>)</span><span class=p>;</span><span class=w> </span>record<span class=p>;</span><span class=w> </span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_record_get_next<span class=o>(</span>record<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Got address: %s\n&quot;</span>,<span class=w> </span>inet_ntoa<span class=o>(</span>*<span class=o>(</span>struct<span class=w> </span>in_addr*<span class=o>)</span>ast_dns_record_get_data<span class=o>(</span>record<span class=o>)))</span><span class=p>;</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19></a><span class=o>}</span>
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20></a>int<span class=w> </span>test<span class=o>(</span>void<span class=o>)</span>
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21></a><span class=o>{</span>
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22></a><span class=w> </span>int<span class=w> </span>res<span class=p>;</span>
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23></a><span class=w> </span><span class=nv>res</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_resolve_async<span class=o>(</span><span class=s2>&quot;www.asterisk.org&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_a,<span class=w> </span>test_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>res<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Asynchronous resolution of &#39;asterisk.org&#39; failed\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26></a><span class=w> </span><span class=k>return</span><span class=w> </span>-1<span class=p>;</span>
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-8-28><a id=__codelineno-8-28 name=__codelineno-8-28></a><span class=w> </span>sleep<span class=o>(</span><span class=m>5</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-8-29><a id=__codelineno-8-29 name=__codelineno-8-29></a><span class=w> </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-8-30><a id=__codelineno-8-30 name=__codelineno-8-30></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=parallel-queries>Parallel Queries<a class=headerlink href=#parallel-queries title="Permanent link">&para;</a></h2> <p>This example uses a query set to do two queries in an asynchronous manner. Each query is done on a different domain. Once both queries have completed the callback is invoked and each query result can be examined.</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-9-1> 1</a></span>
<span class=normal><a href=#__codelineno-9-2> 2</a></span>
<span class=normal><a href=#__codelineno-9-3> 3</a></span>
<span class=normal><a href=#__codelineno-9-4> 4</a></span>
<span class=normal><a href=#__codelineno-9-5> 5</a></span>
<span class=normal><a href=#__codelineno-9-6> 6</a></span>
<span class=normal><a href=#__codelineno-9-7> 7</a></span>
<span class=normal><a href=#__codelineno-9-8> 8</a></span>
<span class=normal><a href=#__codelineno-9-9> 9</a></span>
<span class=normal><a href=#__codelineno-9-10>10</a></span>
<span class=normal><a href=#__codelineno-9-11>11</a></span>
<span class=normal><a href=#__codelineno-9-12>12</a></span>
<span class=normal><a href=#__codelineno-9-13>13</a></span>
<span class=normal><a href=#__codelineno-9-14>14</a></span>
<span class=normal><a href=#__codelineno-9-15>15</a></span>
<span class=normal><a href=#__codelineno-9-16>16</a></span>
<span class=normal><a href=#__codelineno-9-17>17</a></span>
<span class=normal><a href=#__codelineno-9-18>18</a></span>
<span class=normal><a href=#__codelineno-9-19>19</a></span>
<span class=normal><a href=#__codelineno-9-20>20</a></span>
<span class=normal><a href=#__codelineno-9-21>21</a></span>
<span class=normal><a href=#__codelineno-9-22>22</a></span>
<span class=normal><a href=#__codelineno-9-23>23</a></span>
<span class=normal><a href=#__codelineno-9-24>24</a></span>
<span class=normal><a href=#__codelineno-9-25>25</a></span>
<span class=normal><a href=#__codelineno-9-26>26</a></span>
<span class=normal><a href=#__codelineno-9-27>27</a></span>
<span class=normal><a href=#__codelineno-9-28>28</a></span>
<span class=normal><a href=#__codelineno-9-29>29</a></span>
<span class=normal><a href=#__codelineno-9-30>30</a></span>
<span class=normal><a href=#__codelineno-9-31>31</a></span>
<span class=normal><a href=#__codelineno-9-32>32</a></span>
<span class=normal><a href=#__codelineno-9-33>33</a></span>
<span class=normal><a href=#__codelineno-9-34>34</a></span>
<span class=normal><a href=#__codelineno-9-35>35</a></span>
<span class=normal><a href=#__codelineno-9-36>36</a></span>
<span class=normal><a href=#__codelineno-9-37>37</a></span>
<span class=normal><a href=#__codelineno-9-38>38</a></span>
<span class=normal><a href=#__codelineno-9-39>39</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a><span class=c1>#include &lt;asterisk/dns.h&gt;</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2></a><span class=c1>#include &lt;asterisk/dns_query_set.h&gt;</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3></a>static<span class=w> </span>void<span class=w> </span>test_callback<span class=o>(</span>const<span class=w> </span>struct<span class=w> </span>ast_dns_query_query<span class=w> </span>*query_set<span class=o>)</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4></a><span class=o>{</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5></a><span class=w> </span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*asterisk_result<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_get_result<span class=o>(</span>ast_dns_query_set_get<span class=o>(</span>query_set,<span class=w> </span><span class=m>0</span><span class=o>))</span><span class=p>;</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6></a><span class=w> </span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*digium_result<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_get_result<span class=o>(</span>ast_dns_query_set_get<span class=o>(</span>query_set,<span class=w> </span><span class=m>1</span><span class=o>))</span><span class=p>;</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7></a><span class=w> </span>struct<span class=w> </span>ast_dns_record<span class=w> </span>*record<span class=p>;</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>!ast_dns_result_get_nxdomain<span class=o>(</span>asterisk_result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;&#39;asterisk.org&#39; resolution results:\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10></a><span class=w> </span><span class=k>for</span><span class=w> </span><span class=o>(</span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>asterisk_result<span class=o>)</span><span class=p>;</span><span class=w> </span>record<span class=p>;</span><span class=w> </span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_record_get_next<span class=o>(</span>record<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Got address: %s\n&quot;</span>,<span class=w> </span>inet_ntoa<span class=o>(</span>*<span class=o>(</span>struct<span class=w> </span>in_addr*<span class=o>)</span>ast_dns_record_get_data<span class=o>(</span>record<span class=o>)))</span><span class=p>;</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13></a><span class=w> </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;&#39;asterisk.org&#39; domain does not exist\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>!ast_dns_result_get_nxdomain<span class=o>(</span>digium_result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;&#39;digium.com&#39; resolution results:\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18></a><span class=w> </span><span class=k>for</span><span class=w> </span><span class=o>(</span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>digium_result<span class=o>)</span><span class=p>;</span><span class=w> </span>record<span class=p>;</span><span class=w> </span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_record_get_next<span class=o>(</span>record<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Got address: %s\n&quot;</span>,<span class=w> </span>inet_ntoa<span class=o>(</span>*<span class=o>(</span>struct<span class=w> </span>in_addr*<span class=o>)</span>ast_dns_record_get_data<span class=o>(</span>record<span class=o>)))</span><span class=p>;</span>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-9-21><a id=__codelineno-9-21 name=__codelineno-9-21></a><span class=w> </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-9-22><a id=__codelineno-9-22 name=__codelineno-9-22></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;&#39;digium.com&#39; domain does not exist\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-23><a id=__codelineno-9-23 name=__codelineno-9-23></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-9-24><a id=__codelineno-9-24 name=__codelineno-9-24></a><span class=o>}</span>
</span><span id=__span-9-25><a id=__codelineno-9-25 name=__codelineno-9-25></a>int<span class=w> </span>test<span class=o>(</span>void<span class=o>)</span>
</span><span id=__span-9-26><a id=__codelineno-9-26 name=__codelineno-9-26></a><span class=o>{</span>
</span><span id=__span-9-27><a id=__codelineno-9-27 name=__codelineno-9-27></a><span class=w> </span>struct<span class=w> </span>ast_dns_query_set<span class=w> </span>*query_set<span class=p>;</span>
</span><span id=__span-9-28><a id=__codelineno-9-28 name=__codelineno-9-28></a><span class=w> </span><span class=nv>query_set</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_set_create<span class=o>()</span>:
</span><span id=__span-9-29><a id=__codelineno-9-29 name=__codelineno-9-29></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>!query_set<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-9-30><a id=__codelineno-9-30 name=__codelineno-9-30></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Could not create a query set for parallel resolution&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-31><a id=__codelineno-9-31 name=__codelineno-9-31></a><span class=w> </span><span class=k>return</span><span class=w> </span>-1<span class=p>;</span>
</span><span id=__span-9-32><a id=__codelineno-9-32 name=__codelineno-9-32></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-9-33><a id=__codelineno-9-33 name=__codelineno-9-33></a><span class=w> </span>ast_dns_query_set_add<span class=o>(</span>query_set,<span class=w> </span><span class=s2>&quot;www.asterisk.org&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_a<span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-34><a id=__codelineno-9-34 name=__codelineno-9-34></a><span class=w> </span>ast_dns_query_set_add<span class=o>(</span>query_set,<span class=w> </span><span class=s2>&quot;www.digium.com&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_a<span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-35><a id=__codelineno-9-35 name=__codelineno-9-35></a><span class=w> </span>ast_dns_query_set_resolve_async<span class=o>(</span>query_set,<span class=w> </span>test_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-36><a id=__codelineno-9-36 name=__codelineno-9-36></a><span class=w> </span>ast_dns_query_set_unref<span class=o>(</span>query_set<span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-37><a id=__codelineno-9-37 name=__codelineno-9-37></a><span class=w> </span>sleep<span class=o>(</span><span class=m>5</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-9-38><a id=__codelineno-9-38 name=__codelineno-9-38></a><span class=w> </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-9-39><a id=__codelineno-9-39 name=__codelineno-9-39></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=fallback>Fallback<a class=headerlink href=#fallback title="Permanent link">&para;</a></h2> <p>This example does a fall back from an AAAA record lookup to an A record lookup if no results were available for the AAAA record lookup. This also uses the asynchronous function and the same callback is used for both queries.</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1> 1</a></span>
<span class=normal><a href=#__codelineno-10-2> 2</a></span>
<span class=normal><a href=#__codelineno-10-3> 3</a></span>
<span class=normal><a href=#__codelineno-10-4> 4</a></span>
<span class=normal><a href=#__codelineno-10-5> 5</a></span>
<span class=normal><a href=#__codelineno-10-6> 6</a></span>
<span class=normal><a href=#__codelineno-10-7> 7</a></span>
<span class=normal><a href=#__codelineno-10-8> 8</a></span>
<span class=normal><a href=#__codelineno-10-9> 9</a></span>
<span class=normal><a href=#__codelineno-10-10>10</a></span>
<span class=normal><a href=#__codelineno-10-11>11</a></span>
<span class=normal><a href=#__codelineno-10-12>12</a></span>
<span class=normal><a href=#__codelineno-10-13>13</a></span>
<span class=normal><a href=#__codelineno-10-14>14</a></span>
<span class=normal><a href=#__codelineno-10-15>15</a></span>
<span class=normal><a href=#__codelineno-10-16>16</a></span>
<span class=normal><a href=#__codelineno-10-17>17</a></span>
<span class=normal><a href=#__codelineno-10-18>18</a></span>
<span class=normal><a href=#__codelineno-10-19>19</a></span>
<span class=normal><a href=#__codelineno-10-20>20</a></span>
<span class=normal><a href=#__codelineno-10-21>21</a></span>
<span class=normal><a href=#__codelineno-10-22>22</a></span>
<span class=normal><a href=#__codelineno-10-23>23</a></span>
<span class=normal><a href=#__codelineno-10-24>24</a></span>
<span class=normal><a href=#__codelineno-10-25>25</a></span>
<span class=normal><a href=#__codelineno-10-26>26</a></span>
<span class=normal><a href=#__codelineno-10-27>27</a></span>
<span class=normal><a href=#__codelineno-10-28>28</a></span>
<span class=normal><a href=#__codelineno-10-29>29</a></span>
<span class=normal><a href=#__codelineno-10-30>30</a></span>
<span class=normal><a href=#__codelineno-10-31>31</a></span>
<span class=normal><a href=#__codelineno-10-32>32</a></span>
<span class=normal><a href=#__codelineno-10-33>33</a></span>
<span class=normal><a href=#__codelineno-10-34>34</a></span>
<span class=normal><a href=#__codelineno-10-35>35</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=c1>#include &lt;asterisk/dns.h&gt;</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a>static<span class=w> </span>void<span class=w> </span>test_callback<span class=o>(</span>const<span class=w> </span>struct<span class=w> </span>ast_dns_query<span class=w> </span>*query<span class=o>)</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a><span class=o>{</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a><span class=w> </span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*result<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_get_result<span class=o>(</span>query<span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a><span class=w> </span>struct<span class=w> </span>ast_dns_record<span class=w> </span>*record<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>result<span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_nxdomain<span class=o>(</span>result<span class=o>)</span><span class=w> </span><span class=o>||</span><span class=w> </span>!record<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Specified domain name &#39;asterisk.org&#39; does not exist or has no records\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_get_rr_type<span class=o>(</span>query<span class=o>)</span><span class=w> </span><span class=o>==</span><span class=w> </span>ns_t_aaaa<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9></a><span class=w> </span>/*<span class=w> </span>Fall<span class=w> </span>back<span class=w> </span>to<span class=w> </span>an<span class=w> </span>A<span class=w> </span>looku<span class=w> </span>*/
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10></a><span class=w> </span>ast_dns_resolve_async<span class=o>(</span><span class=s2>&quot;www.asterisk.org&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_a,<span class=w> </span>test_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_secure<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;DNS result was secured\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16></a><span class=w> </span><span class=o>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_bogus<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;DNS result is bogus\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-10-19><a id=__codelineno-10-19 name=__codelineno-10-19></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-10-20><a id=__codelineno-10-20 name=__codelineno-10-20></a><span class=w> </span><span class=k>for</span><span class=w> </span><span class=o>(</span><span class=p>;</span><span class=w> </span>record<span class=p>;</span><span class=w> </span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_record_get_next<span class=o>(</span>record<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-10-21><a id=__codelineno-10-21 name=__codelineno-10-21></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Got a record\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-22><a id=__codelineno-10-22 name=__codelineno-10-22></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-10-23><a id=__codelineno-10-23 name=__codelineno-10-23></a><span class=o>}</span>
</span><span id=__span-10-24><a id=__codelineno-10-24 name=__codelineno-10-24></a>int<span class=w> </span>test<span class=o>(</span>void<span class=o>)</span>
</span><span id=__span-10-25><a id=__codelineno-10-25 name=__codelineno-10-25></a><span class=o>{</span>
</span><span id=__span-10-26><a id=__codelineno-10-26 name=__codelineno-10-26></a><span class=w> </span>int<span class=w> </span>res<span class=p>;</span>
</span><span id=__span-10-27><a id=__codelineno-10-27 name=__codelineno-10-27></a><span class=w> </span>/*<span class=w> </span>Start<span class=w> </span>out<span class=w> </span>doing<span class=w> </span>an<span class=w> </span>AAAA<span class=w> </span>looku<span class=w> </span>*/
</span><span id=__span-10-28><a id=__codelineno-10-28 name=__codelineno-10-28></a><span class=w> </span><span class=nv>res</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_resolve_async<span class=o>(</span><span class=s2>&quot;www.asterisk.org&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_aaaa,<span class=w> </span>test_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-29><a id=__codelineno-10-29 name=__codelineno-10-29></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>res<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-10-30><a id=__codelineno-10-30 name=__codelineno-10-30></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Asynchronous resolution of &#39;asterisk.org&#39; failed\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-31><a id=__codelineno-10-31 name=__codelineno-10-31></a><span class=w> </span><span class=k>return</span><span class=w> </span>-1<span class=p>;</span>
</span><span id=__span-10-32><a id=__codelineno-10-32 name=__codelineno-10-32></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-10-33><a id=__codelineno-10-33 name=__codelineno-10-33></a><span class=w> </span>sleep<span class=o>(</span><span class=m>5</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-10-34><a id=__codelineno-10-34 name=__codelineno-10-34></a><span class=w> </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-10-35><a id=__codelineno-10-35 name=__codelineno-10-35></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=naptr>NAPTR<a class=headerlink href=#naptr title="Permanent link">&para;</a></h2> <p>This example does a NAPTR lookup followed by SRV followed by AAAA and then A. The results of the NAPTR and SRV lookups are taken into account when deciding the next step to take.</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1> 1</a></span>
<span class=normal><a href=#__codelineno-11-2> 2</a></span>
<span class=normal><a href=#__codelineno-11-3> 3</a></span>
<span class=normal><a href=#__codelineno-11-4> 4</a></span>
<span class=normal><a href=#__codelineno-11-5> 5</a></span>
<span class=normal><a href=#__codelineno-11-6> 6</a></span>
<span class=normal><a href=#__codelineno-11-7> 7</a></span>
<span class=normal><a href=#__codelineno-11-8> 8</a></span>
<span class=normal><a href=#__codelineno-11-9> 9</a></span>
<span class=normal><a href=#__codelineno-11-10>10</a></span>
<span class=normal><a href=#__codelineno-11-11>11</a></span>
<span class=normal><a href=#__codelineno-11-12>12</a></span>
<span class=normal><a href=#__codelineno-11-13>13</a></span>
<span class=normal><a href=#__codelineno-11-14>14</a></span>
<span class=normal><a href=#__codelineno-11-15>15</a></span>
<span class=normal><a href=#__codelineno-11-16>16</a></span>
<span class=normal><a href=#__codelineno-11-17>17</a></span>
<span class=normal><a href=#__codelineno-11-18>18</a></span>
<span class=normal><a href=#__codelineno-11-19>19</a></span>
<span class=normal><a href=#__codelineno-11-20>20</a></span>
<span class=normal><a href=#__codelineno-11-21>21</a></span>
<span class=normal><a href=#__codelineno-11-22>22</a></span>
<span class=normal><a href=#__codelineno-11-23>23</a></span>
<span class=normal><a href=#__codelineno-11-24>24</a></span>
<span class=normal><a href=#__codelineno-11-25>25</a></span>
<span class=normal><a href=#__codelineno-11-26>26</a></span>
<span class=normal><a href=#__codelineno-11-27>27</a></span>
<span class=normal><a href=#__codelineno-11-28>28</a></span>
<span class=normal><a href=#__codelineno-11-29>29</a></span>
<span class=normal><a href=#__codelineno-11-30>30</a></span>
<span class=normal><a href=#__codelineno-11-31>31</a></span>
<span class=normal><a href=#__codelineno-11-32>32</a></span>
<span class=normal><a href=#__codelineno-11-33>33</a></span>
<span class=normal><a href=#__codelineno-11-34>34</a></span>
<span class=normal><a href=#__codelineno-11-35>35</a></span>
<span class=normal><a href=#__codelineno-11-36>36</a></span>
<span class=normal><a href=#__codelineno-11-37>37</a></span>
<span class=normal><a href=#__codelineno-11-38>38</a></span>
<span class=normal><a href=#__codelineno-11-39>39</a></span>
<span class=normal><a href=#__codelineno-11-40>40</a></span>
<span class=normal><a href=#__codelineno-11-41>41</a></span>
<span class=normal><a href=#__codelineno-11-42>42</a></span>
<span class=normal><a href=#__codelineno-11-43>43</a></span>
<span class=normal><a href=#__codelineno-11-44>44</a></span>
<span class=normal><a href=#__codelineno-11-45>45</a></span>
<span class=normal><a href=#__codelineno-11-46>46</a></span>
<span class=normal><a href=#__codelineno-11-47>47</a></span>
<span class=normal><a href=#__codelineno-11-48>48</a></span>
<span class=normal><a href=#__codelineno-11-49>49</a></span>
<span class=normal><a href=#__codelineno-11-50>50</a></span>
<span class=normal><a href=#__codelineno-11-51>51</a></span>
<span class=normal><a href=#__codelineno-11-52>52</a></span>
<span class=normal><a href=#__codelineno-11-53>53</a></span>
<span class=normal><a href=#__codelineno-11-54>54</a></span>
<span class=normal><a href=#__codelineno-11-55>55</a></span>
<span class=normal><a href=#__codelineno-11-56>56</a></span>
<span class=normal><a href=#__codelineno-11-57>57</a></span>
<span class=normal><a href=#__codelineno-11-58>58</a></span>
<span class=normal><a href=#__codelineno-11-59>59</a></span>
<span class=normal><a href=#__codelineno-11-60>60</a></span>
<span class=normal><a href=#__codelineno-11-61>61</a></span>
<span class=normal><a href=#__codelineno-11-62>62</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=c1>#include &lt;asterisk/dns.h&gt;</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2></a>/*<span class=w> </span>An<span class=w> </span>alternative<span class=w> </span>to<span class=w> </span>this<span class=w> </span>cascade<span class=w> </span>approach<span class=w> </span>would<span class=w> </span>be<span class=w> </span>using<span class=w> </span>a<span class=w> </span>query<span class=w> </span><span class=nb>set</span><span class=w> </span>to<span class=w> </span><span class=k>do</span><span class=w> </span>NAPTR,<span class=w> </span>SRV,<span class=w> </span>AAAA,<span class=w> </span>and<span class=w> </span>A<span class=w> </span><span class=k>in</span><span class=w> </span>parallel
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3></a><span class=w> </span>*<span class=w> </span>with<span class=w> </span>NAPTR<span class=w> </span>and<span class=w> </span>SRV<span class=w> </span>adding<span class=w> </span>additional<span class=w> </span>queries<span class=w> </span>afterwards
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4></a><span class=w> </span>*/
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5></a>static<span class=w> </span>void<span class=w> </span>a_callback<span class=o>(</span>const<span class=w> </span>struct<span class=w> </span>ast_dns_query<span class=w> </span>*query<span class=o>)</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6></a><span class=o>{</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7></a><span class=w> </span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*result<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_get_result<span class=o>(</span>query<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8></a><span class=w> </span>struct<span class=w> </span>ast_dns_record<span class=w> </span>*record<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>result<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>!record<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10></a><span class=w> </span>/*<span class=w> </span>We<span class=w> </span>have<span class=w> </span>nowhere<span class=w> </span>to<span class=w> </span>g<span class=w> </span>*/
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13></a><span class=w> </span>/*<span class=w> </span>If<span class=w> </span>we<span class=w> </span>got<span class=w> </span>here<span class=w> </span>there<span class=w> </span>is<span class=w> </span>an<span class=w> </span>A<span class=w> </span>recor<span class=w> </span>*/
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14></a><span class=o>}</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15></a>static<span class=w> </span>void<span class=w> </span>aaaa_callback<span class=o>(</span>const<span class=w> </span>struct<span class=w> </span>ast_dns_query<span class=w> </span>*query<span class=o>)</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16></a><span class=o>{</span>
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17></a><span class=w> </span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*result<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_get_result<span class=o>(</span>query<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18></a><span class=w> </span>struct<span class=w> </span>ast_dns_record<span class=w> </span>*record<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>result<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>!record<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20></a><span class=w> </span>ast_dns_resolve_async<span class=o>(</span>ast_dns_query_get_name<span class=o>(</span>query<span class=o>)</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_a,<span class=w> </span>a_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-21><a id=__codelineno-11-21 name=__codelineno-11-21></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-11-22><a id=__codelineno-11-22 name=__codelineno-11-22></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-11-23><a id=__codelineno-11-23 name=__codelineno-11-23></a><span class=w> </span>/*<span class=w> </span>If<span class=w> </span>we<span class=w> </span>got<span class=w> </span>here<span class=w> </span>there<span class=w> </span>is<span class=w> </span>an<span class=w> </span>AAAA<span class=w> </span>recor<span class=w> </span>*/
</span><span id=__span-11-24><a id=__codelineno-11-24 name=__codelineno-11-24></a><span class=o>}</span>
</span><span id=__span-11-25><a id=__codelineno-11-25 name=__codelineno-11-25></a>static<span class=w> </span>void<span class=w> </span>srv_callback<span class=o>(</span>const<span class=w> </span>struct<span class=w> </span>ast_dns_query<span class=w> </span>*query<span class=o>)</span>
</span><span id=__span-11-26><a id=__codelineno-11-26 name=__codelineno-11-26></a><span class=o>{</span>
</span><span id=__span-11-27><a id=__codelineno-11-27 name=__codelineno-11-27></a><span class=w> </span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*result<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_get_result<span class=o>(</span>query<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-28><a id=__codelineno-11-28 name=__codelineno-11-28></a><span class=w> </span>struct<span class=w> </span>ast_dns_record<span class=w> </span>*record<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>result<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-29><a id=__codelineno-11-29 name=__codelineno-11-29></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>record<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-11-30><a id=__codelineno-11-30 name=__codelineno-11-30></a><span class=w> </span>ast_dns_resolve_async<span class=o>(</span>ast_dns_srv_get_host<span class=o>(</span>record<span class=o>)</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_aaaa,<span class=w> </span>aaaa_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-31><a id=__codelineno-11-31 name=__codelineno-11-31></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-11-32><a id=__codelineno-11-32 name=__codelineno-11-32></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-11-33><a id=__codelineno-11-33 name=__codelineno-11-33></a><span class=w> </span>ast_dns_resolve_async<span class=o>(</span><span class=s2>&quot;asterisk.org&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_aaaa,<span class=w> </span>aaaa_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-34><a id=__codelineno-11-34 name=__codelineno-11-34></a><span class=o>}</span>
</span><span id=__span-11-35><a id=__codelineno-11-35 name=__codelineno-11-35></a>static<span class=w> </span>void<span class=w> </span>naptr_callback<span class=o>(</span>const<span class=w> </span>struct<span class=w> </span>ast_dns_query<span class=w> </span>*query<span class=o>)</span>
</span><span id=__span-11-36><a id=__codelineno-11-36 name=__codelineno-11-36></a><span class=o>{</span>
</span><span id=__span-11-37><a id=__codelineno-11-37 name=__codelineno-11-37></a><span class=w> </span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*result<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_get_result<span class=o>(</span>query<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-38><a id=__codelineno-11-38 name=__codelineno-11-38></a><span class=w> </span>struct<span class=w> </span>ast_dns_record<span class=w> </span>*record<span class=p>;</span>
</span><span id=__span-11-39><a id=__codelineno-11-39 name=__codelineno-11-39></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_nxdomain<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-11-40><a id=__codelineno-11-40 name=__codelineno-11-40></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Specified domain name &#39;asterisk.org&#39; does not exist\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-41><a id=__codelineno-11-41 name=__codelineno-11-41></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-11-42><a id=__codelineno-11-42 name=__codelineno-11-42></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-11-43><a id=__codelineno-11-43 name=__codelineno-11-43></a><span class=w> </span>/*<span class=w> </span>This<span class=w> </span>is<span class=w> </span>a<span class=w> </span>very<span class=w> </span>simplistic<span class=w> </span>cascade<span class=w> </span>example,<span class=w> </span>it<span class=w> </span>grabs<span class=w> </span>the<span class=w> </span>first<span class=w> </span>resul<span class=w> </span>*/
</span><span id=__span-11-44><a id=__codelineno-11-44 name=__codelineno-11-44></a><span class=w> </span><span class=k>for</span><span class=w> </span><span class=o>(</span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>result<span class=o>)</span><span class=p>;</span><span class=w> </span>record<span class=p>;</span><span class=w> </span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_record_get_next<span class=o>(</span>record<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-11-45><a id=__codelineno-11-45 name=__codelineno-11-45></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>!strcmp<span class=o>(</span>ast_dns_naptr_get_service<span class=o>(</span>record<span class=o>)</span>,<span class=w> </span><span class=s2>&quot;SIP+D2U&quot;</span><span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-11-46><a id=__codelineno-11-46 name=__codelineno-11-46></a><span class=w> </span>ast_dns_resolve_async<span class=o>(</span>ast_dns_naptr_get_replacement<span class=o>(</span>record<span class=o>)</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_srv,<span class=w> </span>srv_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-47><a id=__codelineno-11-47 name=__codelineno-11-47></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-11-48><a id=__codelineno-11-48 name=__codelineno-11-48></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-11-49><a id=__codelineno-11-49 name=__codelineno-11-49></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-11-50><a id=__codelineno-11-50 name=__codelineno-11-50></a><span class=w> </span>ast_dns_resolve_async<span class=o>(</span><span class=s2>&quot;_sip._udp.asterisk.org&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_srv,<span class=w> </span>srv_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-51><a id=__codelineno-11-51 name=__codelineno-11-51></a><span class=o>}</span>
</span><span id=__span-11-52><a id=__codelineno-11-52 name=__codelineno-11-52></a>int<span class=w> </span>test<span class=o>(</span>void<span class=o>)</span>
</span><span id=__span-11-53><a id=__codelineno-11-53 name=__codelineno-11-53></a><span class=o>{</span>
</span><span id=__span-11-54><a id=__codelineno-11-54 name=__codelineno-11-54></a><span class=w> </span>int<span class=w> </span>res<span class=p>;</span>
</span><span id=__span-11-55><a id=__codelineno-11-55 name=__codelineno-11-55></a><span class=w> </span><span class=nv>res</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_resolve_async<span class=o>(</span><span class=s2>&quot;asterisk.org&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_naptr,<span class=w> </span>naptr_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-56><a id=__codelineno-11-56 name=__codelineno-11-56></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>res<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-11-57><a id=__codelineno-11-57 name=__codelineno-11-57></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Asynchronous resolution of &#39;asterisk.org&#39; failed\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-58><a id=__codelineno-11-58 name=__codelineno-11-58></a><span class=w> </span><span class=k>return</span><span class=w> </span>-1<span class=p>;</span>
</span><span id=__span-11-59><a id=__codelineno-11-59 name=__codelineno-11-59></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-11-60><a id=__codelineno-11-60 name=__codelineno-11-60></a><span class=w> </span>sleep<span class=o>(</span><span class=m>5</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-11-61><a id=__codelineno-11-61 name=__codelineno-11-61></a><span class=w> </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-11-62><a id=__codelineno-11-62 name=__codelineno-11-62></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=recurring>Recurring<a class=headerlink href=#recurring title="Permanent link">&para;</a></h2> <p>The recurring example has the DNS core re-run the specified query according to the lowest TTL of the result records. It is up to the user to store the previous results and determine whether action should be taken or not.</p> <div class="language-bash highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1> 1</a></span>
<span class=normal><a href=#__codelineno-12-2> 2</a></span>
<span class=normal><a href=#__codelineno-12-3> 3</a></span>
<span class=normal><a href=#__codelineno-12-4> 4</a></span>
<span class=normal><a href=#__codelineno-12-5> 5</a></span>
<span class=normal><a href=#__codelineno-12-6> 6</a></span>
<span class=normal><a href=#__codelineno-12-7> 7</a></span>
<span class=normal><a href=#__codelineno-12-8> 8</a></span>
<span class=normal><a href=#__codelineno-12-9> 9</a></span>
<span class=normal><a href=#__codelineno-12-10>10</a></span>
<span class=normal><a href=#__codelineno-12-11>11</a></span>
<span class=normal><a href=#__codelineno-12-12>12</a></span>
<span class=normal><a href=#__codelineno-12-13>13</a></span>
<span class=normal><a href=#__codelineno-12-14>14</a></span>
<span class=normal><a href=#__codelineno-12-15>15</a></span>
<span class=normal><a href=#__codelineno-12-16>16</a></span>
<span class=normal><a href=#__codelineno-12-17>17</a></span>
<span class=normal><a href=#__codelineno-12-18>18</a></span>
<span class=normal><a href=#__codelineno-12-19>19</a></span>
<span class=normal><a href=#__codelineno-12-20>20</a></span>
<span class=normal><a href=#__codelineno-12-21>21</a></span>
<span class=normal><a href=#__codelineno-12-22>22</a></span>
<span class=normal><a href=#__codelineno-12-23>23</a></span>
<span class=normal><a href=#__codelineno-12-24>24</a></span>
<span class=normal><a href=#__codelineno-12-25>25</a></span>
<span class=normal><a href=#__codelineno-12-26>26</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1></a><span class=c1>#include &lt;asterisk/dns.h&gt;</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2></a>static<span class=w> </span>void<span class=w> </span>test_callback<span class=o>(</span>const<span class=w> </span>struct<span class=w> </span>ast_dns_query<span class=w> </span>*query<span class=o>)</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3></a><span class=o>{</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4></a><span class=w> </span>struct<span class=w> </span>ast_dns_result<span class=w> </span>*result<span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_query_get_result<span class=o>(</span>query<span class=o>)</span><span class=p>;</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5></a><span class=w> </span>struct<span class=w> </span>ast_dns_record<span class=w> </span>*record<span class=p>;</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>ast_dns_result_get_nxdomain<span class=o>(</span>result<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Specified domain name &#39;asterisk.org&#39; does not exist\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8></a><span class=w> </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10></a>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11></a><span class=w> </span>/*<span class=w> </span>Previous<span class=w> </span>information<span class=w> </span>should<span class=w> </span>be<span class=w> </span>stored<span class=w> </span>and<span class=w> </span>compared<span class=w> </span>against<span class=w> </span>new<span class=w> </span>records,<span class=w> </span><span class=k>if</span><span class=w> </span>different<span class=w> </span><span class=k>then</span><span class=w> </span>take<span class=w> </span>actio<span class=w> </span>*/
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12></a><span class=w> </span><span class=k>for</span><span class=w> </span><span class=o>(</span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_result_get_records<span class=o>(</span>result<span class=o>)</span><span class=p>;</span><span class=w> </span>record<span class=p>;</span><span class=w> </span><span class=nv>record</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_record_get_next<span class=o>(</span>record<span class=o>))</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Got address: %s\n&quot;</span>,<span class=w> </span>inet_ntoa<span class=o>(</span>*<span class=o>(</span>struct<span class=w> </span>in_addr*<span class=o>)</span>ast_dns_record_get_data<span class=o>(</span>record<span class=o>)))</span><span class=p>;</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15></a><span class=o>}</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16></a>int<span class=w> </span>test<span class=o>(</span>void<span class=o>)</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17></a><span class=o>{</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18></a><span class=w> </span>int<span class=w> </span>res<span class=p>;</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19></a><span class=w> </span><span class=nv>res</span><span class=w> </span><span class=o>=</span><span class=w> </span>ast_dns_resolve_async_recurring<span class=o>(</span><span class=s2>&quot;www.asterisk.org&quot;</span>,<span class=w> </span>ns_c_in,<span class=w> </span>ns_t_a,<span class=w> </span>test_callback,<span class=w> </span>NULL<span class=o>)</span><span class=p>;</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20></a><span class=w> </span><span class=k>if</span><span class=w> </span><span class=o>(</span>res<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21></a><span class=w> </span>ast_verbose<span class=o>(</span><span class=m>1</span>,<span class=w> </span><span class=s2>&quot;Asynchronous resolution of &#39;asterisk.org&#39; failed\n&quot;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-12-22><a id=__codelineno-12-22 name=__codelineno-12-22></a><span class=w> </span><span class=k>return</span><span class=w> </span>-1<span class=p>;</span>
</span><span id=__span-12-23><a id=__codelineno-12-23 name=__codelineno-12-23></a><span class=w> </span><span class=o>}</span>
</span><span id=__span-12-24><a id=__codelineno-12-24 name=__codelineno-12-24></a><span class=w> </span>sleep<span class=o>(</span><span class=m>5</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-12-25><a id=__codelineno-12-25 name=__codelineno-12-25></a><span class=w> </span><span class=k>return</span><span class=w> </span><span class=m>0</span><span class=p>;</span>
</span><span id=__span-12-26><a id=__codelineno-12-26 name=__codelineno-12-26></a><span class=o>}</span>
</span></code></pre></div></td></tr></table></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Content is licensed under a Creative Commons Attribution-ShareAlike 3.0 United States License. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://www.asterisk.org/ target=_blank rel=noopener title=www.asterisk.org class=md-social__link> <?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg version=1.1 id=svg2 width=48 height=48 viewbox="0 0 48 48" sodipodi:docname=favicon.svg inkscape:version="1.2.2 (b0a8486541, 2022-12-01)" xmlns:inkscape=http://www.inkscape.org/namespaces/inkscape xmlns:sodipodi=http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd xmlns:xlink=http://www.w3.org/1999/xlink xmlns=http://www.w3.org/2000/svg xmlns:svg=http://www.w3.org/2000/svg> <defs id=defs6 /> <sodipodi:namedview id=namedview4 pagecolor=#ffffff bordercolor=#666666 borderopacity=1.0 inkscape:showpageshadow=2 inkscape:pageopacity=0.0 inkscape:pagecheckerboard=0 inkscape:deskcolor=#d1d1d1 showgrid=false inkscape:zoom=17.291667 inkscape:cx=24 inkscape:cy=24.028916 inkscape:current-layer=g8 /> <g inkscape:groupmode=layer inkscape:label=Image id=g8> <image width=48 height=48 preserveaspectratio=none id=image10 xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAACzxJREFU
aIHtmXuQXNVxxn997jz3qRdasay0s5IMiQCDIx4JqaSwjQFDoGIXAhUVMAajgF0kAWShB48xDy2W
eLmoOLbsFBHGBahcgYTEBAJBhYNLxsjEWKEko6BdJCEJSWi1O7O7M3Pv+fLHvmZ3Z1YrYZJ/+Kqm
am6fPt393XNud5974RN8go8E+ziNK4s70HtSbTpWrCl5pdMxFy9FYdx8EBdRKBcrxeWLUUR/nyXz
M2q25S2LPxofHwuB/LLZzVEQnGXyp2HuJEythh0PTAXSoADMA33AIcFeEzvMsRVpc6RwU3377g/3
LW2qmfXAvvz/CQEJy9/ZcorC2DeccZ5gOtAAuEGVItIHODuIKCDiGNMMZgmSgzoeowuxXfgHEwrf
Kvj4tM3pztc/myX8WAgom0kVC35uyexWwxYLUkAXsB/pVx694nz0evchvdO87v3esfN33tySnl4T
P7XkdbEzLjXIAI2ASTwdmH8NXCxU6fGG9t0Hf6cE+pZnMnLc4I2vmDRDst/g+HeTXhXujdrVOz4w
0GTtHbxpfkO6rnSezK4GLhTEgP/00i9jxqySi+5uvHfXO78TAodXzr4gwD2CbJ4ZuyTucS58Mb2/
6QNbt7l0rHYF1n1zy9QgHVwH3A+GxFbQf5jZjND7r0+5/71Dx0xAS5tq8/H09Rh3I/I4Hi+GbvW0
b797+FiDrobcisxXZTxi0IB4E6MGaV3t6s6HzQZW9qgIdK84Ybpz8TsRfwG8JvRwXaLzZzbmAeu5
Y87JLuScclkEexra3/uXo/Gnm1vS+bS7A9wtCDD2AnUu4OKaezp+MWkCyuLyxZnHQc0PQJ8DvisV
1ta3791fmWjb9YHpO6OEppdr7+u85GgIAOz/m9bj0zX2b8CngSIQk/RKV390yeyHd/W5iSYruyBx
YNnxv0+xtQnSDwj+1MTq2kTnymrBAzgUCtKjfxO6qorjHunc46RvAR5IAM7MTm9IB+cO+Jog+Fx/
9zn1ybjrxe5CnOvEbTXJzvuHtowWEVRh0D/OnihUUt1QzUYZ0gc7n0O8WSaaGsjO3ZJdkKhKoKfQ
c7ZzwfxS6JYIFoM9uCNZ89hQqd9xTSaVn5/5cX757DM1ZivKa1ywJj+OVO+yE1ouOrH1sdzKzOkT
EbB1lDB+VCZyzrTwZLoaKhLov735pJhzWYNGjKtMPFV7sONvT8m+XQTQBoKZzdyGcYVc7Kd9y1u/
0Z1tnjFExAXjV8DKVkVLm2pzt2cu9LH4C8iuQjykZSfVT0SCyDZStorCTuwP4/XjCPSuap4d+sT3
Q29veLgS089rvLvN1jGc2/t+3bJQ6GuDpmZ4Z9+xYuKJ3hWtX9ySXZCotAJeFJTF5VZmTu9NpB/C
6yfAAgCZzuwN+i+vuiWBwHTYjD3DBMQs52O1owgouyAhxa8HjnfYCcIapdhyK8vxe5c21Uqx68Ca
y6Y6g/Nl9nim0LsWXGxsACYr9hdbrzH0E+A6sNrhMaxOZkt6P9U6sxoBn4qKEsMFDCNeME0ZRaC3
P3+ysK9JvI9pkTP9Q11i9tZynVQqNVPGn1TwYcB0jL8Cnq4wem2E/b2weWLcnRZwYmT8YTUCFJ1g
dL2Jex8ME3glS8w7uws4HlgIdIRR9JRlN46a1PjpzveiEtcKfiDK7shoNFaQNVTRLZnpX510XX3c
nq8Wv1nkGEijQ/De1DNMYGGh7SJDFw8oU2/GUw3tu/5nnKHLiRrXdGyqSxRvCUIuQnoJiKo5PgK2
Ofkrw3j0lXR75zOW7Rj38I8QCBJmTB26FnQHLuiJwUBLnCvqVrChvduH9L2hfqOiwez7vcCmHdnM
JTNLXANaKm9zMOJHCNpjfCDPBjNbXdP+3r7JMI28NRo0DV07o9Or2OsAevr8GQYnlbF7sXZ1555K
hsaiLdvRvzbesU5m92F0HUnfoCTPU3XJ4oq61TsmFfzgvLPKDj54z7a+eKrHCcwFdjYwbZiA16Sb
rt5VLSd8s9T6PcT9DJzCJoQgiXFtvph4Nr9q7hnSZBtKXVr2PxS8OY3tuRjZ5jRFOwUGlt5QGMHm
CU0J61naPD0ej1/gPXfLbO7kghiADTzQX5D8Wb23tz7auyq2Lh2fvWdswhhCftnsZmFfGAnAPowT
vWZZvMvl0nUSbcNj0JUm6qnmfOfNLenciszlLpl4IjJbf7TBj0GjZLd7hT/NF3f8dW5lW1NFrcDd
SFkGEnorlYw2A7ggSRIbeTgM6+2PBVWzyvRE4jhzuhM4H6tcOSul1wlSLmCnAN/Cc9rYkUPLMxlv
dnm5zBsPDSYRnFkYM1RX5iiZwldt8tLp1F7QP4HGkvSIvZJWx/CLKrBaH1q0GPQ2aOxWEfCqt+Ko
ratFBHHTZQatw1ThhcbVncP1whVCGWXdpMGU0AdVGyvLvl30LlgPtr3MfUHS0/LRFXXJtrsqz1Sy
8d6dG3xY+rLDHgTKM1CXl62rb9/9YfmM7nktbWBXM5R9xN5I/p5yHZcMgsiwkU5xQHnC9rb+nh2/
9Wjt4OU2c1xRl4zfUP/tna9admPosdTYOc5ImqGGNe9vS/fE7jKL/gzTSwwcVJ6vz8WeH/sGIwiC
OzFOHryMMJ48mHSjVikWxVWgyAFg3ojYLpNYX62QmSGp87H8qkyTC0s/qlmze1f5uPekbMwmlEZy
uD26vQC8sXdp05/XJVJft9D/2B7tGGmVlyyM52YcWILsqhGn2hqz4O/asu+OqtaxArHeBGGnwdll
7j7ftSpzGnT8VyUCQySgo73imBsJdkTfjVuVwdeGa8tl2kCQ+/WBSw27c+j2CQ47cVvqvnffGWvD
TWN7zqEtjO5nUgnpDi05YltQEX7g7dwoqIKsEnrebDvHZA8ijhsUlfAsr0l0Vmz0nGXxQpswjUpz
Mvtcbkbbl5Q9htO4B0wHyn+Sr3gmLkf/8nnzndOzDGQdA4USP+zrzj9R7a11DKCQSPwiWQx/A3y2
bGyKodvyxbatsOOto4k/puAlr/DKclnkNEEdGEAy1fd+WEi8jnEhgGHPOVdsn/nd/blqc4bTZ//y
OeeF5l7EynoTIWBLLIi+lLp357jW+uPAoW9mTo/H+WdgtozF9fd1jD8clWFUI5Vflfm+xHWMPzF1
4LmxNsXGiXr2o8GW7ILE3FJXEz7eYiX2Hqb/g6YH9vWSJegptC5zZnchfl6bLF48VHWPSKB31bzZ
XuF6ZOeOWokB7BPaIPFkfabzDftLjukFbtfyOVNjuLMxfR5nFyAWALsMvSzcKy4sbqQGfCH+jzI+
5cRXa9s7np0UAQk7vGLOHwSBPW2yeRX0/QARXpfX+vpU6YWJ7s6w3ZvmJ/saws8gfdnLzsdoYeBr
TXmCEJAD9gDPO2mXx9ZgPFnoid04/dHt3UckMITuFZnfc/CUGQtE9VRqKCfZLzH9Ssa7RHbQmfWZ
kYq8n2FmrZhOxWzhYFoc60+CHkPdhk0V1IzoyIM54LCz8Pya+3a9PmkCAIdubWuNJ3QLxtXAlGp6
HwH7kV6U7Dlc9N/ywRku4DOIUxk4Hc5icIUEz9QlOi6rlEonPA0p21zTU4ifFhirJLuwWvs8aQjh
+G0g1pfEM4UouXvGmm25oR7onZvmJ2fV0RAPCg3ybo6Hc4A/lnEm0uK61e+9fFQEhv0uIuib23q2
d9xg5v5IqNGgdrC6Vip03qCgga+QedA+sJ95Rc/UH9y5qfwt36T8Z8+N7c93zJi5tmPvMREoR25l
W5PwCyTmBsasSEwzsxpnCpArCfokuhzRPrDdMezdRH/YaQ/v6jtaX5PBR/rIJ7DNSxbGpjcfDDKH
Q6Mt5fmwJSK7MTqaj3uf4BP8P+J/ASVw7ffFYZkMAAAAAElFTkSuQmCC
"/> </g> </svg> </a> <a href=https://www.asterisk.org/blog/ target=_blank rel=noopener title=www.asterisk.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="m61.7 169.4 101.5 278C92.2 413 43.3 340.2 43.3 256c0-30.9 6.6-60.1 18.4-86.6m337.9 75.9c0-26.3-9.4-44.5-17.5-58.7-10.8-17.5-20.9-32.4-20.9-49.9 0-19.6 14.8-37.8 35.7-37.8.9 0 1.8.1 2.8.2-37.9-34.7-88.3-55.9-143.7-55.9-74.3 0-139.7 38.1-177.8 95.9 5 .2 9.7.3 13.7.3 22.2 0 56.7-2.7 56.7-2.7 11.5-.7 12.8 16.2 1.4 17.5 0 0-11.5 1.3-24.3 2l77.5 230.4L249.8 247l-33.1-90.8c-11.5-.7-22.3-2-22.3-2-11.5-.7-10.1-18.2 1.3-17.5 0 0 35.1 2.7 56 2.7 22.2 0 56.7-2.7 56.7-2.7 11.5-.7 12.8 16.2 1.4 17.5 0 0-11.5 1.3-24.3 2l76.9 228.7 21.2-70.9c9-29.4 16-50.5 16-68.7m-139.9 29.3-63.8 185.5c19.1 5.6 39.2 8.7 60.1 8.7 24.8 0 48.5-4.3 70.6-12.1-.6-.9-1.1-1.9-1.5-2.9zm183-120.7c.9 6.8 1.4 14 1.4 21.9 0 21.6-4 45.8-16.2 76.2l-65 187.9C426.2 403 468.7 334.5 468.7 256c0-37-9.4-71.8-26-102.1M8 256a248 248 0 1 1 496 0 248 248 0 1 1-496 0m484.6 0a236.6 236.6 0 1 0-473.2 0 236.6 236.6 0 1 0 473.2 0"/></svg> </a> <a href=https://twitter.com/asteriskdev target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg> </a> <a href=https://github.com/asterisk target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://community.asterisk.org target=_blank rel=noopener title=community.asterisk.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M225.9 32C103.3 32 0 130.5 0 252.1 0 256 .1 480 .1 480l225.8-.2c122.7 0 222.1-102.3 222.1-223.9S348.6 32 225.9 32M224 384c-19.4 0-37.9-4.3-54.4-12.1L88.5 392l22.9-75c-9.8-18.1-15.4-38.9-15.4-61 0-70.7 57.3-128 128-128s128 57.3 128 128-57.3 128-128 128"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.prune", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../../assets/javascripts/bundle.92b07e13.min.js></script> </body> </html>